[
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13635032",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13635032",
    "key": "CASSANDRA-21043",
    "fields": {
      "summary": "Refactor the way we check if a transformation is allowed to be committed during upgrades",
      "created": "2025-11-24T14:02:51.000+0000",
      "description": "Currently the way we check if a transformation is allowed to be committed during metadata serialization upgrades is to call the {{allowDuringUpgrades}} method, which only returns true for {{Startup}} and {{TriggerSnapshot}} transformations. This means that all other transformations will be disallowed if the metadata serialization version changed, which we allow in minor upgrades.\r\n\r\nThis is overly defensive and we can relax this to only disallow committing completely new transformations since non-upgraded nodes would not be able to deserialize them. Modified transformations must be backwards compatible to be committed, and will be serialized using the oldest serialization version present in the cluster.\r\n\r\nThis patch adds an {{introducedIn}} field on the {{Transformation.Kind}} enum. This allows old transformations to be committed by comparing it with the cluster min version. For more flexibility, a transformation can also override the {{eligibleToCommit}} method to be able to check if the current cluster metadata allows the transformation.\r\n\r\nSpecifically for new schema transformations, a {{compatibleWith}} method has to be implemented. This method should also handle modified schema transformations to make sure non-upgraded nodes can still execute them. See javadoc on the {{SchemaTransformation.compatibleWith}} method for more details.",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=marcuse",
        "name": "marcuse",
        "key": "krummas",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
        },
        "displayName": "Marcus Eriksson",
        "active": true,
        "timeZone": "Europe/Berlin"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13635029",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13635029",
    "key": "CASSANDRA-21042",
    "fields": {
      "summary": "Make TopologyException a check exception",
      "created": "2025-11-24T13:45:54.000+0000",
      "description": "Make TopologyException a checked exception to ensure they are handled carefully, as they may occur at surprising times\r\nAlso Fix:\r\n - Restore MaxDecidedRX on replay\r\n - When catchup_on_start_exit_on_failure == false, should startup on any kind of failure, not only timeout\r\n - lazy vtable LIMIT clause regression\r\n - DurabilityService.onEpochRetired\r\n - Command.validate when uniqueHlc differs\r\n - Avoid unsafe publication of AccordExecutor to scheduledFastTasks\r\n - AccordCache hitRate metric names\r\n - use long for return type of DurationSpec.toNanoseconds\r\n - Repair without all replicas should not request all Accord replicas participate\r\nAlso Improve:\r\n - Split Accord startup into local+distributed, ensure we\r\n - Add logging to FetchDurableBefore on startup\r\n - Add randomised testing of AbstractLazyVirtualTable\r\n - Add validation of lazy virtual table key ordering\r\n - Don't send requests to faulty replicas\r\n - shrinkOrEvict large objects without holding lock\r\n - Accord dtest shutdown",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634987",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634987",
    "key": "CASSANDRA-21041",
    "fields": {
      "summary": "SSTable overlap statistics",
      "created": "2025-11-24T07:29:46.000+0000",
      "description": "When trying to evaluate the effect of compaction and its settings, perhaps the most relevant information is the amount of overlap between sstables, i.e. the number of sstables that have to be queried to serve any request for a specific partition. We do not currently present this information for any compaction strategy.\r\n\r\nFor some strategies this can be organized by level, and specifically for UCS, by shard.\r\n\r\n[This patch in the DataStax repository|https://github.com/datastax/cassandra/commit/c7d6f082e9eef8f9121ef271495e9a2469bde671] implements such a statistic for UCS, which outputs overlap per level as\r\n{code}\r\nMax overlap map for density.blobs:\r\n  all: 26, per shard: [11, 11, 17, 17, 14, 14, 20, 20, 17, 17, 23, 23, 20, 20, 26, 26]\r\n  unrepaired:0: 18, per shard: [6, 10, 14, 18]\r\n  unrepaired:1: 9, per shard: [6, 9, 5, 8, 4, 7, 3, 6]\r\n  unrepaired:2: 3, per shard: [3, 3, 3, 3, 3, 3, 2, 2, 3, 3, 3, 3, 3, 3, 2, 2, 3, 3, 3, 3, 3, 3, 2, 2, 3, 3, 3, 3, 3, 3, 2, 2]\r\n{code}.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13634987/comment/18040236",
            "id": "18040236",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=blambov",
              "name": "blambov",
              "key": "blambov",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Branimir Lambov",
              "active": true,
              "timeZone": "Europe/Sofia"
            },
            "body": "Presented as a graph, the above statistics look like this: \r\n!overlap-graph.png!\r\n\r\nThe three shaded regions are numbers of sstables overlapping in each shard and level, which add up to a little more than the total overlap in each shard shown in the dashed black line. The difference between shards is due to the compactions still ongoing or yet to be started, including the effect of opening sstables early. The difference between the dashed line and the sum of the shaded regions is due to some data in non-intersecting regions of some levels, in this case due to early open resulting in data in a shard being counted both for the lower level (parts still to be compacted) and the higher (parts already compacted and opened early).",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=blambov",
              "name": "blambov",
              "key": "blambov",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Branimir Lambov",
              "active": true,
              "timeZone": "Europe/Sofia"
            },
            "created": "2025-11-24T07:37:27.376+0000",
            "updated": "2025-11-24T07:37:27.376+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634923",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634923",
    "key": "CASSANDRA-21040",
    "fields": {
      "summary": "Optimize ModificationStatement#requiresRead ",
      "created": "2025-11-22T12:38:59.000+0000",
      "description": "org.apache.cassandra.cql3.statements.ModificationStatement#requiresRead is calculated now every time, we can calculate it once and memorize the result.\r\n\r\nIt costs 1.5% of CPU for a simple 10-row batch insert test.\r\n\r\n!image-2025-11-22-12-30-59-096.png|width=1000!",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13634923/comment/18040266",
            "id": "18040266",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "body": "I have added couple small nits / ideas to your patch.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "created": "2025-11-24T10:31:25.204+0000",
            "updated": "2025-11-24T10:31:25.204+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=dnk",
        "name": "dnk",
        "key": "dnk",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dnk&avatarId=53432",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dnk&avatarId=53432",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dnk&avatarId=53432",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dnk&avatarId=53432"
        },
        "displayName": "Dmitry Konstantinov",
        "active": true,
        "timeZone": "Europe/London"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10723",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Review In Progress",
        "id": "10723",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634881",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634881",
    "key": "CASSANDRA-21039",
    "fields": {
      "summary": "Minor Directory lookup performance improvements",
      "created": "2025-11-21T15:19:58.000+0000",
      "description": "* isGossipOnlyMember iterates all joined hosts unnecessarily\r\n* Location lookup should be cached to avoid several directory lookups",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=marcuse",
        "name": "marcuse",
        "key": "krummas",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
        },
        "displayName": "Marcus Eriksson",
        "active": true,
        "timeZone": "Europe/Berlin"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634878",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634878",
    "key": "CASSANDRA-21038",
    "fields": {
      "summary": "Avoid iterating all prepared statements when getting the PreparedStatementsCacheSize metric",
      "created": "2025-11-21T14:49:41.000+0000",
      "description": "The prepared statement cache tracks the current total weight for eviction purposes, we can just return that",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13634878/comment/18039923",
            "id": "18039923",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=dnk",
              "name": "dnk",
              "key": "dnk",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dnk&avatarId=53432",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dnk&avatarId=53432",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dnk&avatarId=53432",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dnk&avatarId=53432"
              },
              "displayName": "Dmitry Konstantinov",
              "active": true,
              "timeZone": "Europe/London"
            },
            "body": "+1 (same API is mentioned here: https://github.com/ben-manes/caffeine/discussions/822)",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=dnk",
              "name": "dnk",
              "key": "dnk",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dnk&avatarId=53432",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dnk&avatarId=53432",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dnk&avatarId=53432",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dnk&avatarId=53432"
              },
              "displayName": "Dmitry Konstantinov",
              "active": true,
              "timeZone": "Europe/London"
            },
            "created": "2025-11-21T17:09:21.692+0000",
            "updated": "2025-11-21T17:09:21.692+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=marcuse",
        "name": "marcuse",
        "key": "krummas",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
        },
        "displayName": "Marcus Eriksson",
        "active": true,
        "timeZone": "Europe/Berlin"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634801",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634801",
    "key": "CASSANDRA-21037",
    "fields": {
      "summary": "Backport fix to nodetool gcstats output",
      "created": "2025-11-20T18:05:03.000+0000",
      "description": "Backport the fix to DirectMemory reporting https://issues.apache.org/jira/browse/CASSANDRA-19022",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/1",
        "description": "The issue is open and ready for the assignee to start work on it.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
        "name": "Open",
        "id": "1",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634786",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634786",
    "key": "CASSANDRA-21036",
    "fields": {
      "summary": "Better support for CMS initialization when DOWN nodes have not been upgraded",
      "created": "2025-11-20T16:14:57.000+0000",
      "description": "The {{nodetool cms initialize}} command allows the operator to supply a list of nodes to ignore when checking for consensus on the initial state of cluster metadata. If the ignored nodes have been upgraded and have begun startup prior to this point, then the rest of the cluster will view them as upgraded and everything proceeds as expected. However, if an ignored node has been DOWN for the entirety of the upgrade, peers still consider the cluster to be in a mixed state. This has an effect on the metadata serialization version that is selected as well as on which metadata transformations are permitted. It must be possible for the participating nodes to commit both the {{PreInitialize}} and {{Initialize}} transformations in order for the CMS initialization to complete.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13634786/comment/18039655",
            "id": "18039655",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "body": "CI results to follow",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "created": "2025-11-20T16:19:29.788+0000",
            "updated": "2025-11-20T16:19:29.788+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13634786/comment/18039805",
            "id": "18039805",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=marcuse",
              "name": "marcuse",
              "key": "krummas",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Marcus Eriksson",
              "active": true,
              "timeZone": "Europe/Berlin"
            },
            "body": "+1",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=marcuse",
              "name": "marcuse",
              "key": "krummas",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Marcus Eriksson",
              "active": true,
              "timeZone": "Europe/Berlin"
            },
            "created": "2025-11-21T09:57:42.730+0000",
            "updated": "2025-11-21T09:57:42.730+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13634786/comment/18039915",
            "id": "18039915",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "body": "None of the test failures appear to be related to this patch and mostly seem to be failing across all relevant branches.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "created": "2025-11-21T16:41:27.655+0000",
            "updated": "2025-11-21T16:41:27.655+0000"
          }
        ],
        "maxResults": 3,
        "total": 3,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
        "name": "samt",
        "key": "beobal",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
        },
        "displayName": "Sam Tunnicliffe",
        "active": true,
        "timeZone": "Europe/London"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/5",
        "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
        "name": "Resolved",
        "id": "5",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634690",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634690",
    "key": "CASSANDRA-21035",
    "fields": {
      "summary": "Nodes with LEFT state do not get expired from gossip",
      "created": "2025-11-19T18:06:39.000+0000",
      "description": "When a node is removed from the cluster via decommission/removenode/assassinate it is transitioned to a LEFT status in gossip. For historical reasons, this state is intended to persist in gossip for some period (default is 72hrs) before being expunged. Since CEP-21, gossip status is no longer used for anything significant by C* itself, but this behaviour was preserved in case any tooling was relying on it. However, there is a bug in that the purging from gossip after 72 hrs is not occurring correctly.  From the perspective of C* itself this is harmless, but it will eventually lead to gossip state being oversized.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13634690/comment/18039454",
            "id": "18039454",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "body": "CI results to follow",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "created": "2025-11-19T18:54:18.404+0000",
            "updated": "2025-11-19T18:54:18.404+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
        "name": "samt",
        "key": "beobal",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
        },
        "displayName": "Sam Tunnicliffe",
        "active": true,
        "timeZone": "Europe/London"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10002",
        "description": "A patch for this issue has been uploaded to JIRA by a contributor.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/document.png",
        "name": "Patch Available",
        "id": "10002",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634671",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634671",
    "key": "CASSANDRA-21034",
    "fields": {
      "summary": "ZstdDictionaryCompressor is not used upon flush",
      "created": "2025-11-19T15:16:40.000+0000",
      "description": "When I insert data to a table and do {{nodetool flush}}, an SSTable is created, but it will be compacted with LZ4 (seen via sstablemetadata). Correct compressor should be used upon flush as well so flushed data are compressed by a Zstd dictionary too.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13634671/comment/18039412",
            "id": "18039412",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "body": "This is actually not a bug. I forgot there is \"flush_compression\" in cassandra.yaml which drives this. When I used \"table\" value for that config then it was indeed compressed with Zstd dictionary when flushed.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "created": "2025-11-19T16:04:58.915+0000",
            "updated": "2025-11-19T16:04:58.915+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13634671/comment/18039418",
            "id": "18039418",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=dnk",
              "name": "dnk",
              "key": "dnk",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dnk&avatarId=53432",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dnk&avatarId=53432",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dnk&avatarId=53432",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dnk&avatarId=53432"
              },
              "displayName": "Dmitry Konstantinov",
              "active": true,
              "timeZone": "Europe/London"
            },
            "body": "yes, it is actually by design, the idea was to flush fast with a cheap compression and switch to a better compression in background during a compaction (CASSANDRA-15379)",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=dnk",
              "name": "dnk",
              "key": "dnk",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dnk&avatarId=53432",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dnk&avatarId=53432",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dnk&avatarId=53432",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dnk&avatarId=53432"
              },
              "displayName": "Dmitry Konstantinov",
              "active": true,
              "timeZone": "Europe/London"
            },
            "created": "2025-11-19T16:18:50.493+0000",
            "updated": "2025-11-19T16:18:50.493+0000"
          }
        ],
        "maxResults": 2,
        "total": 2,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/5",
        "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
        "name": "Resolved",
        "id": "5",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634580",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634580",
    "key": "CASSANDRA-21033",
    "fields": {
      "summary": "DiskUsageBroadcaster does not update usageInfo on node replacement",
      "created": "2025-11-18T15:52:58.000+0000",
      "description": "While working on CASSANDRA-21024, I found that on trunk we are not calling the {{onRemove}} method for {{IEndpointStateChangeSubscriber}} implementations when a node is replaced. This leads to the {{DiskUsageBroadcaster}} to not remove the node which was replaced, which makes calls to {{DiskUsageBroadcaster#hasStuffedOrFullNode}} to incorrectly return true if a {{STUFFED}} / {{FULL}} node is replaced with a {{SPACIOUS}} node.  ",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13634580/comment/18039232",
            "id": "18039232",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=isaacreath",
              "name": "isaacreath",
              "key": "isaacreath",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Isaac Reath",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "The initial PR adds the call to {{GossipHelper.removeFromGossip}} on {{LegacyStateListener#notifyPostCommit}} before we evict the node from gossip. While this gets the tests working, I'm not 100% sure this is the right place to do this. ",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=isaacreath",
              "name": "isaacreath",
              "key": "isaacreath",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Isaac Reath",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2025-11-18T20:40:51.030+0000",
            "updated": "2025-11-18T20:40:51.030+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13634580/comment/18039885",
            "id": "18039885",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "body": "Thanks, this looks good to me. I've submitted a CI job & I'll update with the results when it's done.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "created": "2025-11-21T14:52:05.481+0000",
            "updated": "2025-11-21T14:52:05.481+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13634580/comment/18039944",
            "id": "18039944",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=paulo",
              "name": "paulo",
              "key": "paulo",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=paulo&avatarId=44678",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=paulo&avatarId=44678",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=paulo&avatarId=44678",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=paulo&avatarId=44678"
              },
              "displayName": "Paulo Motta",
              "active": true,
              "timeZone": "America/Sao_Paulo"
            },
            "body": "+1\r\n\r\nCI: https://pre-ci.cassandra.apache.org/job/cassandra/192/",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=paulo",
              "name": "paulo",
              "key": "paulo",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=paulo&avatarId=44678",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=paulo&avatarId=44678",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=paulo&avatarId=44678",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=paulo&avatarId=44678"
              },
              "displayName": "Paulo Motta",
              "active": true,
              "timeZone": "America/Sao_Paulo"
            },
            "created": "2025-11-21T18:40:21.821+0000",
            "updated": "2025-11-21T18:40:21.821+0000"
          }
        ],
        "maxResults": 3,
        "total": 3,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=isaacreath",
        "name": "isaacreath",
        "key": "isaacreath",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
        },
        "displayName": "Isaac Reath",
        "active": true,
        "timeZone": "Etc/UTC"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10725",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Requires Testing",
        "id": "10725",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634484",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634484",
    "key": "CASSANDRA-21032",
    "fields": {
      "summary": "Test failure: TestClientRequestMetrics.test_client_request_metrics",
      "created": "2025-11-17T19:37:49.000+0000",
      "description": "TestClientRequestMetrics.test_client_request_metrics fail consistency on trunk.\r\n\r\nFor example: [https://ci-cassandra.apache.org/job/Cassandra-trunk/2325/#showFailuresLink]\r\n{code:java}\r\nAssertionError: org.apache.cassandra.metrics:type=ClientRequest,scope=Write-ANY,name=LatencyMean\r\nassert 0.0 is None {code}\r\n\r\n{code}\r\nself = <client_request_metrics_test.TestClientRequestMetrics object at 0x7f5586135640>\r\n\r\n    def test_client_request_metrics(self):\r\n        # this is written as a single test method in order to reuse the same cluster for all tests\r\n        # setup_once configures and starts the cluster with all schema and preconditions required by all tests.\r\n        self.setup_once()\r\n    \r\n>       self.write_nominal()\r\n\r\nclient_request_metrics_test.py:85: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\nclient_request_metrics_test.py:116: in write_nominal\r\n    global_diff, cl_diff = self.validate_nominal('Write',\r\nclient_request_metrics_test.py:148: in validate_nominal\r\n    b.validate(cassandra_version)\r\nclient_request_metrics_test.py:670: in validate\r\n    v.validate(cassandra_version)\r\nclient_request_metrics_test.py:652: in validate\r\n    validate_stat_values(self.mbean, self.values, cassandra_version)\r\nclient_request_metrics_test.py:596: in validate_stat_values\r\n    validate_zero_histogram_values(prefix, values)\r\nclient_request_metrics_test.py:629: in validate_zero_histogram_values\r\n    validators[k](f\"{prefix}{k}\", v)\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nk = 'org.apache.cassandra.metrics:type=ClientRequest,scope=Write-ANY,name=LatencyMean'\r\nv = 0.0\r\n\r\n    def is_none(k, v):\r\n>       assert v is None, k\r\nE       AssertionError: org.apache.cassandra.metrics:type=ClientRequest,scope=Write-ANY,name=LatencyMean\r\nE       assert 0.0 is None\r\n\r\nclient_request_metrics_test.py:767: AssertionError\r\n{code}\r\n\r\n{code}\r\ndef validate_zero_histogram_values(prefix, values):\r\n    validators = defaultdict(lambda: is_zero)\r\n    validators['RecentValues'] = is_zero_list\r\n    validators['Mean'] = is_none # <============== we fail here \r\n    validators['DurationUnit'] = is_microseconds\r\n    for k, v in values.items():\r\n        validators[k](f\"{prefix}{k}\", v)\r\n{code}",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13634484/comment/18038965",
            "id": "18038965",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=dnk",
              "name": "dnk",
              "key": "dnk",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dnk&avatarId=53432",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dnk&avatarId=53432",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dnk&avatarId=53432",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dnk&avatarId=53432"
              },
              "displayName": "Dmitry Konstantinov",
              "active": true,
              "timeZone": "Europe/London"
            },
            "body": "It looks like we have changed org.apache.cassandra.metrics.DecayingEstimatedHistogramReservoir.AbstractSnapshot#getMean behaviour in CASSANDRA-20822 (https://github.com/apache/cassandra/commit/ae673a31cc32a1ea3d397723c0dd893218cec5ea), so correspondently it affects our JMX contract for histogram/timer beans where we return 0 instead of None as Mean value now if count = 0.\r\n\r\nI see two options to fix the failed test:\r\n# return getMean behaviour back to return None if count = 0\r\n# change dtest validator to accept both: None and 0\r\n",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=dnk",
              "name": "dnk",
              "key": "dnk",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dnk&avatarId=53432",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dnk&avatarId=53432",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dnk&avatarId=53432",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dnk&avatarId=53432"
              },
              "displayName": "Dmitry Konstantinov",
              "active": true,
              "timeZone": "Europe/London"
            },
            "created": "2025-11-17T19:44:41.077+0000",
            "updated": "2025-11-17T19:58:45.293+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13634484/comment/18038966",
            "id": "18038966",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=dnk",
              "name": "dnk",
              "key": "dnk",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dnk&avatarId=53432",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dnk&avatarId=53432",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dnk&avatarId=53432",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dnk&avatarId=53432"
              },
              "displayName": "Dmitry Konstantinov",
              "active": true,
              "timeZone": "Europe/London"
            },
            "body": "[~ifesdjeen] Could you please help me understand the reason for this change? Do we really need it?",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=dnk",
              "name": "dnk",
              "key": "dnk",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dnk&avatarId=53432",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dnk&avatarId=53432",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dnk&avatarId=53432",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dnk&avatarId=53432"
              },
              "displayName": "Dmitry Konstantinov",
              "active": true,
              "timeZone": "Europe/London"
            },
            "created": "2025-11-17T19:49:17.332+0000",
            "updated": "2025-11-17T19:49:17.332+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13634484/comment/18039640",
            "id": "18039640",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=dnk",
              "name": "dnk",
              "key": "dnk",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dnk&avatarId=53432",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dnk&avatarId=53432",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dnk&avatarId=53432",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dnk&avatarId=53432"
              },
              "displayName": "Dmitry Konstantinov",
              "active": true,
              "timeZone": "Europe/London"
            },
            "body": "I've discussed with [~benedict] and decided to go with the test update option to support 0 as a valid value - consistency of API (we return 0 in case of max, min and stddev) looks more important here than attempts to preserve the old behaviour",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=dnk",
              "name": "dnk",
              "key": "dnk",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dnk&avatarId=53432",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dnk&avatarId=53432",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dnk&avatarId=53432",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dnk&avatarId=53432"
              },
              "displayName": "Dmitry Konstantinov",
              "active": true,
              "timeZone": "Europe/London"
            },
            "created": "2025-11-20T15:15:03.041+0000",
            "updated": "2025-11-20T15:15:03.041+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13634484/comment/18039705",
            "id": "18039705",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=dnk",
              "name": "dnk",
              "key": "dnk",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dnk&avatarId=53432",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dnk&avatarId=53432",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dnk&avatarId=53432",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dnk&avatarId=53432"
              },
              "displayName": "Dmitry Konstantinov",
              "active": true,
              "timeZone": "Europe/London"
            },
            "body": "CI run: [https://pre-ci.cassandra.apache.org/job/cassandra/179/]\r\n\r\n[^CASSANDRA-21032_ci_summary.htm] [^CASSANDRA-21032_results_details.tar.xz]\r\n\r\nThe failed tests are not related to the changes.\r\n\r\nTestClientRequestMetrics.test_client_request_metrics passed.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=dnk",
              "name": "dnk",
              "key": "dnk",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dnk&avatarId=53432",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dnk&avatarId=53432",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dnk&avatarId=53432",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dnk&avatarId=53432"
              },
              "displayName": "Dmitry Konstantinov",
              "active": true,
              "timeZone": "Europe/London"
            },
            "created": "2025-11-20T21:09:48.156+0000",
            "updated": "2025-11-20T21:09:48.156+0000"
          }
        ],
        "maxResults": 4,
        "total": 4,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=dnk",
        "name": "dnk",
        "key": "dnk",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dnk&avatarId=53432",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dnk&avatarId=53432",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dnk&avatarId=53432",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dnk&avatarId=53432"
        },
        "displayName": "Dmitry Konstantinov",
        "active": true,
        "timeZone": "Europe/London"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/5",
        "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
        "name": "Resolved",
        "id": "5",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634467",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634467",
    "key": "CASSANDRA-21031",
    "fields": {
      "summary": "CEP-46: Witness AST tests",
      "created": "2025-11-17T16:48:59.000+0000",
      "description": "A lot of this we get for free piggybacking off of extensions/forks of AST tests for mutation tracking. Need make sure there is coverage and parity with mutation tracking for the AST tests.",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634466",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634466",
    "key": "CASSANDRA-21030",
    "fields": {
      "summary": "CEP-46: CDC with witnesses",
      "created": "2025-11-17T16:48:04.000+0000",
      "description": "Depends on how CDC works with mutation tracking (might just work), but need to validate it works.",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634465",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634465",
    "key": "CASSANDRA-21029",
    "fields": {
      "summary": "CEP-46: Validate Witness expand/shrink/move",
      "created": "2025-11-17T16:47:33.000+0000",
      "description": "In theory this still works. In practice the existing tests need to be revisited and we need to be sure.",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634464",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634464",
    "key": "CASSANDRA-21028",
    "fields": {
      "summary": "CEP-46: Witness support for RF=6/3 or similar",
      "created": "2025-11-17T16:46:40.000+0000",
      "description": "With few enough full replicas it starts to get more complicated to support things effectively. Investigate how to accomplish this.",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634462",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634462",
    "key": "CASSANDRA-21027",
    "fields": {
      "summary": "CEP-46: Validate logged/unlogged batches with witnesses",
      "created": "2025-11-17T16:44:53.000+0000",
      "description": "I think there is a unit test for this already, but we need to be sure once mutation tracking supports these.",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634460",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634460",
    "key": "CASSANDRA-21026",
    "fields": {
      "summary": "Reusing the address of a removed node is not possible with Accord enabled",
      "created": "2025-11-17T16:29:20.000+0000",
      "description": "If the address of a decommissioned node is re-used by another new node at some later time, any node in the cluster with Accord enabled will be unable to start up, including the new node.\r\n\r\nAs the new node comes up and registers with the {{ClusterMetadataService}} it is added to the {{Directory}}.\r\nThe decommissioned node's details are also preserved in the directory present to ensure that transactions which were in-flight can be completed after the node has left.\r\n(https://issues.apache.org/jira/browse/CASSANDRA-20142)\r\n\r\nDuring AccordService initialization building the endpoint mapping will fail because of this check in {{EndpointMapping.Builder}}:\r\n{code}\r\nInvariants.requireArgument(!mapping.containsValue(endpoint), \"Mapping already exists for %s\", endpoint);\r\n{code}\r\n\r\nAdditionally, it seems possible that the wrong method is being called in {{AccordTopology::directoryToEndpointMapping}}\r\n{code}\r\n       // There are cases where nodes are removed from the cluster (host replacement, decom, etc.), but inflight events\r\n       // may still be happening; keep the ids around so pending events do not fail with a mapping error\r\n       for (Directory.RemovedNode removedNode : directory.removedNodes())\r\n           builder.add(removedNode.endpoint, tcmIdToAccord(removedNode.id));\r\n{code}\r\nwhich should probably call {{builder::removed}} rather than {{builder::add}} but that also contains the the same invariant check.",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634457",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634457",
    "key": "CASSANDRA-21025",
    "fields": {
      "summary": "Failure detector max interval value is calculated incorrectly",
      "created": "2025-11-17T16:15:40.000+0000",
      "description": "If this setting is not overridden via the {{cassandra.fd_max_interval_ms}} system property ({{{}CassandraRelevantProperties.FD_MAX_INTERVAL_MS{}}}), then it is seeded with the value of {{{}FailureDetector.INITIAL_VALUE_NANOS{}}}.\r\nHowever, a bug in the logic of {{FailureDetector$ArrivalWindow::getMaxInterval}} means in this case there is an incorrect conversion between time units.\r\n{code:java}\r\npublic static long getMaxInterval()\r\n{\r\n   long newValue = FD_MAX_INTERVAL_MS.getLong(FailureDetector.INITIAL_VALUE_NANOS);\r\n   if (newValue != FailureDetector.INITIAL_VALUE_NANOS)\r\n       logger.info(\"Overriding {} from {}ms to {}ms\", FD_MAX_INTERVAL_MS.getKey(), FailureDetector.INITIAL_VALUE_NANOS, newValue);\r\n   return TimeUnit.NANOSECONDS.convert(newValue, TimeUnit.MILLISECONDS);\r\n}\r\n{code}\r\nIf {{FD_MAX_INTERVAL_MS}} is not set, the supplied default {{INITIAL_VALUE_NANOS}} is used, but this is then converted as if it were a value in millis, inflating it 1000000x.\r\nThe effective max interval in this case should be 2 seconds, but instead becomes 23 days, 3 hours, 33 minutes & 20 seconds.\r\nThe net effect is that intervals way longer than expected can be recorded if nodes are intermittently partitioned but not restarted (meaning they retain the same gossip generation).\r\nIn turn this can cause the phi calculation to react to those nodes much more slowly as the mean arrival time interval is much bigger than expected, leaving them marked as {{UP}} when they should be {{{}DOWN{}}}.\r\n\r\nIf {{FD_MAX_INTERVAL_MS}} is overridden then the conversion, and so the returned value, is correct (assuming an appropriately scaled values is supplied, there is no guardrail to ensure that). Versions earlier than 5.0 are not affected.",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/1",
        "description": "The issue is open and ready for the assignee to start work on it.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
        "name": "Open",
        "id": "1",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634448",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634448",
    "key": "CASSANDRA-21024",
    "fields": {
      "summary": "Add configuration to disk usage guardrails to stop writes across all replicas of a keyspace when any node replicating that keyspace exceeds the disk usage failure threshold.",
      "created": "2025-11-17T14:32:53.000+0000",
      "description": "[CASSANDRA-17150|https://issues.apache.org/jira/browse/CASSANDRA-17150] introduced disk usage guardrails that stop writes for specific tokens when any replica responsible for those tokens exceeds the configured failure threshold. This mechanism protects individual nodes from running out of disk space but can result in inconsistent write availability when only a subset of replicas or token ranges are affected. This in turn pushes the responsibility onto the application owner to decide how to handle the partial write unavailability. \r\n\r\nWe propose adding a new configuration option, data_disk_usage_stop_writes_for_keyspace_on_fail, that extends this behavior to the keyspace level. When enabled, if any node that participates in replication for a keyspace exceeds the disk usage failure threshold, writes to that keyspace will be stopped across all nodes who replicate that keyspace.\r\n\r\nThis change provides operators with finer control over guardrail enforcement, allowing them to choose between the current per-token behavior or a stricter, keyspace-wide policy that prioritizes simplicity and operational predictability over partial write availability.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13634448/comment/18039032",
            "id": "18039032",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=isaacreath",
              "name": "isaacreath",
              "key": "isaacreath",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Isaac Reath",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "WIP branch available for trunk: https://github.com/isaacreath/cassandra/commit/b2b738335f67692bed725cb74f50a2eafdec2b25. General idea is to track if a given datacenter contains a full node in the `DiskUsageBroadcaster`. On write, we'll check all nodes that replicate data for a given partition key and if that node is in a datacenter that contains a full node, we'll reject the write.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=isaacreath",
              "name": "isaacreath",
              "key": "isaacreath",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Isaac Reath",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2025-11-18T00:48:36.604+0000",
            "updated": "2025-11-18T00:48:36.604+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=isaacreath",
        "name": "isaacreath",
        "key": "isaacreath",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
        },
        "displayName": "Isaac Reath",
        "active": true,
        "timeZone": "Etc/UTC"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/3",
        "description": "This issue is being actively worked on at the moment by the assignee.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/inprogress.png",
        "name": "In Progress",
        "id": "3",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634441",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634441",
    "key": "CASSANDRA-21023",
    "fields": {
      "summary": "sstableloader time-out on Cassandra 4.1.x with SSL Configuration",
      "created": "2025-11-17T13:30:47.000+0000",
      "description": "Hello Community !!!\r\n\r\n\r\nI am trying to use _sstableloader_ to restore a snapshot.\r\nCassandra is configured with {color:#00875a}_internode_encryption_{color} and {color:#00875a}_client_encryption_{color} enabled.\r\nI have a test cluster with 3 nodes and a recovery cluster with 42 nodes ({_}3 racks{_} in each environment).\r\nBoth clusters have Cassandra _4.1.4_ installed.\r\n\r\nWhen I try sstableloader, it terminates the connection with the error: `{_}{color:#4c9aff}Operation timed out{color}{_}`.\r\nI test with Cassandra _4.1.10_ and it is the same output.\r\n\r\nBelow is the command and the trace output of the sstableloader run:\r\n\r\n```bash\r\n/var/opt/cassandra/apache-cassandra-4.1.4/bin/sstableloader -d cassandra-test-rack1-01,cassandra-test-rack2-01,cassandra-test-rack3-01 -f /var/opt/cassandra/apache-cassandra-4.1.4/conf/cassandra.yaml -u user1 -pw password /data/cassandra-snap/test/testtable\r\n```\r\n\r\n```log\r\nEBUG 13:55:45,457 Loaded default ResourceLeakDetector: com.datastax.shaded.netty.util.ResourceLeakDetector@3c7175ae\r\nDEBUG 13:55:45,555 [id: 0x446e44c3, L:/10.10.10.214:52930 - R:cassandra-test-rack1-01/10.10.10.214:9042] HANDSHAKEN: TLS_AES_256_GCM_SHA384\r\nDEBUG 13:55:57,532 Defuncting Connection[cassandra-test-rack1-01/10.10.10.214:9042-1, inFlight=0, closed=false] because: [cassandra-test-rack1-01/10.10.10.214:9042] Operation timed out\r\nDEBUG 13:55:57,533 [cassandra-test-rack1-01/10.10.10.214:9042] preventing new connections for the next 1000 ms\r\nDEBUG 13:55:57,533 [cassandra-test-rack1-01/10.10.10.214:9042] Connection[cassandra-test-rack1-01/10.10.10.214:9042-1, inFlight=0, closed=false] failed, remaining = 0\r\nDEBUG 13:55:57,533 Connection[cassandra-test-rack1-01/10.10.10.214:9042-1, inFlight=0, closed=true] closing connection\r\nDEBUG 13:55:57,533 Not terminating Connection[cassandra-test-rack1-01/10.10.10.214:9042-1, inFlight=0, closed=true]: there are still pending requests\r\nDEBUG 13:55:57,534 [Control connection] error on cassandra-test-rack1-01/10.10.10.214:9042 connection, trying next host\r\ncom.datastax.driver.core.exceptions.OperationTimedOutException: [cassandra-test-rack1-01/10.10.10.214:9042] Operation timed out\r\n    at com.datastax.driver.core.Connection$Future.onTimeout(Connection.java:1557)\r\n    at com.datastax.driver.core.Connection$ResponseHandler$1.run(Connection.java:1636)\r\n    at com.datastax.shaded.netty.util.HashedWheelTimer$HashedWheelTimeout.expire(HashedWheelTimer.java:663)\r\n    at com.datastax.shaded.netty.util.HashedWheelTimer$HashedWheelBucket.expireTimeouts(HashedWheelTimer.java:738)\r\n    at com.datastax.shaded.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:466)\r\n    at com.datastax.shaded.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n    at java.base/java.lang.Thread.run(Thread.java:829)\r\nDEBUG 13:55:57,534 [cassandra-test-rack2-01/10.10.10.213:9042] preparing to open 1 new connections, total = 1\r\nDEBUG 13:55:57,535 Connection[cassandra-test-rack1-01/10.10.10.214:9042-1, inFlight=0, closed=true], stream 0, Error writing request STARTUP \\{CQL_VERSION=3.0.0, DRIVER_VERSION=3.11.0, DRIVER_NAME=DataStax Java Driver}\r\nDEBUG 13:55:57,536 Connection[cassandra-test-rack2-01/10.10.10.213:9042-1, inFlight=0, closed=false] Connection established, initializing transport\r\nDEBUG 13:55:57,574 [id: 0x870adc85, L:/10.10.10.214:59728 - R:cassandra-test-rack2-01/10.10.10.213:9042] HANDSHAKEN: TLS_AES_256_GCM_SHA384\r\nDEBUG 13:56:09,631 Defuncting Connection[cassandra-test-rack2-01/10.10.10.213:9042-1, inFlight=0, closed=false] because: [cassandra-test-rack2-01/10.10.10.213:9042] Operation timed out\r\nDEBUG 13:56:09,632 [cassandra-test-rack2-01/10.10.10.213:9042] preventing new connections for the next 1000 ms\r\nDEBUG 13:56:09,632 [cassandra-test-rack2-01/10.10.10.213:9042] Connection[cassandra-test-rack2-01/10.10.10.213:9042-1, inFlight=0, closed=false] failed, remaining = 0\r\nDEBUG 13:56:09,632 Connection[cassandra-test-rack2-01/10.10.10.213:9042-1, inFlight=0, closed=true] closing connection\r\nDEBUG 13:56:09,632 Not terminating Connection[cassandra-test-rack2-01/10.10.10.213:9042-1, inFlight=0, closed=true]: there are still pending requests\r\nDEBUG 13:56:09,633 [Control connection] error on cassandra-test-rack2-01/10.10.10.213:9042 connection, trying next host\r\ncom.datastax.driver.core.exceptions.OperationTimedOutException: [cassandra-test-rack2-01/10.10.10.213:9042] Operation timed out\r\n    at com.datastax.driver.core.Connection$Future.onTimeout(Connection.java:1557)\r\n    at com.datastax.driver.core.Connection$ResponseHandler$1.run(Connection.java:1636)\r\n    at com.datastax.shaded.netty.util.HashedWheelTimer$HashedWheelTimeout.expire(HashedWheelTimer.java:663)\r\n    at com.datastax.shaded.netty.util.HashedWheelTimer$HashedWheelBucket.expireTimeouts(HashedWheelTimer.java:738)\r\n    at com.datastax.shaded.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:466)\r\n    at com.datastax.shaded.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n    at java.base/java.lang.Thread.run(Thread.java:829)\r\nDEBUG 13:56:09,633 [cassandra-test-rack3-01/10.10.10.215:9042] preparing to open 1 new connections, total = 1\r\nDEBUG 13:56:09,633 Connection[cassandra-test-rack2-01/10.10.10.213:9042-1, inFlight=0, closed=true], stream 0, Error writing request STARTUP \\{CQL_VERSION=3.0.0, DRIVER_VERSION=3.11.0, DRIVER_NAME=DataStax Java Driver}\r\nDEBUG 13:56:09,634 Connection[cassandra-test-rack3-01/10.10.10.215:9042-1, inFlight=0, closed=false] Connection established, initializing transport\r\nDEBUG 13:56:09,661 [id: 0x08eded5b, L:/10.10.10.214:45150 - R:cassandra-test-rack3-01/10.10.10.215:9042] HANDSHAKEN: TLS_AES_256_GCM_SHA384\r\nDEBUG 13:56:21,731 Defuncting Connection[cassandra-test-rack3-01/10.10.10.215:9042-1, inFlight=0, closed=false] because: [cassandra-test-rack3-01/10.10.10.215:9042] Operation timed out\r\nDEBUG 13:56:21,732 [cassandra-test-rack3-01/10.10.10.215:9042] preventing new connections for the next 1000 ms\r\nDEBUG 13:56:21,732 [cassandra-test-rack3-01/10.10.10.215:9042] Connection[cassandra-test-rack3-01/10.10.10.215:9042-1, inFlight=0, closed=false] failed, remaining = 0\r\nDEBUG 13:56:21,732 Connection[cassandra-test-rack3-01/10.10.10.215:9042-1, inFlight=0, closed=true] closing connection\r\nDEBUG 13:56:21,732 Not terminating Connection[cassandra-test-rack3-01/10.10.10.215:9042-1, inFlight=0, closed=true]: there are still pending requests\r\nDEBUG 13:56:21,732 [Control connection] error on cassandra-test-rack3-01/10.10.10.215:9042 connection, no more host to try\r\ncom.datastax.driver.core.exceptions.OperationTimedOutException: [cassandra-test-rack3-01/10.10.10.215:9042] Operation timed out\r\n    at com.datastax.driver.core.Connection$Future.onTimeout(Connection.java:1557)\r\n    at com.datastax.driver.core.Connection$ResponseHandler$1.run(Connection.java:1636)\r\n    at com.datastax.shaded.netty.util.HashedWheelTimer$HashedWheelTimeout.expire(HashedWheelTimer.java:663)\r\n    at com.datastax.shaded.netty.util.HashedWheelTimer$HashedWheelBucket.expireTimeouts(HashedWheelTimer.java:738)\r\n    at com.datastax.shaded.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:466)\r\n    at com.datastax.shaded.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n    at java.base/java.lang.Thread.run(Thread.java:829)\r\nDEBUG 13:56:21,732 Connection[cassandra-test-rack3-01/10.10.10.215:9042-1, inFlight=0, closed=true], stream 0, Error writing request STARTUP \\{CQL_VERSION=3.0.0, DRIVER_VERSION=3.11.0, DRIVER_NAME=DataStax Java Driver}\r\nDEBUG 13:56:21,733 Shutting down\r\nDEBUG 13:56:21,740 Freed 12 thread-local buffer(s) from thread: cluster1-nio-worker-0\r\nDEBUG 13:56:21,740 Freed 12 thread-local buffer(s) from thread: cluster1-nio-worker-1\r\nDEBUG 13:56:23,943 Freed 12 thread-local buffer(s) from thread: cluster1-nio-worker-2\r\nDEBUG 13:56:23,950 Connection[cassandra-test-rack1-01/10.10.10.214:9042-1, inFlight=0, closed=true] has already terminated\r\nUnable to initialise org.apache.cassandra.utils.NativeSSTableLoaderClient\r\ncom.datastax.driver.core.exceptions.NoHostAvailableException: All host(s) tried for query failed (tried: cassandra-test-rack2-01/10.10.10.213:9042 (com.datastax.driver.core.exceptions.OperationTimedOutException: [cassandra-test-rack2-01/10.10.10.213:9042] Operation timed out), cassandra-test-rack3-01/10.10.10.215:9042 (com.datastax.driver.core.exceptions.OperationTimedOutException: [cassandra-test-rack3-01/10.10.10.215:9042] Operation timed out), cassandra-test-rack1-01/10.10.10.214:9042 (com.datastax.driver.core.exceptions.OperationTimedOutException: [cassandra-test-rack1-01/10.10.10.214:9042] Operation timed out))\r\njava.lang.RuntimeException: Unable to initialise org.apache.cassandra.utils.NativeSSTableLoaderClient\r\n    at org.apache.cassandra.utils.NativeSSTableLoaderClient.init(NativeSSTableLoaderClient.java:102)\r\n    at org.apache.cassandra.io.sstable.SSTableLoader.stream(SSTableLoader.java:167)\r\n    at org.apache.cassandra.tools.BulkLoader.load(BulkLoader.java:91)\r\n    at org.apache.cassandra.tools.BulkLoader.main(BulkLoader.java:58)\r\nCaused by: com.datastax.driver.core.exceptions.NoHostAvailableException: All host(s) tried for query failed (tried: cassandra-test-rack2-01/10.10.10.213:9042 (com.datastax.driver.core.exceptions.OperationTimedOutException: [cassandra-test-rack2-01/10.10.10.213:9042] Operation timed out), cassandra-test-rack3-01/10.10.10.215:9042 (com.datastax.driver.core.exceptions.OperationTimedOutException: [cassandra-test-rack3-01/10.10.10.215:9042] Operation timed out), cassandra-test-rack1-01/10.10.10.214:9042 (com.datastax.driver.core.exceptions.OperationTimedOutException: [cassandra-test-rack1-01/10.10.10.214:9042] Operation timed out))\r\n    at com.datastax.driver.core.ControlConnection.reconnectInternal(ControlConnection.java:270)\r\n    at com.datastax.driver.core.ControlConnection.connect(ControlConnection.java:109)\r\n    at com.datastax.driver.core.Cluster$Manager.negotiateProtocolVersionAndConnect(Cluster.java:1813)\r\n    at com.datastax.driver.core.Cluster$Manager.init(Cluster.java:1726)\r\n    at com.datastax.driver.core.Cluster.init(Cluster.java:214)\r\n    at com.datastax.driver.core.Cluster.connectAsync(Cluster.java:387)\r\n    at com.datastax.driver.core.Cluster.connectAsync(Cluster.java:366)\r\n    at com.datastax.driver.core.Cluster.connect(Cluster.java:311)\r\n    at org.apache.cassandra.utils.NativeSSTableLoaderClient.init(NativeSSTableLoaderClient.java:70)\r\n    ... 3 more\r\nException in thread \"main\" org.apache.cassandra.tools.BulkLoadException: java.lang.RuntimeException: Unable to initialise org.apache.cassandra.utils.NativeSSTableLoaderClient\r\n    at org.apache.cassandra.tools.BulkLoader.load(BulkLoader.java:104)\r\n    at org.apache.cassandra.tools.BulkLoader.main(BulkLoader.java:58)\r\nCaused by: java.lang.RuntimeException: Unable to initialise org.apache.cassandra.utils.NativeSSTableLoaderClient\r\n    at org.apache.cassandra.utils.NativeSSTableLoaderClient.init(NativeSSTableLoaderClient.java:102)\r\n    at org.apache.cassandra.io.sstable.SSTableLoader.stream(SSTableLoader.java:167)\r\n    at org.apache.cassandra.tools.BulkLoader.load(BulkLoader.java:91)\r\n    ... 1 more\r\nCaused by: com.datastax.driver.core.exceptions.NoHostAvailableException: All host(s) tried for query failed (tried: cassandra-test-rack2-01/10.10.10.213:9042 (com.datastax.driver.core.exceptions.OperationTimedOutException: [cassandra-test-rack2-01/10.10.10.213:9042] Operation timed out), cassandra-test-rack3-01/10.10.10.215:9042 (com.datastax.driver.core.exceptions.OperationTimedOutException: [cassandra-test-rack3-01/10.10.10.215:9042] Operation timed out), cassandra-test-rack1-01/10.10.10.214:9042 (com.datastax.driver.core.exceptions.OperationTimedOutException: [cassandra-test-rack1-01/10.10.10.214:9042] Operation timed out))\r\n    at com.datastax.driver.core.ControlConnection.reconnectInternal(ControlConnection.java:270)\r\n    at com.datastax.driver.core.ControlConnection.connect(ControlConnection.java:109)\r\n    at com.datastax.driver.core.Cluster$Manager.negotiateProtocolVersionAndConnect(Cluster.java:1813)\r\n    at com.datastax.driver.core.Cluster$Manager.init(Cluster.java:1726)\r\n    at com.datastax.driver.core.Cluster.init(Cluster.java:214)\r\n    at com.datastax.driver.core.Cluster.connectAsync(Cluster.java:387)\r\n    at com.datastax.driver.core.Cluster.connectAsync(Cluster.java:366)\r\n    at com.datastax.driver.core.Cluster.connect(Cluster.java:311)\r\n    at org.apache.cassandra.utils.NativeSSTableLoaderClient.init(NativeSSTableLoaderClient.java:70)\r\n```\r\n\r\n\r\n\r\nHowever, using the *sstableloader from Cassandra _5.0.6_* to load sstables on the Cassandra Cluster 4.1.4 {*}works as expected{*}.\r\n\r\nBased on my initial investigation, the {*}cassandra-driver-core versions 3.11.0 and 3.11.1 seem to be incompatible with my Cassandra 4.1.x configuration{*}.\r\nStarting from cassandra-driver-core version 3.11.2, the issue is resolved.\r\n\r\nTo verify this, I created a Java project based on an example I found in the cassandra-java-driver version 3.11.1.\r\n(Reference: ReadTopologyAndSchemaMetadata.java)\r\nI simply added .ssl() to the cluster constructor in the example code.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13634441/comment/18038861",
            "id": "18038861",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "body": "I have updated driver to 3.11.5 in 4.1.11. I strongly believe that, based on your observation that 3.11.2 is resolving the issue, when we release 4.1.11 your problem will be solved automatically.\r\n\r\nhttps://github.com/apache/cassandra/blob/cassandra-4.1/CHANGES.txt#L9\r\n\r\nhttps://issues.apache.org/jira/browse/CASSANDRA-20904",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "created": "2025-11-17T13:36:54.742+0000",
            "updated": "2025-11-17T13:38:10.299+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13634441/comment/18038866",
            "id": "18038866",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=fasar",
              "name": "fasar",
              "key": "fasar",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "fasar",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "Thank you Stefan\r\nGood job !\r\n\r\nI'm waiting looking forward toversion 4.1.11.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=fasar",
              "name": "fasar",
              "key": "fasar",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "fasar",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2025-11-17T13:49:19.160+0000",
            "updated": "2025-11-17T13:49:19.160+0000"
          }
        ],
        "maxResults": 2,
        "total": 2,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634326",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634326",
    "key": "CASSANDRA-21022",
    "fields": {
      "summary": "Deadlock during bootstrap: MigrationStage and PendingRangeCalculator block on keyspace initialization via LoadingMap",
      "created": "2025-11-14T22:29:53.000+0000",
      "description": "*Overview*\r\n\r\nDuring node bootstrap, a deadlock occurs between the MigrationStage thread loading keyspaces and the PendingRangeCalculator thread. This causes the node to hang indefinitely during startup, preventing a successful bootstrap.\r\n\r\nThis happened in a massive cluster of 600 nodes while an additional 300 nodes were being added simultaneously.\r\n\r\n\r\n\r\n*Deadlock Pattern*\r\n\r\nThe deadlock involves three key components interacting through the LoadingMap keyspace cache:\r\n\r\n *Thread 1: MigrationStage:1* (holds the LoadingMap promise for a keyspace)\r\n\r\n Schema.merge()\r\n\r\n   Schema.createKeyspace()\r\n\r\n    Keyspace.open()\r\n\r\n     LoadingMap.blockingLoadIfAbsent() [line 105] - Creates promise, executes load function\r\n\r\n      Keyspace.<init>() [line 448]\r\n\r\n       ColumnFamilyStore.<init>() [line 521]\r\n\r\n        CompactionStrategyManager.<init>() [line 177]\r\n\r\n         getDiskBoundaries()\r\n\r\n          DiskBoundaryManager.getLocalRanges() [line 130]\r\n\r\n           PendingRangeCalculatorService.blockUntilFinished()  BLOCKS waiting for Thread 2\r\n\r\n\r\n\r\n *Thread 2: PendingRangeCalculator:1* (triggered by gossip state changes)\r\n\r\n StorageService.handleStateNormal() [line 3499]\r\n\r\n   PendingRangeCalculatorService.update()\r\n\r\n    PendingRangeCalculatorService task [line 81]\r\n\r\n     Keyspace.open(keyspaceName)\r\n\r\n      LoadingMap.blockingLoadIfAbsent() [line 122]  BLOCKS waiting for promise held by Thread 1\r\n\r\n\r\n\r\n{*}Result{*}: Classic circular wait deadlock\r\n\r\n\r\n\r\n Additional Blocked Threads\r\n\r\n\r\n\r\n Multiple other threads also block waiting for the same keyspace to load:\r\n\r\n - *main* thread (during StorageService.bootstrap()  invalidateLocalRanges())\r\n\r\n - *GossipStage:1* (during handleStateNormal()  updateTokenMetadata()  invalidateLocalRanges())\r\n\r\n - *ScheduledTasks:1* (memtable flush attempting getDiskBoundaries())\r\n\r\n - {*}IndexSummaryManager:1{*}{*}{*}\r\n\r\n - *jmxtrans-agent-1* (JMX metrics collection)\r\n\r\n\r\n\r\n*Root Cause*\r\n\r\nThe issue stems from a circular dependency during bootstrap:\r\n\r\n 1. Keyspace initialization requires disk boundaries (CompactionStrategyManager initialization)\r\n\r\n 2. Disk boundaries require pending ranges when StorageService.instance.isBootstrapMode() is true (DiskBoundaryManager.java:127-130)\r\n\r\n 3. Pending ranges require PendingRangeCalculator to finish (blockUntilFinished())\r\n\r\n 4. PendingRangeCalculator tries to open keyspaces (PendingRangeCalculatorService.java:81)\r\n\r\n 5. Opening keyspaces blocks on the LoadingMap promise held by step 1\r\n\r\n\r\n\r\n From DiskBoundaryManager.java:127-130:\r\n\r\n if (StorageService.instance.isBootstrapMode()\r\n\r\n   && !StorageService.isReplacingSameAddress())\r\n\r\n {\r\n\r\n   PendingRangeCalculatorService.instance.blockUntilFinished(); //  Blocking call during init\r\n\r\n   localRanges = tmd.getPendingRanges(cfs.keyspace.getName(), FBUtilities.getBroadcastAddressAndPort());\r\n\r\n }\r\n\r\n\r\n\r\n Thread Dump Evidence\r\n\r\n\r\n\r\n \"MigrationStage:1\" - Thread t@82\r\n\r\n  java.lang.Thread.State: WAITING\r\n\r\n   at org.apache.cassandra.service.PendingRangeCalculatorService.blockUntilFinished(PendingRangeCalculatorService.java:77)\r\n\r\n   at org.apache.cassandra.db.DiskBoundaryManager.getLocalRanges(DiskBoundaryManager.java:130)\r\n\r\n   at org.apache.cassandra.db.DiskBoundaryManager.getDiskBoundaries(DiskBoundaryManager.java:56)\r\n\r\n   at org.apache.cassandra.db.compaction.CompactionStrategyManager.<init>(CompactionStrategyManager.java:177)\r\n\r\n   at org.apache.cassandra.db.ColumnFamilyStore.<init>(ColumnFamilyStore.java:521)\r\n\r\n   at org.apache.cassandra.db.Keyspace.<init>(Keyspace.java:448)\r\n\r\n   at org.apache.cassandra.utils.concurrent.LoadingMap.blockingLoadIfAbsent(LoadingMap.java:105)\r\n\r\n   at org.apache.cassandra.schema.Schema.maybeAddKeyspaceInstance(Schema.java:241)\r\n\r\n\r\n\r\n \"PendingRangeCalculator:1\" - Thread t@84\r\n\r\n  java.lang.Thread.State: WAITING\r\n\r\n   at org.apache.cassandra.utils.concurrent.LoadingMap.blockingLoadIfAbsent(LoadingMap.java:122)\r\n\r\n   at org.apache.cassandra.schema.Schema.maybeAddKeyspaceInstance(Schema.java:241)\r\n\r\n   at org.apache.cassandra.db.Keyspace.open(Keyspace.java:175)\r\n\r\n   at org.apache.cassandra.service.PendingRangeCalculatorService.lambda$new$1(PendingRangeCalculatorService.java:81)\r\n\r\n\r\n\r\n \"main\" - Thread t@1\r\n\r\n  java.lang.Thread.State: WAITING\r\n\r\n   at org.apache.cassandra.utils.concurrent.LoadingMap.blockingLoadIfAbsent(LoadingMap.java:122)\r\n\r\n   at org.apache.cassandra.schema.Schema.maybeAddKeyspaceInstance(Schema.java:241)\r\n\r\n   at org.apache.cassandra.db.Keyspace.open(Keyspace.java:175)\r\n\r\n   at org.apache.cassandra.service.StorageService.invalidateLocalRanges(StorageService.java:2372)\r\n\r\n   at org.apache.cassandra.service.StorageService.bootstrap(StorageService.java:2321)\r\n\r\n\r\n\r\n{*}Steps to Reproduce{*}{*}{*}\r\n\r\n The issue appears to be a race condition that occurs during bootstrap when:\r\n\r\n 1. Node is joining the cluster (bootstrap mode)\r\n\r\n 2. Schema migrations are being processed (MigrationStage active)\r\n\r\n 3. Gossip state changes trigger handleStateNormal() events\r\n\r\n 4. Multiple keyspaces are being loaded concurrently\r\n\r\n\r\n\r\n Reproduction may be more likely in environments with:\r\n\r\n - Many keyspaces\r\n\r\n - Active schema changes during bootstrap\r\n\r\n - NetworkTopologyStrategy with many tokens (increases pending range calculation time)\r\n\r\n\r\n\r\n{*}Impact{*}{*}{*}\r\n\r\n - Node becomes completely stuck during bootstrap\r\n\r\n - Requires process restart, but restart hits the same deadlock\r\n\r\n - Prevents cluster expansion\r\n\r\n - Manual intervention required (potentially removing schema changes or manipulating gossip state)\r\n\r\n",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13634326/comment/18039030",
            "id": "18039030",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=chovatia.jaydeep%40gmail.com",
              "name": "chovatia.jaydeep@gmail.com",
              "key": "chovatia.jaydeep@gmail.com",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Jaydeepkumar Chovatia",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "Fixing the actual deadlock might take time, but one workaround to prevent the deadlock is increasing _ring_delay_ms_ from the default 30s to 120s. This workaround helps because the call to \"StorageService::invalidateLocalRanges\" is delayed up to the timeout, and that allows this node to drain all the \"StorageService::handleStateNormal\" from Gossip, so it avoids the possible deadlock.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=chovatia.jaydeep%40gmail.com",
              "name": "chovatia.jaydeep@gmail.com",
              "key": "chovatia.jaydeep@gmail.com",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Jaydeepkumar Chovatia",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2025-11-18T00:39:12.133+0000",
            "updated": "2025-11-18T02:44:52.687+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634294",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634294",
    "key": "CASSANDRA-21021",
    "fields": {
      "summary": "Limit level for ZstdDictionaryCompressor to be max 9",
      "created": "2025-11-14T14:46:52.000+0000",
      "description": "The high compression level after 9 does not yield much more compression ratio, but leads to significant memory footprint.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13634294/comment/18038366",
            "id": "18038366",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "body": "https://github.com/apache/cassandra/pull/4475",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "created": "2025-11-14T14:59:43.455+0000",
            "updated": "2025-11-14T14:59:43.455+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
        "name": "smiklosovic",
        "key": "smiklosovic",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
        },
        "displayName": "Stefan Miklosovic",
        "active": true,
        "timeZone": "Europe/Vienna"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/11021",
        "description": "This issue needs an additional review.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Needs Committer",
        "id": "11021",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634222",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634222",
    "key": "CASSANDRA-21020",
    "fields": {
      "summary": "Optimize thread local for metrics and tracing",
      "created": "2025-11-13T23:07:18.000+0000",
      "description": "Currently Netty thread local logic is used in tracing to keep state and in metrics (thread local counters logic introduced in CASSANDRA-20250), so we do the thread local lookups many times during a request processing. These cases can be optimized by placing these objects as field variables to Thread itself by introducing CassandraThread as a child of FastThreadLocalThread.\r\n\r\nSimilar idea can be found even in JDK (ThreadLocalRandom logic was introduced for ForkJoinPool speedup)",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=dnk",
        "name": "dnk",
        "key": "dnk",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dnk&avatarId=53432",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dnk&avatarId=53432",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dnk&avatarId=53432",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dnk&avatarId=53432"
        },
        "displayName": "Dmitry Konstantinov",
        "active": true,
        "timeZone": "Europe/London"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634220",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634220",
    "key": "CASSANDRA-21019",
    "fields": {
      "summary": "Memtable allocator: separate memory usage tracking and limit checking",
      "created": "2025-11-13T22:49:43.000+0000",
      "description": "The following optimization idea has been suggested by @blambov in CASSANDRA-20226:\r\n\r\n{quote}\r\n\r\nThere's another option to consider here. The allocation mechanism does not need to check the limit for individual cell writes. We could just as well track the usage of a mutation in a single{{allocate}}call after it completes, or track the allocations with a{{LongAdder}}without checking if the limit is hit, and check if we need to wait for room before starting to apply a mutation.\r\n\r\nWe use the{{allocate}}code to decide:\r\n - whether to initiate a flush, when the chosen memory limit is filled to some ratio\r\n - whether to pause accepting writes, when the chosen memory limit has been exhausted\r\n\r\nFor the former use there is absolutely no benefit to make these decisions at the individual allocation level, as we will wait for the mutation to complete anyway before flushing anything. For the latter, I'd argue that the allocation-level tracking is actually hurting us. The reason for this is that we can have the limit be hit at any time during the application of a mutation, holding multiple locks (which necessitates the complexity of the{{isBlocking}}mutation signal), a partial copy of the mutation already written to the memtable structures, and a likely expanded version of the mutation to be applied on heap, keeping hold of more total memory than we would if we allowed the operation to continue.\r\n\r\nIf, instead, we check the allocation limits_before starting_a mutation and, once started, allow it to fully progress to completion, we can avoid this situation at the cost of being somewhat late to notice that the limit has been reached. This means that the limit will be breached, but this also happens as it stands now because we will permit operations to run to completion if the memtable they have been marked for is scheduled for a flush  which is effectively the same thing as not having noticed the memory limit would be breached by this mutation at the time when we decided to start it.\r\n\r\n{quote}",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=dnk",
        "name": "dnk",
        "key": "dnk",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dnk&avatarId=53432",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dnk&avatarId=53432",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dnk&avatarId=53432",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dnk&avatarId=53432"
        },
        "displayName": "Dmitry Konstantinov",
        "active": true,
        "timeZone": "Europe/London"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634171",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634171",
    "key": "CASSANDRA-21018",
    "fields": {
      "summary": "AssertionError in ByteBufferCloner.clone due to Range Tombstone on clustering key DELETE (4.1.10)",
      "created": "2025-11-13T12:41:53.000+0000",
      "description": "h2. *Summary*\r\n\r\nIn Apache Cassandra *4.1.10* an assertion error occurs reproducibly when executing a {{DELETE}} statement that produces a {*}range tombstone on the clustering key{*}.\r\nThe crash happens inside the write path while applying the mutation on replicas, specifically in {{ByteBufferCloner.clone()}} invoked from {{{}RangeTombstoneList.clone(){}}}.\r\n\r\nThe problem persists:\r\n * after {{nodetool scrub}} on all affected tables,\r\n * after deleting all hints,\r\n * even after completely *dropping and recreating* the keyspaces and tables.\r\n\r\nIt only appears when executing a {{{}DELETE WHERE <partition key> AND <clustering key> >= ?{}}}.\r\nRemoving this DELETE from the workload makes the issue disappear completely, even under heavy concurrent writes.\r\n\r\nThis suggests a *bug in the handling of range tombstones* in the write path of Cassandra 4.1.x.\r\nh2. *Environment*\r\n * Cassandra version: *4.1.10*\r\n * 3-node cluster, RF = 3\r\n * No hints pending\r\n * Reproducible with clean keyspace & empty datasets\r\n * Client performs parallel INSERTs and one DELETE with a clustering key range\r\n\r\nh2. *Table Schema*\r\n{code:java}\r\nCREATE TABLE kkav3.ranked_kka_products (\r\n  left text,\r\n  rank int,\r\n  kka_factor double,\r\n  kka_factor_boosted double,\r\n  left_factor double,\r\n  left_factor_boosted double,\r\n  left_picks int,\r\n  right text,\r\n  right_factor double,\r\n  right_factor_boosted double,\r\n  right_picks int,\r\n  shared_picks int,\r\n  shared_picks_boosted int,\r\n  calculation_period int,\r\n  last_update bigint,\r\n  PRIMARY KEY ((left), rank)\r\n) WITH CLUSTERING ORDER BY (rank ASC); {code}\r\nh2. *Queries that trigger the bug*\r\n\r\nWorks fine alone:\r\n{code:java}\r\nINSERT INTO kkav3.ranked_kka_products (...) VALUES (...);{code}\r\nTriggers the bug (range tombstone on clustering key):\r\n{code:java}\r\nDELETE FROM kkav3.ranked_kka_products WHERE left = ? AND rank >= ?;{code}\r\nAs soon as multiple clients insert rows and execute the above DELETE concurrently, Cassandra nodes throw an AssertionError inside the mutation processing path.\r\nh2. *Stacktrace*\r\n{code:java}\r\nERROR [MutationStage-6] 2025-11-13 11:48:24,335 JVMStabilityInspector.java:68 - Exception in thread Thread[MutationStage-6,10,SharedPool]\r\njava.lang.RuntimeException: java.lang.AssertionError\r\n at org.apache.cassandra.net.InboundSink.accept(InboundSink.java:108)\r\n at org.apache.cassandra.net.InboundSink.accept(InboundSink.java:45)\r\n at org.apache.cassandra.net.InboundMessageHandler$ProcessMessage.run(InboundMessageHandler.java:430)\r\n at org.apache.cassandra.concurrent.ExecutionFailure$1.run(ExecutionFailure.java:133)\r\n at org.apache.cassandra.concurrent.SEPWorker.run(SEPWorker.java:142)\r\n at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n at java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.AssertionError: null\r\n at org.apache.cassandra.utils.memory.ByteBufferCloner.clone(ByteBufferCloner.java:73)\r\n at org.apache.cassandra.db.RangeTombstoneList.clone(RangeTombstoneList.java:131)\r\n at org.apache.cassandra.db.RangeTombstoneList.clone(RangeTombstoneList.java:120)\r\n at org.apache.cassandra.db.MutableDeletionInfo.clone(MutableDeletionInfo.java:91)\r\n at org.apache.cassandra.db.MutableDeletionInfo.clone(MutableDeletionInfo.java:33)\r\n at org.apache.cassandra.db.partitions.AtomicBTreePartition.addAllWithSizeDeltaInternal(AtomicBTreePartition.java:132)\r\n at org.apache.cassandra.db.partitions.AtomicBTreePartition.addAllWithSizeDelta(AtomicBTreePartition.java:192)\r\n at org.apache.cassandra.db.memtable.SkipListMemtable.put(SkipListMemtable.java:135)\r\n at org.apache.cassandra.db.ColumnFamilyStore.apply(ColumnFamilyStore.java:1424)\r\n at org.apache.cassandra.db.CassandraTableWriteHandler.write(CassandraTableWriteHandler.java:40)\r\n at org.apache.cassandra.db.Keyspace.applyInternal(Keyspace.java:672)\r\n at org.apache.cassandra.db.Keyspace.applyFuture(Keyspace.java:489)\r\n at org.apache.cassandra.db.Mutation.applyFuture(Mutation.java:228)\r\n at org.apache.cassandra.hints.Hint.applyFuture(Hint.java:109)\r\n at org.apache.cassandra.hints.HintVerbHandler.doVerb(HintVerbHandler.java:116)\r\n at org.apache.cassandra.net.InboundSink.lambda$new$0(InboundSink.java:78)\r\n at org.apache.cassandra.net.InboundSink.accept(InboundSink.java:97)\r\n ... 6 common frames omitted{code}\r\n\r\nh2. *Observed Behavior*\r\n * Node logs show *AssertionError* during mutation apply.\r\n * Tracing reports failing mutations with {{{}FAILURE_RSP{}}}.\r\n * Only operations involving the range delete ({{{}rank >= ?{}}}) cause the assertion.\r\n * Removing the DELETE eliminates the issue entirely.\r\n\r\nh2. *Expected Behavior*\r\n * Range deletes on clustering key ({{{}DELETE ... AND rank >= ?{}}}) should be processed safely.\r\n * No assertion failures during normal write path operations.\r\n * Tombstone handling in {{RangeTombstoneList.clone()}} should not produce null buffer conditions.",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/1",
        "description": "The issue is open and ready for the assignee to start work on it.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
        "name": "Open",
        "id": "1",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634165",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634165",
    "key": "CASSANDRA-21017",
    "fields": {
      "summary": "Accord: More Metrics",
      "created": "2025-11-13T12:05:46.000+0000",
      "description": "Add AccordExecutorMetrics\r\nAlso:\r\n - Test/fix Sharded/LogLinearHistogram\r\n - Introduce Sharded/LogLinearDecayingHistogram",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634103",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634103",
    "key": "CASSANDRA-21016",
    "fields": {
      "summary": "Support resumption of bulk transfers after coordinator down or replaced",
      "created": "2025-11-12T19:09:07.000+0000",
      "description": null,
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=aratnofsky",
        "name": "aratnofsky",
        "key": "aratnofsky",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=aratnofsky&avatarId=47012",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aratnofsky&avatarId=47012",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aratnofsky&avatarId=47012",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aratnofsky&avatarId=47012"
        },
        "displayName": "Abe Ratnofsky",
        "active": true,
        "timeZone": "America/Los_Angeles"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634102",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634102",
    "key": "CASSANDRA-21015",
    "fields": {
      "summary": "Support resumption of bulk transfers after restart",
      "created": "2025-11-12T19:08:05.000+0000",
      "description": null,
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=aratnofsky",
        "name": "aratnofsky",
        "key": "aratnofsky",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=aratnofsky&avatarId=47012",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aratnofsky&avatarId=47012",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aratnofsky&avatarId=47012",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aratnofsky&avatarId=47012"
        },
        "displayName": "Abe Ratnofsky",
        "active": true,
        "timeZone": "America/Los_Angeles"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634098",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634098",
    "key": "CASSANDRA-21014",
    "fields": {
      "summary": "Add fuzz testing for read monotonicity properties",
      "created": "2025-11-12T18:42:13.000+0000",
      "description": "Mutation tracking is intended to provide read monotonicity, and weve found and addressed several potential monotonicity violations in the design phase. We should introduce a read monotonicity test harness that helps us maintain this guarantee.\r\n\r\nRight now the AST fuzz tests run commands in serial and validate complete visibility of reads and writes. A concurrent version that only validates read monotonicity could enable more aggressive failures, like breaking quorum availability. Modeling read monotonicity is simpler than complete read-write visibility, because we only need to track the latest value for each key read, and ensure that subsequent reads do not see an older value.\r\n\r\nWe could exercise partial repair (via --force) and failed writes with message filters (org.apache.cassandra.distributed.impl.AbstractCluster#filters).",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13634039",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13634039",
    "key": "CASSANDRA-21013",
    "fields": {
      "summary": "Accord: Improve DurabilityQueue",
      "created": "2025-11-12T10:28:49.000+0000",
      "description": "Improve DurabilityQueue:\r\n - All retries are appended to a delay queue so overlaps can be pruned\r\n - Quorum successes are not retried if there are superseding sync points covering the ranges\r\n - User-initiated requests are not purged unless the request has timed out or otherwise completed\r\n - Overlapping requests are queued up against the next to run\r\nAlsp (C*):\r\n - Catch-up with quorums on restart\r\n - Manage an ordered set of keys in cache for faster range searches\r\nAlso (Accord):\r\n - Update copy of BTree and import IntervalBTree\r\n - Fix RedundantStatus WAS_OWNED_OVERRIDE_MASK\r\n - Add Catchup mechanism to reach parity with a quorum on restart",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13633953",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13633953",
    "key": "CASSANDRA-21012",
    "fields": {
      "summary": "Make CQLSSTableWriter to be able to specify id's of created tables (legacy / uuid)",
      "created": "2025-11-11T13:52:54.000+0000",
      "description": "There is no way to specify that a user wants SSTables to be created with UUID identifiers (as introduced / backed by uuid_sstable_identifiers_enabled: true flag in cassandra.yaml).\r\n\r\nWe have evaluated that this is not necessary for Cassandra Analytics jobs because even they are created with legacy naming, they will be effectively renamed when SSTables are _imported_.\r\n\r\nHowever, if somebody looks for writing SSTables programmatically by CQSSTableWriter, outside of the context of Cassandra Analytics, and they want to just dump such SSTables to a (running) node with {{uuid_sstable_identifiers_enabled: true}}, and then they either start a node or refresh it (nodetool refresh), SSTables are not \"renamed\". \r\n\r\nHence, there should be a possibility to specify how we want to name our SSTables upon creation. ",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13633895",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13633895",
    "key": "CASSANDRA-21011",
    "fields": {
      "summary": "Add CQL syntax in Cassandra for CEP-44s Data Source/Sink Support ",
      "created": "2025-11-11T00:40:54.000+0000",
      "description": "{color:#000000}This proposal is Phase 1 in a larger effort to include CQL support for CEP-44 logic. This task will make the necessary CQL syntax in apache/cassandra, including keyword parsing, grammars and their respective Java statements for DATA SOURCE and DATA SINK.{color}\r\n\r\n[Section of CEP-44|[https://cwiki.apache.org/confluence/display/CASSANDRA/CEP-44:+Kafka+integration+for+Cassandra+CDC+using+Sidecar#CEP44:KafkaintegrationforCassandraCDCusingSidecar-CQLconfiguration]]",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=shalnisundram",
        "name": "shalnisundram",
        "key": "JIRAUSER311160",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34058",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34058",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34058",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34058"
        },
        "displayName": "Shalni Sundram",
        "active": true,
        "timeZone": "Etc/UTC"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13633886",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13633886",
    "key": "CASSANDRA-21010",
    "fields": {
      "summary": "CEP-46: Witness enable/disable implementation, testing, documentation",
      "created": "2025-11-10T21:52:01.000+0000",
      "description": "The original process for enabling/disabling witnesses was that enabling them entailed changing the schema and then running nodetool cleanup. I believe this is still the case.\r\n\r\nThe original process for disabling witnesses is reduce the number of witnesses to 0 and then increase the number of full replicas. With say 6 replicas total and only 4 full replicas this means f will be 1 in terms of availability. In terms of write durability since quorum will be 3/4 you can still lose 2 nodes without losing any writes. This may be undesirable, but fine. If you ran RF=5 (or had only 3 full replicas) write durability would only allow for 1 lost replica which is more problematic. You would also immediately lose availability with only 3 full replicas and 3 witnesses when you attempted to disable the witnesses.\r\n\r\nThe code that documents this is:\r\n{code:java|title=AlterKeyspaceStatement.java}\r\n       //This is true right now because the transition from transient -> full lacks the pending state\r\n       //necessary for correctness. What would happen if we allowed this is that we would attempt\r\n       //to read from a transient replica as if it were a full replica.\r\n       if (oldFull > newFull && oldTrans > 0)\r\n           throw new ConfigurationException(\"Can't add full replicas if there are any transient replicas. You must first remove all transient replicas, then change the # of full replicas, then add back the transient replicas\");\r\n{code}\r\nIt would be more optimal to have a pending state for witnesses and then add them back to the read data placement when repair completes.",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13633816",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13633816",
    "key": "CASSANDRA-21009",
    "fields": {
      "summary": "nodetool sjk mxdump ignores -q option",
      "created": "2025-11-10T10:50:29.000+0000",
      "description": "If I invokea command like this:\r\n{code:java}\r\n./bin/nodetool sjk mxdump -q \"org.apache.cassandra.metrics:name=BlockedOnAllocation,type=MemtablePool\" {code}\r\n\r\na full list of beans is printed, it looks like query option is not applied.\r\nSame command for 5.0.x works fine. So, it can be related to CASSANDRA-17445",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=mmuzaf",
        "name": "mmuzaf",
        "key": "mmuzaf",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=mmuzaf&avatarId=34690",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mmuzaf&avatarId=34690",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mmuzaf&avatarId=34690",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mmuzaf&avatarId=34690"
        },
        "displayName": "Maxim Muzafarov",
        "active": true,
        "timeZone": "Europe/Berlin"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13633746",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13633746",
    "key": "CASSANDRA-21008",
    "fields": {
      "summary": "Optimizing Randomized Testing for Reproducibility",
      "created": "2025-11-09T11:07:35.000+0000",
      "description": "h4. Goals and Motivation\r\n\r\nRandom Test is designed to help with testing systems that rely on randomness, such as those involving probabilistic behavior, concurrency, or randomized algorithms. It enables automated, repeatable testing of code that behaves differently on each run, ensuring more comprehensive test coverage.\r\n\r\nKey benefits:\r\n{*}Test Uncertainty{*}: It provides tools for testing systems where inputs, behaviors, or results vary across test runs.\r\n{*}Reproducibility{*}: It helps ensure tests can be reliably reproduced, even with randomness involved.\r\n{*}Stress Testing{*}: It is ideal for identifying edge cases and bugs that might not be easily found in deterministic tests.\r\n{*}Better Test Coverage{*}: Randomized tests provide more varied input combinations, leading to more thorough testing.\r\n\r\nIn short, Random Test ensures the robustness and reliability of systems dealing with randomness, making it essential for testing complex or non-deterministic behavior.\r\nh4. Approach\r\n{code:java}\r\nprivate static final String RANDOMIZED_CONTEXT_FQN = \"com.carrotsearch.randomizedtesting.RandomizedContext\";\r\nClass.forName(RANDOMIZED_CONTEXT_FQN); // sets isRandomTestMode = true{code}\r\nWe use this approach to determine whether we are in Random Test Mode or Normal Mode (if we can find the FQN, we activate the test infrastructure).\r\n{code:java}\r\nRandomness.java\r\n\r\npublic static Random get() {\r\n  if (isRandomTestMode()) {\r\n    return our ThreadLocal seedable random implementation;\r\n  } else {\r\n    return java native Random implementation;\r\n  }\r\n} {code}\r\nWe centralize all random operations in *_Randomness.java_* to make them repeatable, unified, and aggregated (when in Random Test Mode, all randomness becomes reproducible and deterministic). For example:\r\n1. Java Random APIs (SecureRandom, Collections.shuffle, UUID.randomUUID(), Math.random(), etc.)\r\n2. Additional random utilities (randomUTF8, randomLocale, randomDate, randomAsciiLetters, etc.)\r\nWe print the seed when a unit test fails:\r\n{code:java}\r\njava.lang.RuntimeException: java.lang.ExceptionInInitializerError\r\n  at __randomizedtesting.SeedInfo.seed([FFB4961AF9935703:3AFD18F7B24FCA34]:0)\r\n  at org.apache.cassandra.distributed.impl.Instance.lambda$startup$7(Instance.java:675)\r\n  ... {code}\r\nThen use the following command to reproduce the failure:\r\n{code:java}\r\nant testsome -Dtest.name=org.apache.cassandra.db.marshal.MyRandomizedTest -Dtests.seed=FFB4961AF9935703 {code}\r\nWe can also print JVM system properties, memory, and CPU information for additional debugging context.\r\nh4. Proposed Changes\r\n{code:java}\r\nGossiper#maybeGossipToUnreachableMember\r\n// Before\r\ndouble randDbl = random.nextDouble();\r\n// After \r\ndouble randDbl = Randomness.get().nextDouble(); {code}\r\nh4. Test Plan\r\n\r\nWe will refactor all random test suites. Existing test suites will verify these changes. Additionally, we will add unit tests for Randomness.\r\nh4. Rejected Alternatives: Why not use carrotsearch randomizedtesting directly?\r\n\r\nElasticsearch and Lucene have successfully used randomizedtesting (Apache-2.0 license) for decades([7]), and it's already present in Cassandra. However, we reject this approach for the following reasons:\r\n\r\n{*}1. Initialization timing issues{*}: Using Java reflection to call *_{{RandomizedContext.current().getRandom()}}_* ([7]) causes {{java.lang.ExceptionInInitializerError}} due to class initialization timing at startup.\r\n\r\n{*}2. Boundary limitations{*}: randomizedtesting accesses random contexts within {{@BeforeClass}} and {{@AfterClass}} boundaries, but static test class initializers cannot access random contexts. However, we need random behavior during server startup.\r\n\r\n{*}3. Distributed JVM test incompatibility{*}: randomizedtesting is not compatible with distributed JVM tests. Our native Java approach works seamlessly with distributed JVM tests, simulators, and QuickTheories.\r\n\r\n*3.1 Possible* {*}approach{*}{*}:{*}\r\n\r\nFor unit tests:\r\n{code:java}\r\npublic class UUIDTypeTest extends RandomTestSuite\r\n\r\n@Listeners({ ReproduceInfoPrinter.class })\r\n@ThreadLeakScope(ThreadLeakScope.Scope.NONE)\r\n@SeedDecorators({ MixWithSuiteName.class })\r\n@TestMethodProviders(value = { JUnit4MethodProvider.class })\r\npublic abstract class RandomTestSuite extends RandomizedTest{code}\r\nFor distributed JVM tests:\r\n{code:java}\r\n@RunWith(RandomizedRunner.class)\r\n@Listeners({ ReproduceInfoPrinter.class })\r\n@ThreadLeakScope(ThreadLeakScope.Scope.NONE)\r\n@SeedDecorators({ MixWithSuiteName.class })\r\npublic class HintDataReappearingTest extends AbstractHintWindowTest{code}\r\n{*}3.1.1 Limitations of this p{*}{*}ossible{*} *approaches:*\r\n\r\nSome distributed JVM tests cannot obtain {{RandomizedContext}}\r\n\r\nTests using {{@RunWith(Parameterized.class)}} or {{@RunWith(BMUnitRunner.class)}} cannot work with {{@RunWith(RandomizedRunner.class)}} since only one {{@RunWith}} annotation is allowed per test\r\n\r\nExtending {{RandomTestSuite}} or using {{@RunWith(RandomizedRunner.class)}} requires a base test class, causing extensive code changes that are difficult to review(every test needs to change)\r\nh4. Reference\r\n\r\n[1] [https://labs.carrotsearch.com/randomizedtesting-concept.html]\r\n[2] [https://get.carrotsearch.com/presentations/dweiss-barcelona-testing-2011.pdf]\r\n[3] [https://spinscale.de/posts/2020-04-22-testing-and-releasing-elasticsearch-and-the-elastic-stack.html]\r\n[4] [https://github.com/randomizedtesting/randomizedtesting]\r\n[5] [https://labs.carrotsearch.com/randomizedtesting.html]\r\n[6] [https://github.com/randomizedtesting/randomizedtesting/?tab=Apache-2.0-1-ov-file#]\r\n[7]https://github.com/elastic/elasticsearch/blob/004fab6627b0ae65cf939e0d69a4db8dbd175798/server/src/main/java/org/elasticsearch/common/Randomness.java#L93\r\n[8] [https://www.youtube.com/watch?v=zD57QKzqdCw]",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=maoling",
        "name": "maoling",
        "key": "maoling",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=maoling&avatarId=32024",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=maoling&avatarId=32024",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=maoling&avatarId=32024",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=maoling&avatarId=32024"
        },
        "displayName": "Ling Mao",
        "active": true,
        "timeZone": "Asia/Shanghai"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13633679",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13633679",
    "key": "CASSANDRA-21007",
    "fields": {
      "summary": "cassandra-stress defaults to deprecated TLS 1.2 cipher suite",
      "created": "2025-11-07T20:05:01.000+0000",
      "description": "From what I understand, this cipher, used as the default in {*}cassandra-stress{*}, is not compatible with TLS 1.3's handshake mechanism as it lacks Perfect Forward Security (PFS).\r\n{code:java}\r\nfinal OptionSimple ciphers = new OptionSimple(\"ssl-ciphers=\", \".*\", \"TLS_RSA_WITH_AES_128_CBC_SHA,TLS_RSA_WITH_AES_256_CBC_SHA\", \"SSL: comma delimited list of encryption suites to use\", false);\r\n {code}\r\n[stress/settings/SettingsTransport.java|https://github.com/apache/cassandra/blob/cassandra-4.1/tools/stress/src/org/apache/cassandra/stress/settings/SettingsTransport.java#L80]\r\n\r\n",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/1",
        "description": "The issue is open and ready for the assignee to start work on it.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
        "name": "Open",
        "id": "1",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13633666",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13633666",
    "key": "CASSANDRA-21006",
    "fields": {
      "summary": "PrepareJoin should be rejected if tokens are already assigned",
      "created": "2025-11-07T16:57:05.000+0000",
      "description": "Currently a {{PrepareJoin}} transform can succeed if the tokens to be assigned to the joining peer already belong to another node. This is not especially unsafe as the join operation itself will be rejected at the {{StartJoin}} phase, but it is suboptimal as the planned operation has to then be cancelled in order to unlock the ranges.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633666/comment/18038960",
            "id": "18038960",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "body": "CI results to follow",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "created": "2025-11-17T19:23:16.499+0000",
            "updated": "2025-11-17T19:23:16.499+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
        "name": "samt",
        "key": "beobal",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
        },
        "displayName": "Sam Tunnicliffe",
        "active": true,
        "timeZone": "Europe/London"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10002",
        "description": "A patch for this issue has been uploaded to JIRA by a contributor.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/document.png",
        "name": "Patch Available",
        "id": "10002",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13633662",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13633662",
    "key": "CASSANDRA-21005",
    "fields": {
      "summary": "Node registration can use incorrect Location if its address belongs to a previously decommissioned peer",
      "created": "2025-11-07T16:02:47.000+0000",
      "description": "When a node is decommissioned, its entry in the cluster metadata directory is retained with a LEFT status. This can cause a new node joining later with the same address to adopt the previous node's {{Location}} info (rack/dc) and use that when it registers rather than obtaining its actual location from the configured {{InitialLocationProvider}}.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633662/comment/18038962",
            "id": "18038962",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "body": "CI results to follow",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "created": "2025-11-17T19:25:53.777+0000",
            "updated": "2025-11-17T19:25:53.777+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
        "name": "samt",
        "key": "beobal",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
        },
        "displayName": "Sam Tunnicliffe",
        "active": true,
        "timeZone": "Europe/London"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10002",
        "description": "A patch for this issue has been uploaded to JIRA by a contributor.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/document.png",
        "name": "Patch Available",
        "id": "10002",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13633660",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13633660",
    "key": "CASSANDRA-21004",
    "fields": {
      "summary": "Potential NPE when meta keyspace placements are empty before CMS is initialized",
      "created": "2025-11-07T16:00:57.000+0000",
      "description": "During an upgrade to trunk there is a window before the CMS is initialized where the {{system_cluster_metadata}} keyspace exists but is not replicated by any peers. At this time, if a JMX client invokes {{getRangeToEndpointMap}} on the {{org.apache.cassandra.db:type=StorageService}} mbean for this keyspace, it will trigger an NPE on the server.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633660/comment/18038952",
            "id": "18038952",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "body": "CI results to follow",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "created": "2025-11-17T18:57:47.576+0000",
            "updated": "2025-11-17T18:57:47.576+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633660/comment/18040318",
            "id": "18040318",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "body": "CI looks reasonable, only previously failing tests and nothing related to this patch.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "created": "2025-11-24T12:54:46.162+0000",
            "updated": "2025-11-24T12:54:46.162+0000"
          }
        ],
        "maxResults": 2,
        "total": 2,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
        "name": "samt",
        "key": "beobal",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
        },
        "displayName": "Sam Tunnicliffe",
        "active": true,
        "timeZone": "Europe/London"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10002",
        "description": "A patch for this issue has been uploaded to JIRA by a contributor.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/document.png",
        "name": "Patch Available",
        "id": "10002",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13633655",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13633655",
    "key": "CASSANDRA-21003",
    "fields": {
      "summary": "Truncate throws NPE in presence of a vestigial hibernating instance in gossip",
      "created": "2025-11-07T15:45:07.000+0000",
      "description": "It is possible for peers which have never joined the ring to leave traces in gossip state long after the actual process has died. These vestigial entries in gossip state can persist indefinitely and due to recent changes in the {{Gossiper}} they can impact the check that all known peers are UP that is performed when truncating a table.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633655/comment/18038950",
            "id": "18038950",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "body": "CI results to follow",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "created": "2025-11-17T18:53:02.515+0000",
            "updated": "2025-11-17T18:53:02.515+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
        "name": "samt",
        "key": "beobal",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
        },
        "displayName": "Sam Tunnicliffe",
        "active": true,
        "timeZone": "Europe/London"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10002",
        "description": "A patch for this issue has been uploaded to JIRA by a contributor.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/document.png",
        "name": "Patch Available",
        "id": "10002",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13633654",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13633654",
    "key": "CASSANDRA-21002",
    "fields": {
      "summary": "Retry without time limit calculates wait time incorrectly",
      "created": "2025-11-07T15:40:04.000+0000",
      "description": "The Retry instances returned by {{Retry::withNoTimeLimit}} don't properly convert from the wait time obtained from their delegate in nanos to the timeunit requested by the caller. For callers which request a wait time not in nanos such as {{Retry::maybeSleep}} which is used, for instance, when running Paxos repair during CMS reconfiguration, the sleep time is inflated by orders of magnitude.\r\n\r\nCompounding this issue, when a node starts up and detects that either its broadcast address or release version has changed, it submits a STARTUP transformation to the CMS with the updated details. For this one submission, a custom retry strategy is used which is intended to keep on trying to commit indefinitely rather than stopping after a maximum number of attempts. There are issues with the implementation of this strategy which causes the default sleep time between retries to be approximately 198 weeks.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633654/comment/18038949",
            "id": "18038949",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "body": "CI results to follow",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "created": "2025-11-17T18:51:04.485+0000",
            "updated": "2025-11-17T18:51:04.485+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633654/comment/18040359",
            "id": "18040359",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "body": "CI looks reasonable, only previously failing tests and nothing related to this patch",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "created": "2025-11-24T15:38:39.676+0000",
            "updated": "2025-11-24T15:38:39.676+0000"
          }
        ],
        "maxResults": 2,
        "total": 2,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
        "name": "samt",
        "key": "beobal",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
        },
        "displayName": "Sam Tunnicliffe",
        "active": true,
        "timeZone": "Europe/London"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10002",
        "description": "A patch for this issue has been uploaded to JIRA by a contributor.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/document.png",
        "name": "Patch Available",
        "id": "10002",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13633653",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13633653",
    "key": "CASSANDRA-21001",
    "fields": {
      "summary": "Don't submit AlterSchemaStatements which produce no effect locally to the CMS",
      "created": "2025-11-07T15:36:54.000+0000",
      "description": "If a DDL statement produces no effect when the coordinator performs the pre-submission application of the schema transformation, we can skip sending it to the CMS and return a Void response.\r\n\r\nThe initial implementation would submit any {{AlterSchemaStatement}} which did not generate an error but this can lead to many DDL operations which are in fact no-ops being committed to the log. One example would be a client application which performs a series of DDL statements with {{IF NOT EXISTS}} clauses whenever it starts up. This is strictly correct, as the operations will all be no-op'd when applied by the nodes in the cluster, but is somewhat wasteful and not intuitive.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633653/comment/18038944",
            "id": "18038944",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "body": "The CI results are not pretty, but all of failures are either preexisting, due to some environmental issue with our CI system (e.g. nodetool stderr includes {{JAVA_TOOL_OPTIONS}}), or cannot be reproduced locally. ",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "created": "2025-11-17T18:43:53.563+0000",
            "updated": "2025-11-17T18:43:53.563+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633653/comment/18039605",
            "id": "18039605",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "body": "Added CI results from https://pre-ci.cassandra.apache.org/job/cassandra/169/",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
              "name": "samt",
              "key": "beobal",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
              },
              "displayName": "Sam Tunnicliffe",
              "active": true,
              "timeZone": "Europe/London"
            },
            "created": "2025-11-20T11:46:24.588+0000",
            "updated": "2025-11-20T11:46:24.588+0000"
          }
        ],
        "maxResults": 2,
        "total": 2,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=samt",
        "name": "samt",
        "key": "beobal",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=beobal&avatarId=19518",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=beobal&avatarId=19518",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=beobal&avatarId=19518",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=beobal&avatarId=19518"
        },
        "displayName": "Sam Tunnicliffe",
        "active": true,
        "timeZone": "Europe/London"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10002",
        "description": "A patch for this issue has been uploaded to JIRA by a contributor.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/document.png",
        "name": "Patch Available",
        "id": "10002",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13633581",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13633581",
    "key": "CASSANDRA-21000",
    "fields": {
      "summary": "Deleted columns are forever part of SerializationHeader",
      "created": "2025-11-06T22:42:06.000+0000",
      "description": "If you delete a column and rewrite the SSTable the column is removed from the data, but the serialization header refers to the deleted column still. This means if you drop a column and rewrite sstables (eg. nodetool upgradesstables -a) and that column is not in use, you still can not import or load those SSTables into another cluster without also having to add/drop columns.\r\n\r\n\r\n{noformat}\r\n~/.ccm/test/node1/data0/test $ ~/bin/cqlsh\r\nConnected to repairtest at 127.0.0.1:9042\r\n[cqlsh 6.2.0 | Cassandra 5.0.5-SNAPSHOT | CQL spec 3.4.7 | Native protocol v5]\r\nUse HELP for help.\r\ncqlsh> CREATE TABLE test.drop_test(id int primary key, message text, col_to_delete text);\r\ncqlsh> INSERT INTO test.drop_test(id, message, col_to_delete) VALUES (1, 'test', 'delete me');\r\ncqlsh> SELECT * FROM test.drop_test;\r\nid | col_to_delete | message\r\n----+---------------+---------\r\n 1 |   delete me |  test\r\n(1 rows)\r\n\r\n~/.ccm/test/node1/data0/test $ ccm flush\r\n\r\n~/.ccm/test/node1/data0/test $ cd drop_test-7a20f690ba8611f09c6c3125f1cbdf37\r\n\r\n~/.ccm/test/node1/data0/test $ ls\r\nnb-1-big-CompressionInfo.db nb-1-big-Digest.crc32 nb-1-big-Index.db    nb-1-big-Summary.db\r\nnb-1-big-Data.db       nb-1-big-Filter.db   nb-1-big-Statistics.db nb-1-big-TOC.txt\r\n\r\n~/.ccm/test/node1/data0/test $ /.ccm/repository/5.0.3/tools/bin/sstabledump nb-1-big-Data.db\r\n[\r\n {\r\n  \"table kind\" : \"REGULAR\",\r\n  \"partition\" : {\r\n   \"key\" : [ \"1\" ],\r\n   \"position\" : 0\r\n  },\r\n  \"rows\" : [\r\n   {\r\n    \"type\" : \"row\",\r\n    \"position\" : 18,\r\n    \"liveness_info\" : { \"tstamp\" : \"2025-11-05T20:32:17.946616Z\" },\r\n    \"cells\" : [\r\n     { \"name\" : \"col_to_delete\", \"value\" : \"delete me\" },\r\n     { \"name\" : \"message\", \"value\" : \"test\" }\r\n    ]\r\n   }\r\n  ]\r\n }\r\n]%\r\n\r\n~/.ccm/test/node1/data0/test $ ~/bin/cqlsh\r\nConnected to repairtest at 127.0.0.1:9042\r\n[cqlsh 6.2.0 | Cassandra 5.0.5-SNAPSHOT | CQL spec 3.4.7 | Native protocol v5]\r\nUse HELP for help.\r\ncqlsh> ALTER TABLE test.drop_test DROP col_to_delete;\r\ncqlsh> SELECT * FROM test.drop_test;\r\nid | message\r\n----+---------\r\n 1 |  test\r\n(1 rows)\r\n\r\n~/.ccm/test/node1/data0/test $ ccm node1 nodetool upgradesstables -- -a test drop_test\r\n\r\n~/.ccm/test/node1/data0/test $ ls\r\nnb-2-big-CompressionInfo.db nb-2-big-Digest.crc32 nb-2-big-Index.db    nb-2-big-Summary.db\r\nnb-2-big-Data.db       nb-2-big-Filter.db   nb-2-big-Statistics.db nb-2-big-TOC.txt\r\n\r\n~/.ccm/test/node1/data0/test $ ~/.ccm/repository/5.0.3/tools/bin/sstabledump nb-2-big-Data.db\r\n[\r\n {\r\n  \"table kind\" : \"REGULAR\",\r\n  \"partition\" : {\r\n   \"key\" : [ \"1\" ],\r\n   \"position\" : 0\r\n  },\r\n  \"rows\" : [\r\n   {\r\n    \"type\" : \"row\",\r\n    \"position\" : 18,\r\n    \"liveness_info\" : { \"tstamp\" : \"2025-11-05T20:32:17.946616Z\" },\r\n    \"cells\" : [\r\n     { \"name\" : \"message\", \"value\" : \"test\" }\r\n    ]\r\n   }\r\n  ]\r\n }\r\n]%\r\n\r\n~/.ccm/test/node1/data0/test $ ~/.ccm/repository/5.0.3/tools/bin/sstablemetadata nb-2-big-Data.db | grep -E 'StaticColumns|RegularColumns'\r\nStaticColumns:\r\nRegularColumns: col_to_delete:org.apache.cassandra.db.marshal.UTF8Type, message:org.apache.cassandra.db.marshal.UTF8Type{noformat}",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633581/comment/18036242",
            "id": "18036242",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "body": "I am not completely sure but this might be actually by design. I will try to get to the bottom of this. ",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "created": "2025-11-07T14:25:11.003+0000",
            "updated": "2025-11-07T14:25:11.003+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633581/comment/18037344",
            "id": "18037344",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=cam1982",
              "name": "cam1982",
              "key": "cam1982",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Cameron Zemek",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "Note the related code is here [https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/db/SerializationHeader.java#L79] .\r\n{noformat}\r\nCurrently, we stick to a relatively naive merge of existing global stats because it's simple and probably good enough in most situation{noformat}\r\nThe dropped columns are not part of Data.db , so on the surface it seems like it would be safe to dropped them from the merge if they are a dropped column. If not, what does this break?",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=cam1982",
              "name": "cam1982",
              "key": "cam1982",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Cameron Zemek",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2025-11-11T05:46:49.947+0000",
            "updated": "2025-11-11T05:46:49.947+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633581/comment/18037403",
            "id": "18037403",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=mortenjoenby",
              "name": "mortenjoenby",
              "key": "JIRAUSER305163",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34056",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34056",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34056",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34056"
              },
              "displayName": "Morten Joenby",
              "active": true,
              "timeZone": "Europe/Copenhagen"
            },
            "body": "[~smiklosovic] , Cameron created this Jira based on a support case he had with us (Stibo Systems).\r\n\r\nWe have run into this \"challenge\" and we will need to implement a workaround to this problem. We run into this whenever we \"align\" (restore a snapshot) from the original cluster to a target cluster that do not have the system_schema.dropped_columns information.\r\n\r\nSo the only working \"fix\" is to add the columns (datatype is irrelevant, can be anything) and then drop them again immediately, and rerun \"nodetool refresh <table>\".\r\n\r\nThis can be done obviously, but really shouldn't be required.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=mortenjoenby",
              "name": "mortenjoenby",
              "key": "JIRAUSER305163",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34056",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34056",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34056",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34056"
              },
              "displayName": "Morten Joenby",
              "active": true,
              "timeZone": "Europe/Copenhagen"
            },
            "created": "2025-11-11T11:18:48.839+0000",
            "updated": "2025-11-11T11:18:48.839+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633581/comment/18037435",
            "id": "18037435",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=brandon.williams",
              "name": "brandon.williams",
              "key": "brandon.williams",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=brandon.williams&avatarId=10054",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=brandon.williams&avatarId=10054",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=brandon.williams&avatarId=10054",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=brandon.williams&avatarId=10054"
              },
              "displayName": "Brandon Williams",
              "active": true,
              "timeZone": "America/Havana"
            },
            "body": "Unfortunately, I think this is by design to prevent edge cases.  One I can think of is changing the type of a dropped column to something incompatible with the underlying data.\r\n\r\nWe could add a flag to ignore these though to get around situations like this.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=brandon.williams",
              "name": "brandon.williams",
              "key": "brandon.williams",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=brandon.williams&avatarId=10054",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=brandon.williams&avatarId=10054",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=brandon.williams&avatarId=10054",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=brandon.williams&avatarId=10054"
              },
              "displayName": "Brandon Williams",
              "active": true,
              "timeZone": "America/Havana"
            },
            "created": "2025-11-11T12:38:59.706+0000",
            "updated": "2025-11-11T12:39:56.519+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633581/comment/18037447",
            "id": "18037447",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "body": "I am wiling to take a shot at a flag introduced into upgradesstables to knowingly remove the column in metadata to overcome issues like this. ",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "created": "2025-11-11T13:25:59.863+0000",
            "updated": "2025-11-11T13:25:59.863+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633581/comment/18037495",
            "id": "18037495",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=mortenjoenby",
              "name": "mortenjoenby",
              "key": "JIRAUSER305163",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34056",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34056",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34056",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34056"
              },
              "displayName": "Morten Joenby",
              "active": true,
              "timeZone": "Europe/Copenhagen"
            },
            "body": "[~brandon.williams] , changing the type of a dropped column, when would that happen? You mean what I did as a workaround to be able to refresh? add and then drop ...\r\n\r\nI couldn't use the original type as that was \"<frozen> <table>\" where <table> no longer exists.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=mortenjoenby",
              "name": "mortenjoenby",
              "key": "JIRAUSER305163",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34056",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34056",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34056",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34056"
              },
              "displayName": "Morten Joenby",
              "active": true,
              "timeZone": "Europe/Copenhagen"
            },
            "created": "2025-11-11T16:17:44.491+0000",
            "updated": "2025-11-11T16:17:44.491+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633581/comment/18037500",
            "id": "18037500",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=brandon.williams",
              "name": "brandon.williams",
              "key": "brandon.williams",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=brandon.williams&avatarId=10054",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=brandon.williams&avatarId=10054",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=brandon.williams&avatarId=10054",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=brandon.williams&avatarId=10054"
              },
              "displayName": "Brandon Williams",
              "active": true,
              "timeZone": "America/Havana"
            },
            "body": "Yes, a drop and then addition of the same name with a different type.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=brandon.williams",
              "name": "brandon.williams",
              "key": "brandon.williams",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=brandon.williams&avatarId=10054",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=brandon.williams&avatarId=10054",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=brandon.williams&avatarId=10054",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=brandon.williams&avatarId=10054"
              },
              "displayName": "Brandon Williams",
              "active": true,
              "timeZone": "America/Havana"
            },
            "created": "2025-11-11T16:22:17.396+0000",
            "updated": "2025-11-11T16:22:17.396+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633581/comment/18037574",
            "id": "18037574",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=cam1982",
              "name": "cam1982",
              "key": "cam1982",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Cameron Zemek",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "> One I can think of is changing the type of a dropped column to something incompatible with the underlying data.\r\n\r\n[~brandon.williams] can you expand on this further. In the case of a dropped column the column does not appear in the Data.db . So what edge case is having a deleted column in the encoding stats needed for?\r\n\r\n\r\n\r\nOn side note there is protection to prevent changing to incompatible data type:\r\n{code:java}\r\n         if (!type.isSerializationCompatibleWith(droppedColumn.type))\r\n        {\r\n          throw ire(\"Cannot re-add previously dropped column '%s' of type %s, incompatible with previous type %s\",\r\n               name,\r\n               type.asCQL3Type(),\r\n               droppedColumn.type.asCQL3Type());\r\n        } {code}\r\nNot sure how to get into these edge cases where you have incompatible types for a column given these safeguards exist (schema mismatch and streaming perhaps?). What would that look like in the SSTable (assuming row would have to have a subset of columns to refer to the correct type for the conflicting column since the encoding stats would have both versions) in these edge cases?",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=cam1982",
              "name": "cam1982",
              "key": "cam1982",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Cameron Zemek",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2025-11-12T01:07:55.862+0000",
            "updated": "2025-11-12T01:07:55.862+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633581/comment/18037697",
            "id": "18037697",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=brandon.williams",
              "name": "brandon.williams",
              "key": "brandon.williams",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=brandon.williams&avatarId=10054",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=brandon.williams&avatarId=10054",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=brandon.williams&avatarId=10054",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=brandon.williams&avatarId=10054"
              },
              "displayName": "Brandon Williams",
              "active": true,
              "timeZone": "America/Havana"
            },
            "body": "I don't really know, this isn't my code, I'm just making logical inferences.  I suspect that they aren't being removed when the column isn't in the Data.db because it's probably not a trivial thing to check and compaction isn't doing it right now.  Maybe there are other cases I haven't thought about.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=brandon.williams",
              "name": "brandon.williams",
              "key": "brandon.williams",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=brandon.williams&avatarId=10054",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=brandon.williams&avatarId=10054",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=brandon.williams&avatarId=10054",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=brandon.williams&avatarId=10054"
              },
              "displayName": "Brandon Williams",
              "active": true,
              "timeZone": "America/Havana"
            },
            "created": "2025-11-12T12:07:30.637+0000",
            "updated": "2025-11-12T12:07:30.637+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633581/comment/18038342",
            "id": "18038342",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "body": "Okay I took a deeper look into this and it is not entirely true that \"deleted columns are there for ever\". When a column is dropped and I flush data into a new SSTable, that dropped column is not there anymore. I was thinking that we will add dropped into every SSTable but that is not true, I do not know why I was thinking that ...\r\n\r\nThe example Cameron showed is correct, nodetool upgradesstables does not remove dropped column _from SSTables which have it_. \r\n\r\nI did a patch which removes all dropped columns from SSTable header but there are actually two ways how to upgrade SSTables:\r\n\r\n1) the first method is \"nodetool upgradesstables\" - this will require _live Cassandra node_ against which this is performed.\r\n2) the second method is doing it via \"StandaloneUpgrader\" which is used in \"./bin/sstableupgrade\" - this does not need to have a node running, it just reads it from a disk.\r\n\r\nMethod 1), when SSTables are upgraded against a live node, it basically creates a new SSTable in a data dir for which it generates new ID. So if you rewrite it and you have a snapshot as well (hence hard link), then it will create a new SSTable in data dir but snapshot's SSTable will be intact.\r\n\r\nMethod 2), you can also point sstableupgrade to a specific snapshot of  keyspace and table and it will rewrite these (third optional parameter of sstableupgrade is a snapshot name to rewrite SSTables in). That means that after rewriting, the original SSTable in data dir will be intact.\r\n\r\nI am not completely sure what approach is better. I do not think that we should enable removing this in live data dir. This ticket also covers a use case when they are _restoring a snapshot_. I can imagine that they would\r\n\r\n1) take a snapshot on node A into directory 1\r\n2) _now they need to rewrite SSTables to remove the dropped columns_ - this can be done against snapshot directory itself (Method 2). \r\n3) transfer SSTables to node B and import them without any other action needed\r\n\r\nHowever 2) would inflate the snapshot size if some SSTables contain columns to be dropped from header, because by rewriting, we would suddenly \"materialize\" otherwise hardlinked file.\r\n\r\nWhat method do you prefer? \r\n\r\nfor completeness:\r\n\r\n{code}\r\nCREATE KEYSPACE test2 WITH replication = {'class': 'SimpleStrategy', 'replication_factor': 1};\r\nCREATE TABLE test2.drop_test(id int primary key, message text, col_to_delete text);\r\nINSERT INTO test2.drop_test(id, message, col_to_delete) VALUES (1, 'test', 'delete me');\r\nALTER TABLE test.drop_test DROP col_to_delete;\r\nexit\r\n\r\n./bin/nodetool flush\r\n\r\n-> this will contain dropped columns in when inspected by sstablemetadata\r\n\r\non the other hand\r\n\r\nCREATE KEYSPACE test2 WITH replication = {'class': 'SimpleStrategy', 'replication_factor': 1};\r\nCREATE TABLE test2.drop_test(id int primary key, message text, col_to_delete text);\r\nINSERT INTO test2.drop_test(id, message, col_to_delete) VALUES (1, 'test', 'delete me');\r\nexit\r\n./bin/nodetool flush\r\nALTER TABLE test.drop_test DROP col_to_delete;\r\nINSERT INTO test2.drop_test(id, message) VALUES (1, 'test');\r\nexit\r\n./bin/nodetool flush\r\n\r\n-> this will not contain dropped column in the second SSTable\r\n{code}",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "created": "2025-11-14T13:16:41.284+0000",
            "updated": "2025-11-14T13:58:55.043+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633581/comment/18038345",
            "id": "18038345",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "body": "patch here https://github.com/apache/cassandra/pull/4474\r\n\r\nI spent a lot of time not touching anything else but just this path. ",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "created": "2025-11-14T13:19:01.168+0000",
            "updated": "2025-11-14T13:19:01.168+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633581/comment/18038346",
            "id": "18038346",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "body": "[~blambov] what do you think about this? Upgrading / rewriting SSTables goes through compaction path you know a lot about so your insights are indeed welcome. ",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "created": "2025-11-14T13:52:56.091+0000",
            "updated": "2025-11-14T13:52:56.091+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633581/comment/18038797",
            "id": "18038797",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=mortenjoenby",
              "name": "mortenjoenby",
              "key": "JIRAUSER305163",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34056",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34056",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34056",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34056"
              },
              "displayName": "Morten Joenby",
              "active": true,
              "timeZone": "Europe/Copenhagen"
            },
            "body": "[~smiklosovic], I am not sure I fully understand your fix as I am not that knowledgeable on the details.\r\n\r\nIt sounds like you only want to fix the snapshots, but why won't you \"allow\" us to fix the sstables (live metadata)?\r\n\r\nWe do these restores quite often which means that we will need to fix the snapshots every time. We would like to fix the sstables. Why would this be a problem?\r\nWe are not changing the schema (adding/dropping columns, removing tables) very often, but when we do, we want everything gone.\r\n\r\n... and thanks for looking into this!\r\n\r\nMorten",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=mortenjoenby",
              "name": "mortenjoenby",
              "key": "JIRAUSER305163",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34056",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34056",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34056",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34056"
              },
              "displayName": "Morten Joenby",
              "active": true,
              "timeZone": "Europe/Copenhagen"
            },
            "created": "2025-11-17T09:32:50.413+0000",
            "updated": "2025-11-17T09:35:35.728+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633581/comment/18038799",
            "id": "18038799",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "body": "hi [~mortenjoenby], I can definitely do that as well / this is also possible. It is just about the agreement we reach here. The most ideal outcome is to be able to rewrite this everywhere - both in snapshots as well as in live data if somebody really wants that to happen, I just find this operation a little bit risky, based on the comments above, so ...\r\n\r\n[~brandon.williams] would you be OK with the patch / approach as such? ",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "created": "2025-11-17T09:39:59.440+0000",
            "updated": "2025-11-17T09:40:29.050+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633581/comment/18038805",
            "id": "18038805",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=mortenjoenby",
              "name": "mortenjoenby",
              "key": "JIRAUSER305163",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34056",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34056",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34056",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34056"
              },
              "displayName": "Morten Joenby",
              "active": true,
              "timeZone": "Europe/Copenhagen"
            },
            "body": "BTW [~smiklosovic] , can this be merged to 4.1 as well as 5.0+ ?",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=mortenjoenby",
              "name": "mortenjoenby",
              "key": "JIRAUSER305163",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34056",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34056",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34056",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34056"
              },
              "displayName": "Morten Joenby",
              "active": true,
              "timeZone": "Europe/Copenhagen"
            },
            "created": "2025-11-17T10:36:29.646+0000",
            "updated": "2025-11-17T10:36:29.646+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633581/comment/18038825",
            "id": "18038825",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=brandon.williams",
              "name": "brandon.williams",
              "key": "brandon.williams",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=brandon.williams&avatarId=10054",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=brandon.williams&avatarId=10054",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=brandon.williams&avatarId=10054",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=brandon.williams&avatarId=10054"
              },
              "displayName": "Brandon Williams",
              "active": true,
              "timeZone": "America/Havana"
            },
            "body": "bq.  would you be OK with the patch / approach as such? \r\n\r\nI'm not going to review this, we should loop in someone more knowledgeable who understands how and why this is like this now.  [~mck] do you have any input here?",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=brandon.williams",
              "name": "brandon.williams",
              "key": "brandon.williams",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=brandon.williams&avatarId=10054",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=brandon.williams&avatarId=10054",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=brandon.williams&avatarId=10054",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=brandon.williams&avatarId=10054"
              },
              "displayName": "Brandon Williams",
              "active": true,
              "timeZone": "America/Havana"
            },
            "created": "2025-11-17T11:34:07.346+0000",
            "updated": "2025-11-17T11:34:07.346+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633581/comment/18038898",
            "id": "18038898",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=blambov",
              "name": "blambov",
              "key": "blambov",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Branimir Lambov",
              "active": true,
              "timeZone": "Europe/Sofia"
            },
            "body": "Do I understand correctly that the problem is that sstable files remember dropped columns for which they contain no data?\r\n\r\nI don't see a reason why this should be the case; the purpose of the columns definition in the sstable header is to be able to read the data correctly. If data for a column is not present, its definition should not be needed.\r\n\r\nThe database state itself, however, should not forget dropped column definitions, because this may cause problems when the column is recreated with a different type.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=blambov",
              "name": "blambov",
              "key": "blambov",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Branimir Lambov",
              "active": true,
              "timeZone": "Europe/Sofia"
            },
            "created": "2025-11-17T15:05:00.019+0000",
            "updated": "2025-11-17T15:05:00.019+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633581/comment/18038905",
            "id": "18038905",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "body": "I see it the same way, [~blambov], but then there is also this and I am not sure what was meant by that (1). Why not to just take the current state of columns in TableMetadata (as proposed in the patch) but we are instead of that adding all columns from all SSTables we go to compact? That will also contain the ones which were dropped in the meanwhile (as some SSTable to compact might contain columns in its header which were dropped by the time we hit this code execution). \r\n\r\nEDIT: ah wait ... we iterate over SSTables like that because these SSTables do not need to contain data for _current columns_.\r\n\r\nSSTable1 - columns a, b, c\r\nSSTAble 2 - columns a, b, c\r\nALTER TABLE add a column D\r\nSSTable 3 - columns a, b, c, d\r\n\r\nThen when that set of SSTables going into \"make\" method is just SSTable1 and 2, then we do not want to use the latest  columns for that table (a, b, c, d) because SSTable 1 and 2 actually do not contain it. \r\n\r\nI will manually run couple examples locally to see how it behaves under different conditions / scenarios like described above to verify.\r\n\r\n(1) https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/db/SerializationHeader.java#L93-L100",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "created": "2025-11-17T15:29:17.900+0000",
            "updated": "2025-11-17T15:44:08.644+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633581/comment/18039042",
            "id": "18039042",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=cam1982",
              "name": "cam1982",
              "key": "cam1982",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Cameron Zemek",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "> Do I understand correctly that the problem is that sstable files remember dropped columns for which they contain no data?\r\n\r\nYes\r\n\r\n\r\n\r\n> I don't see a reason why this should be the case; the purpose of the columns definition in the sstable header is to be able to read the data correctly. If data for a column is not present, its definition should not be needed.\r\n\r\nThat was my thoughts too. I don't see why a dropped column that not present in the Data.db component being needed in the serialization header.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=cam1982",
              "name": "cam1982",
              "key": "cam1982",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Cameron Zemek",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2025-11-18T02:40:04.477+0000",
            "updated": "2025-11-18T02:40:04.477+0000"
          }
        ],
        "maxResults": 19,
        "total": 19,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
        "name": "smiklosovic",
        "key": "smiklosovic",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
        },
        "displayName": "Stefan Miklosovic",
        "active": true,
        "timeZone": "Europe/Vienna"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13633265",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13633265",
    "key": "CASSANDRA-20999",
    "fields": {
      "summary": "Cassandra 4.0.18. Apache Commons Codec Base32 Decoding Invalid String Causing Tunneling Weakness",
      "created": "2025-11-04T06:45:45.000+0000",
      "description": "h1. Apache Commons Codec Base32 Decoding Invalid String Causing Tunneling Weakness",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633265/comment/18035226",
            "id": "18035226",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=Kaps_11",
              "name": "Kaps_11",
              "key": "kaps_11",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"
              },
              "displayName": "Kapil Shewate",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "Is Cassandra vulnerable to the above vulnerability reported in commons-codec-1.9.jar. [Apache Commons Codec information disclosure undefined Vulnerability Report|https://exchange.xforce.ibmcloud.com/vulnerabilities/177835]\r\n\r\n\r\n\r\nTheCVSS 3.0 Base Score is 7.5\r\n\r\n\r\n\r\n",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=Kaps_11",
              "name": "Kaps_11",
              "key": "kaps_11",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"
              },
              "displayName": "Kapil Shewate",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2025-11-04T06:48:43.999+0000",
            "updated": "2025-11-04T06:48:43.999+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633265/comment/18035326",
            "id": "18035326",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=brandon.williams",
              "name": "brandon.williams",
              "key": "brandon.williams",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=brandon.williams&avatarId=10054",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=brandon.williams&avatarId=10054",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=brandon.williams&avatarId=10054",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=brandon.williams&avatarId=10054"
              },
              "displayName": "Brandon Williams",
              "active": true,
              "timeZone": "America/Havana"
            },
            "body": "This only affects base32/64 and can be suppressed.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=brandon.williams",
              "name": "brandon.williams",
              "key": "brandon.williams",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=brandon.williams&avatarId=10054",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=brandon.williams&avatarId=10054",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=brandon.williams&avatarId=10054",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=brandon.williams&avatarId=10054"
              },
              "displayName": "Brandon Williams",
              "active": true,
              "timeZone": "America/Havana"
            },
            "created": "2025-11-04T12:41:43.718+0000",
            "updated": "2025-11-04T12:41:43.718+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13633265/comment/18035348",
            "id": "18035348",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=Kaps_11",
              "name": "Kaps_11",
              "key": "kaps_11",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"
              },
              "displayName": "Kapil Shewate",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "[~brandon.williams] Will the upcoming 4.0.x version of Cassandra upgrade the jar, I see the same jar commons-codec-1.9.jar in 4.0.19 as well.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=Kaps_11",
              "name": "Kaps_11",
              "key": "kaps_11",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"
              },
              "displayName": "Kapil Shewate",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2025-11-04T14:04:39.077+0000",
            "updated": "2025-11-04T14:04:39.077+0000"
          }
        ],
        "maxResults": 3,
        "total": 3,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13633187",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13633187",
    "key": "CASSANDRA-20998",
    "fields": {
      "summary": "Accord: Improve Topology Management",
      "created": "2025-11-03T14:00:50.000+0000",
      "description": "    Merge ConfigurationService with TopologyManager to remove cyclic dependency and duplicated work.\r\n    Also:\r\n     - Improve visibility of work blocking topology processing\r\n     - Ensure we cannot double-count peers when deciding an epoch's distributed readiness\r\n     - Remove the possibility of distributed stalls, by processing new topologies as soon as a\r\n       contiguous sequence is known locally, regardless of whether anyprior local epoch is ready to\r\n       coordinate or has recorded this fact to peers. The notification of local readiness continues\r\n       to be processed only once all prior epochs are ready, but we can begin using and readying\r\n       later epochs immediately.",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13633028",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13633028",
    "key": "CASSANDRA-20997",
    "fields": {
      "summary": "Support Java 21 and Python 3.13",
      "created": "2025-10-31T15:49:54.000+0000",
      "description": "Using the cassandra install for debian using the latest deb of 5.0.6, the database does not come up with JDK-21:\r\n\r\n{{java.lang.UnsupportedOperationException: The Security Manager is deprecated and will be removed in a future release}}\r\n\r\n\r\n\r\nThis can be fixed with\r\n\r\n{{JVM_EXTRA_OPTS=\"$JVM_EXTRA_OPTS -Djava.security.manager=allow\"}}\r\n\r\n{{in /etc/cassandra/cassandra-env.sh}}\r\n\r\nthen after {{systemctl restart cassandra}}\r\n\r\nthe `cqlsh` fails with\r\n\r\n{{Warning: unsupported version of Python, required 3.6-3.11 but found 3.13}}\r\n{{No appropriate Python interpreter found.}}\r\n\r\n\r\n\r\nI would like to see a project of this size to support a more recent technology stack as well.\r\n\r\nIs there any plan to fix these issues? Thanks!",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13632950",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13632950",
    "key": "CASSANDRA-20996",
    "fields": {
      "summary": "Auto-repair scheduler should use LWTs for all auto-repair history operations",
      "created": "2025-10-31T04:58:03.000+0000",
      "description": "The auto-repair scheduler seems to use LWTs only for a subset of the mutations on auto-repair history. This has lead to situations where we have one node trying to delete an entry from the auto-repair history and another node trying modify this entry at the same time. In the end, we end up with a corrupted entry in the auto-repair history.\r\n\r\nWe should fix this by making the auto-repair scheduler use LWTs for all auto-repair system table mutations.",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=kzalys",
        "name": "kzalys",
        "key": "JIRAUSER307489",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34043",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34043",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34043",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34043"
        },
        "displayName": "Kristijonas Zalys",
        "active": true,
        "timeZone": "Etc/UTC"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13632949",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13632949",
    "key": "CASSANDRA-20995",
    "fields": {
      "summary": "Auto-repair scheduler waits for repair interval to pass before cleaning up orphaned node history",
      "created": "2025-10-31T04:28:00.000+0000",
      "description": "When a node in the ring goes down, the auto-repair scheduler of all other nodes in the cluster start voting for this node's auto-repair history to be removed. Once >50% of the cluster vote to delete said down node, it's auto-repair history is deleted from the auto-repair system tables.\r\n\r\nThis cleanup process is important to maintain continuous execution of repair across the entire cluster. If a node goes down, it will no longer perform repair and will not update its repair history in the system tables. However, as it is still present in the auto-repair history table, the down node will still be considered as a candidate to run repair. As a result, it will occupy space in the auto-repair queue and in cases with low auto-repair parallelism may even completely block auto-repair within the cluster.\r\n\r\nThis is exactly what happened on of our small clusters where auto-repair parallelism was just one node at a time. A node got replaced but its repair history did not get cleaned up which caused the entire auto-repair system to grind to a halt.\r\n\r\nUpon investigation we found out that the root cause lies in the ordering of operations within the auto-repair scheduler:\r\n # The scheduler will check when was the last time the local node ran repair.\r\n # If that duration is lower than the repair interval, it will immediately short circuit.\r\n # Otherwise, it will proceed with computing the auto-repair queue and determining if it's the local node's turn to run repair.\r\n\r\nImportantly, the auto-repair history cleanup happens inside of the auto-repair queue algorithm. This means that a given node will clean up orphaned entries in auto-repair history only once its repair interval passes. For example: if you use auto-repair parallelism of 1 node and a repair interval of 24 hours, the orphaned data will not get cleaned up for up to 24 hours and consequently auto-repair may get stuck for up to 24 hours as well.\r\n\r\n",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13632949/comment/18036233",
            "id": "18036233",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "body": "[~chovatia.jaydeep@gmail.com] what do you think? Could you review?",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "created": "2025-11-07T13:19:40.136+0000",
            "updated": "2025-11-07T13:19:58.679+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13632949/comment/18036418",
            "id": "18036418",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=chovatia.jaydeep%40gmail.com",
              "name": "chovatia.jaydeep@gmail.com",
              "key": "chovatia.jaydeep@gmail.com",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Jaydeepkumar Chovatia",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "Sure [~smiklosovic], I will prioritize reviewing this.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=chovatia.jaydeep%40gmail.com",
              "name": "chovatia.jaydeep@gmail.com",
              "key": "chovatia.jaydeep@gmail.com",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Jaydeepkumar Chovatia",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2025-11-07T22:21:57.416+0000",
            "updated": "2025-11-07T22:21:57.416+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13632949/comment/18036427",
            "id": "18036427",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kzalys",
              "name": "kzalys",
              "key": "JIRAUSER307489",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34043",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34043",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34043",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34043"
              },
              "displayName": "Kristijonas Zalys",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "please hold off for a tiny bit. I still want to cleanup the PR description and such.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kzalys",
              "name": "kzalys",
              "key": "JIRAUSER307489",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34043",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34043",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34043",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34043"
              },
              "displayName": "Kristijonas Zalys",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2025-11-07T23:02:28.209+0000",
            "updated": "2025-11-07T23:02:28.209+0000"
          }
        ],
        "maxResults": 3,
        "total": 3,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=kzalys",
        "name": "kzalys",
        "key": "JIRAUSER307489",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34043",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34043",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34043",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34043"
        },
        "displayName": "Kristijonas Zalys",
        "active": true,
        "timeZone": "Etc/UTC"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13632922",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13632922",
    "key": "CASSANDRA-20994",
    "fields": {
      "summary": "Drop commons-lang3 dependency",
      "created": "2025-10-30T19:11:21.000+0000",
      "description": "Currently Cassandra uses only a few classes from commons-lang3, and it would probably be worth dropping the dependency for the following reasons:\r\n1) Better security. {{commons-*}} follows \"all features in a single jar\" pattern, so a CVE in one of the classes would impact Cassandra\r\n2) Fewer bytes to ship with binary distribution. `commons-lang3` is ~690K\r\n\r\nI have raised a suggestion to make {{commons-lang3}} modular and extract modules like {{commons-stringutils}}, {{commons-arrayutils}}, however, Commons team does not seem to like the idea.\r\nCommons PMC members often suggest that users should clone the code or shade commons-lang, see https://lists.apache.org/thread/xzdhv57o9rnxtzn5fqbtkzj0hdkbm339\r\n\r\nSo I wonder what do you think of dropping commons-lang3 and replacing it with core Java?",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13632922/comment/18034254",
            "id": "18034254",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "body": "Could you please ask on Cassandra's development mailing list? I think it is better to be discussed there.\r\n\r\nhttps://cassandra.apache.org/_/community.html#discussions\r\n\r\nCould you also say what you want to replace and with what exactly? (please do so on ML).",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=smiklosovic",
              "name": "smiklosovic",
              "key": "smiklosovic",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Stefan Miklosovic",
              "active": true,
              "timeZone": "Europe/Vienna"
            },
            "created": "2025-10-30T20:25:17.417+0000",
            "updated": "2025-10-30T20:25:17.417+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13632922/comment/18034268",
            "id": "18034268",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=dnk",
              "name": "dnk",
              "key": "dnk",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dnk&avatarId=53432",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dnk&avatarId=53432",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dnk&avatarId=53432",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dnk&avatarId=53432"
              },
              "displayName": "Dmitry Konstantinov",
              "active": true,
              "timeZone": "Europe/London"
            },
            "body": "Usages of commons-lang3, unfortunately it is not only StringUtils:\r\n{code:java}\r\n grep -r \"org.apache.commons.lang3\" --no-filename | sort | uniq  \r\nimport org.apache.commons.lang3.ArrayUtils;\r\nimport org.apache.commons.lang3.ObjectUtils;\r\nimport org.apache.commons.lang3.StringUtils;\r\nimport org.apache.commons.lang3.builder.EqualsBuilder;\r\nimport org.apache.commons.lang3.builder.HashCodeBuilder;\r\nimport org.apache.commons.lang3.builder.ToStringBuilder;\r\nimport org.apache.commons.lang3.builder.ToStringStyle;\r\nimport org.apache.commons.lang3.exception.ExceptionUtils;\r\nimport org.apache.commons.lang3.math.NumberUtils;\r\nimport org.apache.commons.lang3.mutable.Mutable;\r\nimport org.apache.commons.lang3.mutable.MutableByte;\r\nimport org.apache.commons.lang3.mutable.MutableDouble;\r\nimport org.apache.commons.lang3.mutable.MutableFloat;\r\nimport org.apache.commons.lang3.mutable.MutableInt;\r\nimport org.apache.commons.lang3.mutable.MutableLong;\r\nimport org.apache.commons.lang3.mutable.MutableShort;\r\nimport org.apache.commons.lang3.text.StrBuilder;\r\nimport org.apache.commons.lang3.time.DurationFormatUtils;\r\nimport org.apache.commons.lang3.tuple.ImmutableTriple;\r\nimport org.apache.commons.lang3.tuple.Pair;\r\nimport org.apache.commons.lang3.tuple.Triple;\r\nimport static org.apache.commons.lang3.ArrayUtils.EMPTY_STRING_ARRAY;\r\nimport static org.apache.commons.lang3.ArrayUtils.isEmpty;\r\nimport static org.apache.commons.lang3.StringUtils.EMPTY;\r\nimport static org.apache.commons.lang3.StringUtils.isEmpty;\r\nimport static org.apache.commons.lang3.StringUtils.isNotEmpty;\r\nimport static org.apache.commons.lang3.StringUtils.join;\r\nimport static org.apache.commons.lang3.time.DateUtils.MILLIS_PER_DAY;\r\nimport static org.apache.commons.lang3.time.DurationFormatUtils.formatDurationWords;\r\n{code}",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=dnk",
              "name": "dnk",
              "key": "dnk",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dnk&avatarId=53432",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dnk&avatarId=53432",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dnk&avatarId=53432",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dnk&avatarId=53432"
              },
              "displayName": "Dmitry Konstantinov",
              "active": true,
              "timeZone": "Europe/London"
            },
            "created": "2025-10-30T21:57:54.024+0000",
            "updated": "2025-10-30T21:57:54.024+0000"
          }
        ],
        "maxResults": 2,
        "total": 2,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/10002",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Normal",
        "id": "10002"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/10722",
        "description": "",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/generic.png",
        "name": "Triage Needed",
        "id": "10722",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  }
]