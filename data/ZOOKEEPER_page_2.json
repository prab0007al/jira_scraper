[
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13607832",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13607832",
    "key": "ZOOKEEPER-4895",
    "fields": {
      "summary": "Introduce a helper function for C client to generate password for SASL authentication",
      "created": "2025-02-08T04:21:58.000+0000",
      "description": "C client has provided zoo_sasl_make_basic_callbacks() function to help users initialize SASL callbacks with the password in the specified file. The client would use this password directly for SASL authentication.\r\n\r\nHowever, considering the security of the production environment, the password in a file is usually encrypted. Also, security software also scans files in the system and will issue an alert if it detects an unencrypted password. Therefore, we need a mechanism to read the encrypted text from the file and decrypt it to obtain the real password.\r\n\r\nTo achieve this, a helper function is introduced to decrypt the encrypted text in the file using a user-provided custom callback. A handback object is also introduced to provide necessary information for the decryption.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13607832/comment/17925132",
            "id": "17925132",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=wangdan",
              "name": "wangdan",
              "key": "JIRAUSER292455",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=JIRAUSER292455&avatarId=52737",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=JIRAUSER292455&avatarId=52737",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=JIRAUSER292455&avatarId=52737",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=JIRAUSER292455&avatarId=52737"
              },
              "displayName": "Dan Wang",
              "active": true,
              "timeZone": "Asia/Shanghai"
            },
            "body": "For the pull request please see https://github.com/apache/zookeeper/pull/2223.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=wangdan",
              "name": "wangdan",
              "key": "JIRAUSER292455",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=JIRAUSER292455&avatarId=52737",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=JIRAUSER292455&avatarId=52737",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=JIRAUSER292455&avatarId=52737",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=JIRAUSER292455&avatarId=52737"
              },
              "displayName": "Dan Wang",
              "active": true,
              "timeZone": "Asia/Shanghai"
            },
            "created": "2025-02-08T04:24:44.754+0000",
            "updated": "2025-02-08T04:24:44.754+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13607832/comment/17938166",
            "id": "17938166",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "body": "Issue resolved by pull request 2223\n[https://github.com/apache/zookeeper/pull/2223]",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "created": "2025-03-25T10:13:49.576+0000",
            "updated": "2025-03-25T10:13:49.576+0000"
          }
        ],
        "maxResults": 2,
        "total": 2,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=wangdan",
        "name": "wangdan",
        "key": "JIRAUSER292455",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=JIRAUSER292455&avatarId=52737",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=JIRAUSER292455&avatarId=52737",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=JIRAUSER292455&avatarId=52737",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=JIRAUSER292455&avatarId=52737"
        },
        "displayName": "Dan Wang",
        "active": true,
        "timeZone": "Asia/Shanghai"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Minor",
        "id": "4"
      },
      "labels": [
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
        "name": "Closed",
        "id": "6",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13607198",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13607198",
    "key": "ZOOKEEPER-4894",
    "fields": {
      "summary": "Update logback-core-1.2.13.jar to fix CVE-2024-12798",
      "created": "2025-02-04T01:24:17.000+0000",
      "description": "zookeeper v3.9.3 has security vulnerability for logback-core-1.2.13.jar due to CVE-2024-12798 Awaiting analysis:\r\n\r\n[https://nvd.nist.gov/vuln/detail/CVE-2024-12798] \r\n{*}Fix Required{*}:\r\nupgrade to *logback-core:1.3.15* in latest zookeeper",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=cnauroth",
        "name": "cnauroth",
        "key": "cnauroth",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"
        },
        "displayName": "Chris Nauroth",
        "active": true,
        "timeZone": "America/Los_Angeles"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/5",
        "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
        "name": "Resolved",
        "id": "5",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13607169",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13607169",
    "key": "ZOOKEEPER-4893",
    "fields": {
      "summary": "Excessive reconection delays due to hardcoded sleep intervals",
      "created": "2025-02-03T19:30:43.000+0000",
      "description": "*Description*\r\nI'll try to explain our issue as clearly as I can.\r\nSome clients take too long to reconnect to a ZooKeeper cluster after a minor downtime. We have identified two hardcoded sleep intervals in the client connection logic that contribute to this issue, but they cannot be configured. Spending several seconds in this disconnected state, even though the cluster is up and healthy is an issue in our setup.\r\n\r\n*These are the two Thread.sleep() which I am referring to*\r\n1. Random sleep (0-1000ms) before attempting a new connection:\r\n    * [ClientCnxn.java#L1138 (release-3.9.3)|https://github.com/apache/zookeeper/blob/release-3.9.3/zookeeper-server/src/main/java/org/apache/zookeeper/ClientCnxn.java#L1138]\r\n2. Fixed 1000ms sleep before reconnecting to the last known server:\r\n    * [StaticHostProvider#L363 (release-3.9.3)|https://github.com/apache/zookeeper/blob/release-3.9.3/zookeeper-server/src/main/java/org/apache/zookeeper/client/StaticHostProvider.java#L362]\r\n\r\n*Example Scenario*\r\nConsider a three-node ZooKeeper cluster (node01, node02, node03) where node01 is currently the leader.\r\n1. Event: Node01 is temporarily taken down for short maintenance (e.g. for security patching).\r\n2. Result: The remaining nodes (node02 and node03) elect a new leader, completing within ~1000ms.\r\n3. Client (that was connected to node01) behavior (worst-case scenario):\r\n    * Connection to node01 is lost → client enters a suspended state.\r\n    * Waits 500ms, attempts connection to node02 → fails (cluster not ready).\r\n    * Waits 499ms, attempts connection to node03 → fails (cluster still not ready).\r\n    * Waits 1000ms as we are now back to original node01 (sleep #2 in the list above)\r\n    * Waits 1000ms before connecting to node01 -> fails (this node is down for maintenance)\r\n    * Waits 1000ms before retrying node02 → finally succeeds.\r\n4. Total reconnection time: ~4 seconds, despite the cluster being available after just 1 second.\r\n\r\n*Impact*\r\n* Clients remain in a suspended state longer than necessary, leading to degraded service availability.\r\n* The reconnection delay is artificially inflated due to hardcoded sleeps.\r\n\r\n*Suggested improvement*\r\n* Give the user an option to provide our own logic for how long we should sleep before retry. It could be making these sleep intervals configurable, but even better would be to be able to provide our own implementation of the waiting logic.\r\n\r\n*Offer to contribute*\r\nWe would be happy to submit a pull request to address this issue if that would be helpful. Please let us know if a contribution would be welcomed and if you have any guidance on the preferred approach.\r\nWould appreciate any insights from the maintainers. Thanks!\r\n\r\n ",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/1",
        "description": "The issue is open and ready for the assignee to start work on it.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
        "name": "Open",
        "id": "1",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13606315",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13606315",
    "key": "ZOOKEEPER-4892",
    "fields": {
      "summary": "Inconsistency of the quorum rule of the leader election process between the Zookeeper implmentation and specification.",
      "created": "2025-01-27T02:05:58.000+0000",
      "description": "It seems the quorum rule of the leader election process between the Zookeeper implmentation and specification is inconsistent.\r\n\r\nIn {*}implementation{*}, according to the code in the _FastLeaderElection_\r\nclass, a node maintains the votes of all nodes in the cluster it considers through a `recvset` (which are modeled into _receiveVotes_ variable in the specification). At the same time, it maintains its own vote through the variables {_}proposedLeader{_}, {_}proposedZxid{_}, and _proposedEpoch_ (which are modeled into _currentVote_ variable in the specification). The quorum rule is that when there are votes from a majority of the nodes in the _recvset_ that match its own vote ({_}proposedLeader{_}, {_}proposedZxid{_}, and _proposedEpoch_) , the node considers the quorum rule is satisfied and moves to the next stage of the election.\r\n\r\nRelated codes:\r\n{code:java}\r\n// Line 761-780 in FastLeaderElection.java\r\nprotected SyncedLearnerTracker getVoteTracker(Map<Long, Vote> votes, Vote vote) {\r\n        ....\r\n        for (Map.Entry<Long, Vote> entry : votes.entrySet()) {\r\n            if (vote.equals(entry.getValue())) {\r\n                voteSet.addAck(entry.getKey());\r\n            }\r\n        }\r\n        return voteSet;\r\n}\r\n\r\n// Line 1045 in FastLeaderElection.java\r\nvoteSet = getVoteTracker(recvset, new Vote(proposedLeader, proposedZxid, logicalclock.get(), proposedEpoch));\r\n{code}\r\nIn {*}specification{*}, according to the action _FLEHandleNotmsg_ and _HandleNotmsg_, the node itself is initially included in the set of nodes that have reached consensus. Then, the specification checks whether the votes from other nodes in the _rreceiveVotes_ match the node's _currentVote_. If the number of nodes whose votes match the node's _currentVote_ reaches a majority with the node itself, the quorum is considered reached.\r\n\r\nRelated codes:\r\n{code:java}\r\n\\* Line 216-222 in FastLeaderElection.tla.\r\nVoteSet(i, msource, rcvset, thisvote, thisround) == \\{msource} \\union \\{s \\in (Server \\ {msource}): VoteEqual(rcvset[s].vote,\r\n                                                                                                            rcvset[s].round,\r\n                                                                                                            thisvote,\r\n                                                                                                            thisround)}\r\n\r\nHasQuorums(i, msource, rcvset, thisvote, thisround) == LET Q == VoteSet(i, msource, rcvset, thisvote, thisround)\r\n                                                       IN IF Q \\in Quorums THEN TRUE ELSE FALSE\r\n\r\n\\* Line 433 in HandleNotmsg action of FastLeaderElection.tla.\r\n/\\ LET hasQuorums == HasQuorums(i, i, receiveVotes'[i], currentVote'[i], n.mround)\r\n{code}\r\n\r\n\r\nWe can see that these two mechanisms are not entirely consistent. Consider the following three-node scenario:\r\n\r\n1. The cluster starts, and at this point, node 1's _recvset_ contains votes from nodes 1, 2, and 3, all of which are initial votes (denoted as `InitialVote`).\r\n2. Node 3 sends a _Notification-1_ (leader=N3, zxid=1, electionEpoch=1) to nodes 1, 2, and 3.\r\n3. Node 1 receives _Notification-1_ from node 3.\r\n4. Node 1 updates its vote to _Notification-1_ and sends _Notification-1_ to nodes 1, 2, and 3 again.\r\n5. Node 1 updates its _recvset_. At this point, node 1's `recvset` is \\{N1: _InitialVote_, N2: _InitialVote_, N3: _Notification-1_}.\r\n6. According to the specification, node 1 now believes that quorom nodes have reached consensus. However, according to the implementation, node 1 needs to receive the _Notification-1_ sent by itself in step 4 and update its _recvset_ (i.e., node 1's vote in the `recvset` must also be set to _Notification-1_) before it can consider the quorum reached.\r\n\r\nThis figure \"Inconsistency in quorom rule.png\" in attachment shows the system state after step 5 more detailedly.\r\n\r\nI noticed that in the current version of the TLA+ specification, developers are attempting to avoid modeling the process of a node sending a message to itself and processing its own message. However, this simplification seems to lead to:\r\n1. Inconsistencies between key algorithms in the specification and the implementation. In the example above, the inconsistent quorum rule caused me some confusion when I read the code.\r\n2. Omission of some test scenarios. In the example above, There are some possible concurrent behaviors in the cluster after step 5 but before node 1 receives its own `Notification` and updates its `recvset` in step 6. These concurrent behaviors cannot be verified with the current version of the specification.\r\n\r\nI believe this issue can be fixed with the following two possible solutions:\r\n\r\n1. *Simpler solution*: In the _HandleNotmsg\\(i\\)_ action of the specification, update _receiveVotes[i]_ after performing `UpdateProposal\\(i\\)`. Then, modify the _HasQuorums_ action to match the implementation's quorum rule.\r\n   \r\n2. *Complete solution*: Modify the _BroadcastNotmsg_ action in the specification to include _Notification_ messages sent to itself in the _recvqueue_, as is actually in the implementation (currently, the specification directly ignores such messages). Also, improve the handling logic for these types of messages in _FLEReceiveNotmsg_ and _FLEHandleNotmsg_ actions. Finally, modify the _HasQuorums_ action to match the implementation's quorum rule.\r\n\r\nIf this issue is confirmed, I would be happy to provide a PR.",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/1",
        "description": "The issue is open and ready for the assignee to start work on it.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
        "name": "Open",
        "id": "1",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13605684",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13605684",
    "key": "ZOOKEEPER-4891",
    "fields": {
      "summary": "Update logback to 1.3.15 to fix CVE-2024-12798.",
      "created": "2025-01-21T06:32:12.000+0000",
      "description": "This is addressed in Logback 1.3.15:\r\n\r\n[https://nvd.nist.gov/vuln/detail/CVE-2024-12798]",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13605684/comment/17927207",
            "id": "17927207",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=cnauroth",
              "name": "cnauroth",
              "key": "cnauroth",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"
              },
              "displayName": "Chris Nauroth",
              "active": true,
              "timeZone": "America/Los_Angeles"
            },
            "body": "I have committed this to master.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=cnauroth",
              "name": "cnauroth",
              "key": "cnauroth",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"
              },
              "displayName": "Chris Nauroth",
              "active": true,
              "timeZone": "America/Los_Angeles"
            },
            "created": "2025-02-14T18:01:52.792+0000",
            "updated": "2025-02-14T18:01:52.792+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=cnauroth",
        "name": "cnauroth",
        "key": "cnauroth",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"
        },
        "displayName": "Chris Nauroth",
        "active": true,
        "timeZone": "America/Los_Angeles"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
        "name": "Closed",
        "id": "6",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13599957",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13599957",
    "key": "ZOOKEEPER-4890",
    "fields": {
      "summary": "Update Netty to fix CVE-2024-47535",
      "created": "2024-11-25T19:53:16.000+0000",
      "description": "Please, upgrade Jetty version to 4.1.115.Final in order to fix CVE-2024-47535.\r\n\r\nPull request: [https://github.com/apache/zookeeper/pull/2212]\r\n\r\n ",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=robsonselzelin",
        "name": "robsonselzelin",
        "key": "JIRAUSER307867",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
        },
        "displayName": "Robson Selzelin Braga",
        "active": true,
        "timeZone": "America/Toronto"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
        "name": "Closed",
        "id": "6",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13599833",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13599833",
    "key": "ZOOKEEPER-4889",
    "fields": {
      "summary": "Fallback to DIGEST-MD5 auth mech should be disabled in Fips mode",
      "created": "2024-11-24T15:54:25.000+0000",
      "description": "FIPS doesn't allow using MD5 algorithm, so it should be disabled at all times. When we create SASL client there's a fallback code path: if Kerberos doesn't work for some reason, we try to use DIGEST-MD5 mech instead. We already have a fips-mode property, so let's disable this code patch if the property is enabled.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13599833/comment/17901245",
            "id": "17901245",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
              "name": "andor",
              "key": "andorm",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
              },
              "displayName": "Andor Molnar",
              "active": true,
              "timeZone": "Europe/Budapest"
            },
            "body": "Issue resolved by pull request 2215\n[https://github.com/apache/zookeeper/pull/2215]",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
              "name": "andor",
              "key": "andorm",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
              },
              "displayName": "Andor Molnar",
              "active": true,
              "timeZone": "Europe/Budapest"
            },
            "created": "2024-11-26T15:55:57.777+0000",
            "updated": "2024-11-26T15:55:57.777+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
        "name": "andor",
        "key": "andorm",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
        },
        "displayName": "Andor Molnar",
        "active": true,
        "timeZone": "Europe/Budapest"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [
        "FIPS",
        "SASL",
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
        "name": "Closed",
        "id": "6",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13599621",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13599621",
    "key": "ZOOKEEPER-4888",
    "fields": {
      "summary": "Issues with TLS post upgrade from 3.9.1 to 3.9.2",
      "created": "2024-11-22T02:22:00.000+0000",
      "description": "We upgraded Zookeeper ensemble from 3.9.1 to 3.9.2. TLS (node-node, client-node) is enabled before upgrade. Everything was working fine before upgrade.\r\n\r\nPost upgrade ->\r\n # Stopped everything (all ZK nodes)\r\n # Started all ZK nodes\r\n # Checked if SSL is happening between ZK nodes is fine or not\r\n # Its confirmed that SSL is working fine between ZK nodes.\r\n # Now started just one instance of client application\r\n # Post that we see intermittent successful & unsuccessful handshake messages in ZK logs. \r\n\r\n*ZK server side, we see below messages:*\r\n\r\n2024-11-21 13:28:15,586 [myid:] - DEBUG [epollEventLoopGroup-4-9:o.a.z.c.X509Util@599] - FIPS mode is ON: selecting standard x509 trust manager com.ibm.jsse2.br@4362299c\r\n2024-11-21 13:28:15,586 [myid:] - DEBUG [epollEventLoopGroup-4-9:o.a.z.c.X509Util@644] - Using Java8 optimized cipher suites for Java version 1.8\r\n2024-11-21 13:28:15,588 [myid:] - DEBUG [epollEventLoopGroup-4-9:o.a.z.s.NettyServerCnxnFactory@596] - SSL handler added for channel: [id: 0x2443db1c, L:/10.1.10.50:2181 - R:/10.1.10.46:57272]\r\n2024-11-21 13:28:15,620 [myid:] - DEBUG [epollEventLoopGroup-4-9:o.a.z.s.NettyServerCnxnFactory$CertificateVerifier@415] - *Successful handshake with session 0x0*\r\n2024-11-21 13:28:15,620 [myid:] - DEBUG [epollEventLoopGroup-4-9:i.n.h.s.SslHandler@1934] - [id: 0x2443db1c, L:/10.1.10.50:2181 - R:/10.1.10.46:57272] HANDSHAKEN: protocol:TLSv1.3 cipher suite:TLS_AES_256_GCM_SHA384\r\n2024-11-21 13:28:15,622 [myid:] - DEBUG [epollEventLoopGroup-4-9:o.a.z.s.NettyServerCnxnFactory$CnxnChannelHandler@350] - New message PooledUnsafeDirectByteBuf(ridx: 0, widx: 4, cap: 42) from [id: 0x2443db1c, L:/10.1.10.50:2181 - R:/10.1.10.46:57272]\r\n2024-11-21 13:28:15,622 [myid:] - DEBUG [epollEventLoopGroup-4-9:o.a.z.s.NettyServerCnxn@368] - 0x0 queuedBuffer: null\r\n2024-11-21 13:28:15,622 [myid:] - DEBUG [epollEventLoopGroup-4-9:o.a.z.s.NettyServerCnxn@386] - not throttled\r\n2024-11-21 13:28:15,623 [myid:] - INFO  [epollEventLoopGroup-4-9:o.a.z.s.NettyServerCnxn@311] - Processing mntr command from /10.1.10.46:57272\r\n2024-11-21 13:28:15,642 [myid:] - DEBUG [epollEventLoopGroup-4-9:o.a.z.s.NettyServerCnxn@113] - close called for session id: 0x0\r\n2024-11-21 13:28:15,642 [myid:] - DEBUG [epollEventLoopGroup-4-9:o.a.z.s.NettyServerCnxn@131] - close in progress for session id: 0x0\r\n2024-11-21 13:28:15,644 [myid:] - DEBUG [epollEventLoopGroup-4-9:o.a.z.s.NettyServerCnxn@113] - close called for session id: 0x0\r\n2024-11-21 13:28:15,644 [myid:] - DEBUG [epollEventLoopGroup-4-9:o.a.z.s.NettyServerCnxn@124] - cnxns size:0\r\n\r\n2024-11-21 13:28:17,155 [myid:] - DEBUG [epollEventLoopGroup-4-10:o.a.z.c.X509Util@599] - FIPS mode is ON: selecting standard x509 trust manager com.ibm.jsse2.br@a5cca67c\r\n2024-11-21 13:28:17,156 [myid:] - DEBUG [epollEventLoopGroup-4-10:o.a.z.c.X509Util@644] - Using Java8 optimized cipher suites for Java version 1.8\r\n2024-11-21 13:28:17,158 [myid:] - DEBUG [epollEventLoopGroup-4-10:o.a.z.s.NettyServerCnxnFactory@596] - SSL handler added for channel: [id: 0xb818882d, L:/10.1.10.50:2181 - R:/10.1.10.46:57276]\r\n2024-11-21 13:28:17,161 [myid:] - ERROR [epollEventLoopGroup-4-10:o.a.z.s.NettyServerCnxnFactory$CertificateVerifier@466] - *Unsuccessful handshake with session 0x0*\r\n2024-11-21 13:28:17,161 [myid:] - DEBUG [epollEventLoopGroup-4-10:o.a.z.s.NettyServerCnxn@113] - close called for session id: 0x0\r\n2024-11-21 13:28:17,162 [myid:] - DEBUG [epollEventLoopGroup-4-10:o.a.z.s.NettyServerCnxn@124] - cnxns size:0\r\n2024-11-21 13:28:17,163 [myid:] - DEBUG [epollEventLoopGroup-4-10:o.a.z.s.NettyServerCnxn@113] - close called for session id: 0x0\r\n2024-11-21 13:28:17,163 [myid:] - DEBUG [epollEventLoopGroup-4-10:o.a.z.s.NettyServerCnxn@124] - cnxns size:0\r\n\r\n \r\n\r\n*At client side, we see below message intermittently.*\r\n\r\n17:37:43.878 [pool-7-thread-1-SendThread(10.1.10.50:2181)] WARN org.apache.zookeeper.ClientCnxn - Session 0x0 for server bdc-dev1807.in.syncsort.dev/10.1.10.50:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.\r\norg.apache.zookeeper.ClientCnxn$EndOfStreamException: channel for sessionid 0x0 is lost\r\n        at org.apache.zookeeper.ClientCnxnSocketNetty.doTransport(ClientCnxnSocketNetty.java:287)\r\n        at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1274)\r\n\r\n*We also see successful SSL connections from client side as well*\r\n\r\nINFO: Connected via SSL to server : 10.1.10.50 @ port : 2181\r\nNov 21, 2024 5:46:04 PM com.ibm.mailbox.zkwatchdog.ZKCommandClient connect\r\nINFO: Connected via SSL to server : 10.1.10.46 @ port : 2181\r\nNov 21, 2024 5:46:09 PM com.ibm.mailbox.zkwatchdog.ZKCommandClient connect\r\nINFO: Connected via SSL to server : 10.1.10.46 @ port : 2181\r\nNov 21, 2024 5:46:09 PM com.ibm.mailbox.zkwatchdog.ZKCommandClient connect\r\nINFO: Connected via SSL to server : 10.1.10.50 @ port : 2181\r\nNov 21, 2024 5:46:14 PM com.ibm.mailbox.zkwatchdog.ZKCommandClient connect\r\nINFO: Connected via SSL to server : 10.1.10.46 @ port : 2181\r\nNov 21, 2024 5:46:14 PM com.ibm.mailbox.zkwatchdog.ZKCommandClient connect\r\nINFO: Connected via SSL to server : 10.1.10.50 @ port : 2181\r\n\r\n*We have not set  any TLS protocol version or Ciphers at client or server side.*\r\n\r\n*We are using IBM JDK 8.*\r\n\r\nPlease help troubleshoot this issue",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13599621/comment/17900336",
            "id": "17900336",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=jeetennalawade",
              "name": "jeetennalawade",
              "key": "JIRAUSER307838",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Jeetendra N",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "We have one more observation. Configured client to use TLS 1.3 and no issues observed.\r\n\r\nzkclient.ssl.protocol=TLSv1.3\r\nzkclient.ssl.ciphers=TLS_AES_256_GCM_SHA384,TLS_CHACHA20_POLY1305_SHA256,TLS_AES_128_GCM_SHA256\r\n\r\nNo changes made at ZK server side.\r\n\r\nThis seems a behavior change from ZK 3.9.1 to 3.9.2 (In our environment, we used same IBM JDK 8  for 3.9.1 and 3.9.2). With 3.9.1, it was working without any of the changes. With 3.9.2, does it only allows only TLS 1.3 out of the box and need to be configured explicitly to use other TLS versions?\r\n\r\n ",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=jeetennalawade",
              "name": "jeetennalawade",
              "key": "JIRAUSER307838",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Jeetendra N",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2024-11-22T11:27:46.540+0000",
            "updated": "2024-11-22T11:27:46.540+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13599621/comment/17901717",
            "id": "17901717",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=aayushgupta",
              "name": "aayushgupta",
              "key": "JIRAUSER307837",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Aayush Gupta",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "Please find the attached zookeeper.out logs. There is no error printing around these logs. \r\nThe unsuccessful handshake doesn't print any error logs around it.\r\nUnsuccessful handshake error is coming intermittently. \r\n\r\nAt line #130135 : you can see the Unsuccessful handshake\r\nAt line #130143 : You can see a successful handshake. \r\n\r\n\r\nWhat's the client's version?  -> We are using the same zookeeper version at the client side (3.9.2). \r\nWe didn't change the configuration in the zoo.cfg file during upgrade. \r\n\r\nYou can find the below logs as well in the log file attached to this email at line #7 . \r\n2024-11-28 13:59:45,908 [myid:] - INFO  [main:o.a.z.c.X509Util@110] - Default TLS protocol is TLSv1.3, supported TLS protocols are [TLSv1.3, TLSv1.2, TLSv1.1, TLSv1, SSLv2Hello]",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=aayushgupta",
              "name": "aayushgupta",
              "key": "JIRAUSER307837",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Aayush Gupta",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2024-11-28T13:12:22.579+0000",
            "updated": "2024-11-28T13:12:22.579+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13599621/comment/17901732",
            "id": "17901732",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=guminy",
              "name": "guminy",
              "key": "guminy",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Scott Guminy",
              "active": true,
              "timeZone": "America/New_York"
            },
            "body": "[~andor] \r\n\r\nI work with Aayush and Jeetendra.  I investigated this a bit more and have some ideas on the cause of this issue.\r\n\r\nThe IBM JDK uses different cipher names internally compared to other JDK implementations.  You can see that information here [https://www.ibm.com/docs/en/sdk-java-technology/8?topic=suites-cipher]  Specifically some cipher names start with SSL_ instead of TLS_.  If you call SSLServerSocketFactory.getDefault()).getSupportedCipherSuites(), these ciphers will be returned with SSL_.\r\n\r\nWhy is this a problem for ZooKeeper?\r\n\r\nIn X509Util, there are several methods that return lists of ciphers that ZK wants to use (getTLSv13Ciphers, getGCMCiphers, getCBCCiphers).  These ciphers start with TLS_.  Later in the getSupportedCiphers method, ZK filters out unsupported ciphers by comparing the hardcoded lists to what the JDK's  SSLServerSocketFactory.getDefault()).getSupportedCipherSuites() method returns.  For the IBM JDK, there's little overlap due to the naming differences, and this results in no TLS 1.2 ciphers in the list.  This makes it impossible for any clients to connect with TLS 1.2.\r\n\r\nThe solution is to add the SSL_ ciphers in the getTLSv13Ciphers (maybe not needed), getGCMCiphers, getCBCCiphers methods, to properly support the IBM JDK.  Or an even better would be to not hardcode any ciphers.  This will be helpful for longer term maintenance of this code (new ciphers added, new TLS versions added, etc).",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=guminy",
              "name": "guminy",
              "key": "guminy",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Scott Guminy",
              "active": true,
              "timeZone": "America/New_York"
            },
            "created": "2024-11-28T14:07:09.836+0000",
            "updated": "2024-11-28T14:11:32.911+0000"
          }
        ],
        "maxResults": 3,
        "total": 3,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
        "name": "andor",
        "key": "andorm",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
        },
        "displayName": "Andor Molnar",
        "active": true,
        "timeZone": "Europe/Budapest"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/1",
        "description": "The issue is open and ready for the assignee to start work on it.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
        "name": "Open",
        "id": "1",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13599221",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13599221",
    "key": "ZOOKEEPER-4887",
    "fields": {
      "summary": "Zookeeper quorum formation fails when TLS is enabled in k8s env",
      "created": "2024-11-19T08:07:23.000+0000",
      "description": "We have three(3) node zookeeper cluster running as a pod on Kubernetes cluster, zookeeper quorum formation fails with TLS handshake error, as the server name in the https request does not match with any of the SANs in the certificate configured for zookeeper server. Server name in the request is of the form \"x-x-x-x.kubernetes.default.svc.cluster.local\" (where x-x-x-x is the IP address of the POD), and I am unable to understand the reason behind pre-pending FQDN with a IP address.\r\n\r\n \r\n\r\nPlease find below the extract of the error logs from the zookeeper POD\r\n{code:java}\r\n[myid:] - ERROR [LearnerHandler-/192.168.220.10:46516:o.a.z.c.ZKTrustManager@191] - Failed to verify host address: 192.168.220.10\r\njavax.net.ssl.SSLPeerUnverifiedException: Certificate for <192.168.220.10> doesn't match any of the subject alternative names: [eric-data-coordinator-zk, eric-data-coordinator-zk.zdhagxx1, eric-data-coordinator-zk.zdhagxx1.svc, eric-data-coordinator-zk.zdhagxx1.svc.cluster.local, *.eric-data-coordinator-zk-ensemble-service.zdhagxx1.svc.cluster.local, certified-scrape-target]\r\norg.apache.zookeeper.common.ZKHostnameVerifier.matchIPAddress(ZKHostnameVerifier.java:197)\r\norg.apache.zookeeper.common.ZKHostnameVerifier.verify(ZKHostnameVerifier.java:165)\r\norg.apache.zookeeper.common.ZKTrustManager.performHostVerification(ZKTrustManager.java:180)\r\norg.apache.zookeeper.common.ZKTrustManager.checkClientTrusted(ZKTrustManager.java:93)\r\njava.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.checkClientCerts(CertificateMessage.java:1285)\r\njava.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.onConsumeCertificate(CertificateMessage.java:1204)\r\njava.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.consume(CertificateMessage.java:1181)\r\njava.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:392)\r\njava.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:443)\r\njava.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:421)\r\njava.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:183) \r\njava.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:172)\r\njava.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1511)\r\njava.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1421)\r\njava.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:456)\r\njava.base/sun.security.ssl.SSLSocketImpl.ensureNegotiated(SSLSocketImpl.java:926)\r\njava.base/sun.security.ssl.SSLSocketImpl.getSession(SSLSocketImpl.java:372)\r\norg.apache.zookeeper.server.quorum.UnifiedServerSocket$UnifiedSocket.detectMode(UnifiedServerSocket.java:269)\r\norg.apache.zookeeper.server.quorum.UnifiedServerSocket$UnifiedSocket.getSocket(UnifiedServerSocket.java:298)\r\norg.apache.zookeeper.server.quorum.UnifiedServerSocket$UnifiedSocket.access$400(UnifiedServerSocket.java:172)\r\norg.apache.zookeeper.server.quorum.UnifiedServerSocket$UnifiedInputStream.getRealInputStream(UnifiedServerSocket.java:699) org.apache.zookeeper.server.quorum.UnifiedServerSocket$UnifiedInputStream.read(UnifiedServerSocket.java:693)\r\njava.base/java.io.BufferedInputStream.fill(BufferedInputStream.java:252)\r\njava.base/java.io.BufferedInputStream.read(BufferedInputStream.java:271)\r\njava.base/java.io.DataInputStream.readInt(DataInputStream.java:392)\r\norg.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)\r\norg.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:86)\r\norg.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)\r\norg.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:472)[myid:] - ERROR [LearnerHandler-/192.168.220.10:46516:o.a.z.c.ZKTrustManager@192] - Failed to verify hostname: 192-168-220-10.eric-data-coordinator-zk.zdhagxx1.svc.cluster.local\r\njavax.net.ssl.SSLPeerUnverifiedException: Certificate for <192-168-220-10.eric-data-coordinator-zk.zdhagxx1.svc.cluster.local> doesn't match any of the subject alternative names: [eric-data-coordinator-zk, eric-data-coordinator-zk.zdhagxx1, eric-data-coordinator-zk.zdhagxx1.svc, eric-data-coordinator-zk.zdhagxx1.svc.cluster.local, *.eric-data-coordinator-zk-ensemble-service.zdhagxx1.svc.cluster.local, certified-scrape-target] org.apache.zookeeper.common.ZKHostnameVerifier.matchDNSName(ZKHostnameVerifier.java:230) org.apache.zookeeper.common.ZKHostnameVerifier.verify(ZKHostnameVerifier.java:171)\r\norg.apache.zookeeper.common.ZKTrustManager.performHostVerification(ZKTrustManager.java:189)\r\norg.apache.zookeeper.common.ZKTrustManager.checkClientTrusted(ZKTrustManager.java:93)\r\njava.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.checkClientCerts(CertificateMessage.java:1285) java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.onConsumeCertificate(CertificateMessage.java:1204)\r\njava.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.consume(CertificateMessage.java:1181) java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:392)\r\njava.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:443)\r\njava.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:421) \r\njava.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:183)\r\njava.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:172) \r\njava.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1511) \r\njava.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1421)\r\njava.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:456)\r\njava.base/sun.security.ssl.SSLSocketImpl.ensureNegotiated(SSLSocketImpl.java:926)\r\njava.base/sun.security.ssl.SSLSocketImpl.getSession(SSLSocketImpl.java:372)\r\norg.apache.zookeeper.server.quorum.UnifiedServerSocket$UnifiedSocket.detectMode(UnifiedServerSocket.java:269)\r\norg.apache.zookeeper.server.quorum.UnifiedServerSocket$UnifiedSocket.getSocket(UnifiedServerSocket.java:298)\r\norg.apache.zookeeper.server.quorum.UnifiedServerSocket$UnifiedSocket.access$400(UnifiedServerSocket.java:172)\r\norg.apache.zookeeper.server.quorum.UnifiedServerSocket$UnifiedInputStream.getRealInputStream(UnifiedServerSocket.java:699)\r\norg.apache.zookeeper.server.quorum.UnifiedServerSocket$UnifiedInputStream.read(UnifiedServerSocket.java:693)\r\njava.base/java.io.BufferedInputStream.fill(BufferedInputStream.java:252)\r\njava.base/java.io.BufferedInputStream.read(BufferedInputStream.java:271)\r\njava.base/java.io.DataInputStream.readInt(DataInputStream.java:392)\r\norg.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)\r\norg.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:86)\r\norg.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)\r\norg.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:472) {code}",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13599221/comment/17899455",
            "id": "17899455",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=sliebau",
              "name": "sliebau",
              "key": "sliebau",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=sliebau&avatarId=26090",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sliebau&avatarId=26090",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sliebau&avatarId=26090",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sliebau&avatarId=26090"
              },
              "displayName": "Sönke Liebau",
              "active": true,
              "timeZone": "Europe/Berlin"
            },
            "body": "You are probably running into ZOOKEEPER-4790 here.\r\n\r\nWhen we encountered this [back in the day|https://github.com/stackabletech/zookeeper-operator/issues/760] we figured out that enabling FIPS mode bypasses all the ZK specific TLS checks and makes it work. In the ZK version you are on it is not yet enabled by default, you could either update or set  zookeeper.fips-mode and this error _should_ go away.\r\n\r\n",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=sliebau",
              "name": "sliebau",
              "key": "sliebau",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=sliebau&avatarId=26090",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sliebau&avatarId=26090",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sliebau&avatarId=26090",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sliebau&avatarId=26090"
              },
              "displayName": "Sönke Liebau",
              "active": true,
              "timeZone": "Europe/Berlin"
            },
            "created": "2024-11-19T10:57:49.054+0000",
            "updated": "2024-11-19T10:57:49.054+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13599221/comment/17899482",
            "id": "17899482",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=sliebau",
              "name": "sliebau",
              "key": "sliebau",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=sliebau&avatarId=26090",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sliebau&avatarId=26090",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sliebau&avatarId=26090",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sliebau&avatarId=26090"
              },
              "displayName": "Sönke Liebau",
              "active": true,
              "timeZone": "Europe/Berlin"
            },
            "body": "Just noticed that this is just copy paste from ZOOKEEPER-4536\r\n\r\nI think this one can be closed as duplicate.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=sliebau",
              "name": "sliebau",
              "key": "sliebau",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=sliebau&avatarId=26090",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sliebau&avatarId=26090",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sliebau&avatarId=26090",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sliebau&avatarId=26090"
              },
              "displayName": "Sönke Liebau",
              "active": true,
              "timeZone": "Europe/Berlin"
            },
            "created": "2024-11-19T13:04:05.325+0000",
            "updated": "2024-11-19T13:04:05.325+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13599221/comment/17901738",
            "id": "17901738",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=dharani",
              "name": "dharani",
              "key": "dharani",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Dharani",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "Hi [~sliebau] ,\r\n\r\nWe are using Apache Zookeeper version 3.8.3. If we change the default configuration of fips-mode to true, will there be any other impacts?\r\n\r\nThanks,\r\nDharani",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=dharani",
              "name": "dharani",
              "key": "dharani",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Dharani",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2024-11-28T14:28:19.178+0000",
            "updated": "2024-11-28T14:28:19.178+0000"
          }
        ],
        "maxResults": 3,
        "total": 3,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/5",
        "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
        "name": "Resolved",
        "id": "5",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13598708",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13598708",
    "key": "ZOOKEEPER-4886",
    "fields": {
      "summary": "observer with small myid can't join SASL quorum",
      "created": "2024-11-14T02:57:18.000+0000",
      "description": "When SASL Quorum like:\r\nserver.11=localhost:11223:11224:participant\r\nserver.21=localhost:11226:11227:participant\r\nserver.1=localhost:11229:11230:observer\r\n\r\nThe server.1 can't join quorum.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13598708/comment/17945983",
            "id": "17945983",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "body": "Issue resolved by pull request 2211\n[https://github.com/apache/zookeeper/pull/2211]",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "created": "2025-04-20T16:41:11.614+0000",
            "updated": "2025-04-20T16:41:11.614+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=zichen",
        "name": "zichen",
        "key": "JIRAUSER307750",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
        },
        "displayName": "zichen",
        "active": true,
        "timeZone": "Etc/UTC"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
        "name": "Blocker",
        "id": "1"
      },
      "labels": [
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
        "name": "Closed",
        "id": "6",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13598616",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13598616",
    "key": "ZOOKEEPER-4885",
    "fields": {
      "summary": "Can Non-SASL-Clients automatically recover with the recovery of kerberos communication？",
      "created": "2024-11-13T12:16:28.000+0000",
      "description": "About  ZOOKEEPER-2139 & ZOOKEEPER-2323, it just avoids ZooKeeper clients into infinite AuthFailedException. Noauth Exception still exists! \r\n\r\nLoginException was thrown through each login, but at this point, a zkclient without Kerberos SASL authentication was created. Non SASL Znodes can be operated on in the future. However, when Kerberos recovers from network disconnections and other anomalies, the previously created zkclient without SASL authentication is still being used without rebuilding the login or recreating a saslclient. If it is used to operate on ACL Znodes at this time, an error will always be reported: \r\n{code:java}\r\nKeeperErrorCode = NoAuth for /zookeeper\r\nor\r\nKeeperErrorCode = AuthFailed for /zookeeper\r\nor\r\nKeeperErrorCode = InvalidACL for /zookeeper{code}\r\nIsn't this a question that should be considered?  And I also met this issue in ZK-3.6.4，It seems that this issue has not been considered in the updated version. ",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13598616/comment/17897903",
            "id": "17897903",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=xinchen147",
              "name": "xinchen147",
              "key": "JIRAUSER298666",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=JIRAUSER298666&avatarId=52277",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=JIRAUSER298666&avatarId=52277",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=JIRAUSER298666&avatarId=52277",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=JIRAUSER298666&avatarId=52277"
              },
              "displayName": "Xin Chen",
              "active": true,
              "timeZone": "Asia/Shanghai"
            },
            "body": "LoginException was thrown through each login, about code：\r\n{code:java}\r\nif (ZooKeeperSaslClient.isEnabled()) {\r\n    try {\r\n        if (zooKeeperSaslClient != null) {\r\n            zooKeeperSaslClient.shutdown();\r\n        }\r\n        zooKeeperSaslClient = new ZooKeeperSaslClient(SaslServerPrincipal.getServerPrincipal(addr));\r\n    } catch (LoginException e) {\r\n        // An authentication error occurred when the SASL client tried to initialize:\r\n        // for Kerberos this means that the client failed to authenticate with the KDC.\r\n        // This is different from an authentication error that occurs during communication\r\n        // with the Zookeeper server, which is handled below.\r\n        LOG.warn(\"SASL configuration failed: \" + e + \" Will continue connection to Zookeeper server without \"\r\n          + \"SASL authentication, if Zookeeper server allows it.\");\r\n        eventThread.queueEvent(new WatchedEvent(\r\n          Watcher.Event.EventType.None,\r\n          Watcher.Event.KeeperState.AuthFailed, null));\r\n        saslLoginFailed = true;\r\n    }\r\n} {code}\r\nClients enter AuthFailed state from the following code：\r\n{code:java}\r\nif (zooKeeperSaslClient != null) {\r\n    boolean sendAuthEvent = false;\r\n    if (zooKeeperSaslClient.getSaslState() == ZooKeeperSaslClient.SaslState.INITIAL) {\r\n        try {\r\n            zooKeeperSaslClient.initialize(ClientCnxn.this);\r\n        } catch (SaslException e) {\r\n           LOG.error(\"SASL authentication with Zookeeper Quorum member failed: \" + e);\r\n            state = States.AUTH_FAILED;\r\n            sendAuthEvent = true;\r\n        }\r\n    }\r\n    KeeperState authState = zooKeeperSaslClient.getKeeperState();\r\n    if (authState != null) {\r\n        if (authState == KeeperState.AuthFailed) {\r\n            // An authentication error occurred during authentication with the Zookeeper Server.\r\n            state = States.AUTH_FAILED;\r\n            sendAuthEvent = true;\r\n        } else {\r\n            if (authState == KeeperState.SaslAuthenticated) {\r\n                sendAuthEvent = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    if (sendAuthEvent == true) {\r\n        eventThread.queueEvent(new WatchedEvent(\r\n              Watcher.Event.EventType.None,\r\n              authState,null));\r\n        if (state == States.AUTH_FAILED) {\r\n            eventThread.queueEventOfDeath();\r\n        }\r\n    }\r\n}{code}\r\n     I want to know if the community thinks that this kind of issue needs to be considered by client-users, and the server only needs to ensure that in the event of a failure to authenticate with kerberos, a client that can operate on no sasl znode can be created normally.  Is that correct？This problem is equivalent to another scenario:\r\n\r\n     *When creating a zkClient, the Kerberos is no longer online, and the created client can only operate on the Znode of no SASL. After the subsequent recovery of the Kerberos, it still remains the same, and cannot operate on the Znode of SASL, nor does it trigger the reconstruction of the client.*\r\n\r\n    Isn't this a question that should be considered?  And I also met this issue in ZK-3.6.4，It seems that this issue has not been considered in the updated version. \r\n\r\n \r\n\r\n ",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=xinchen147",
              "name": "xinchen147",
              "key": "JIRAUSER298666",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=JIRAUSER298666&avatarId=52277",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=JIRAUSER298666&avatarId=52277",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=JIRAUSER298666&avatarId=52277",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=JIRAUSER298666&avatarId=52277"
              },
              "displayName": "Xin Chen",
              "active": true,
              "timeZone": "Asia/Shanghai"
            },
            "created": "2024-11-13T12:24:31.686+0000",
            "updated": "2024-11-13T12:24:31.686+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13598616/comment/17898105",
            "id": "17898105",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=xinchen147",
              "name": "xinchen147",
              "key": "JIRAUSER298666",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=JIRAUSER298666&avatarId=52277",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=JIRAUSER298666&avatarId=52277",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=JIRAUSER298666&avatarId=52277",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=JIRAUSER298666&avatarId=52277"
              },
              "displayName": "Xin Chen",
              "active": true,
              "timeZone": "Asia/Shanghai"
            },
            "body": "1.        So {*}there is a real scenario in the production environment{*}:\r\n\r\nWhen a *Curator Client* used to create a EphemeralNode，like code in HiveServer2：\r\n\r\n \r\n{code:java}\r\nzooKeeperClient =\r\n    CuratorFrameworkFactory.builder().connectString(zooKeeperEnsemble).sessionTimeoutMs(sessionTimeout).aclProvider(zooKeeperAclProvider).retryPolicy(new ExponentialBackoffRetry(baseSleepTime, maxRetries)).build();\r\nzooKeeperClient.start();\r\n\r\nPersistentEphemeralNode znode = new PersistentEphemeralNode(zooKeeperClient, PersistentEphemeralNode.Mode.EPHEMERAL_SEQUENTIAL, pathPrefix, znodeDataUTF8);\r\nznode.start();{code}\r\nThere is a callback function in PersistentEphemeralNode：\r\n{code:java}\r\nbackgroundCallback = new BackgroundCallback()\r\n{\r\n    @Override\r\n    public void processResult(CuratorFramework client, CuratorEvent event) throws Exception\r\n    {\r\n        String path = null;\r\n        if ( event.getResultCode() == KeeperException.Code.NODEEXISTS.intValue() )\r\n        {\r\n            path = event.getPath();\r\n        }\r\n        else if ( event.getResultCode() == KeeperException.Code.OK.intValue() )\r\n        {\r\n            path = event.getName();\r\n        }\r\n        if ( path != null )\r\n        {\r\n            nodePath.set(path);\r\n            watchNode();\r\n\r\n            CountDownLatch localLatch = initialCreateLatch.getAndSet(null);\r\n            if ( localLatch != null )\r\n            {\r\n                localLatch.countDown();\r\n            }\r\n        }\r\n        else\r\n        {\r\n            createNode();\r\n        }\r\n    }\r\n};\r\n\r\n// createNode() registers this backgroundCallback again：\r\ncreateMethod.withMode(mode.getCreateMode(existingPath != null)).inBackground(backgroundCallback).forPath(createPath, data.get());{code}\r\nWhen HiveServer2 is disconnected from the Zookeeper and then network reconnected, Curator automatically rebuilds the client. Coincidentally, the login to kerberos fails at this time, and a non SASL authenticated client is created. The Curator uses this client to rebuild PersistentEphemeralNode under “/hive”.  There will be an error message in creating: \r\n{code:java}\r\nKeeperErrorCode = InvalidACL for /hive/hiveserver2-0... {code}\r\nand only the judgment for NODEEXISTS and OK will be made in {*}backgroundCallback#processResult{*}. In this case, it will received InvaldACL as 'event.getResultCode()' and repeatedly call creatNode() and register backgroundcallback. After the error callback, it will call creatNode() and register backgroundcallback again. So it enters a dead loop, due to the callback processing within the Curator, the zk client of hiveserver2 is completely unaware, while the server will frantically brush InvalidACL logs due to the fast call of creatNode(). The CPU pressure on the zk server will also increase dramatically. \r\n\r\n*From here, it can be seen that neither the Curator nor Zookeeper wants to automatically rebuild the client for scenarios where Kerberos ACL authentication fails.*\r\n\r\nIf we don't modify the Curator code, a solution is proposed for this scenario, which involves monitoring the event on the Hiveserver2 side. When the zk client sends an Authfailed event, the current Curator client is closed and rebuilt, and the ephemeral node is recreated until it is successfully created.\r\n\r\nHowever, there is another issue with this modification. When the authfailed event occurs, rebuilding the Curator client. If the zk server is disconnected for a period of time and the reconnection may generates an expire event, the expire event will occur after the authfailed event and trigger automatic reconstruction within the Curator. At this point, there will be an additional connection between hiveserver2 and the zk server, as well as an additional zk client, which is considered a {*}client leak{*}.\r\n{code:java}\r\n// Expired event trigger Curator to Reset()\r\norg.apache.curator.ConnectionState#checkState case Expired:\r\n{\r\n    isConnected = false;\r\n    checkNewConnectionString = false;\r\n    handleExpiredSession();\r\n    break;\r\n}\r\n\r\norg.apache.curator.ConnectionState#handleExpiredSession\r\nprivate void handleExpiredSession()\r\n{\r\n    log.warn(\"Session expired event received\");\r\n    tracer.get().addCount(\"session-expired\", 1);\r\n\r\n    try\r\n    {\r\n        reset();\r\n    }\r\n    catch ( Exception e )\r\n    {\r\n        queueBackgroundException(e);\r\n    }\r\n}\r\n\r\n//========== reset() will rebuild Zookeeper Client =================\r\norg.apache.curator.ConnectionState#reset\r\nprivate synchronized void reset() throws Exception\r\n{\r\n    log.debug(\"reset\");\r\n\r\n    instanceIndex.incrementAndGet();\r\n\r\n    isConnected.set(false);\r\n    connectionStartMs = System.currentTimeMillis();\r\n    zooKeeper.closeAndReset();\r\n    zooKeeper.getZooKeeper();   // initiate connection\r\n}{code}\r\n \r\n\r\n{*}In order to solve the problem of client leak in this scheme{*}, it is proposed to synchronously modify the Zookeeper client code(ClientCnxn.java). The purpose of the modification is to avoid generating expired events after authfailed events, so that the Curator side will not trigger handleExpirdSession() and reset(). This is customized for some clients that need to set SASL permission znode. The client process needs to carry an environment variable (newly added)：\r\n\r\n \r\n{code:java}\r\nzookeeper.sasl.kerberos.client=true{code}\r\n \r\n\r\nWhen creating such a client, after the authfailed event generated during login, Zookeeper. state can be set to AuthFailed, so exit the retry connection with the zk server, and close the event thread in the same time. In this way, because the zk client has disconnected from the server internally, the expired event will not be triggered again. We can actively initiate the reconstruction of the client and znode in HiveServer2, the leakage problem should not occur again. The modification is as follows:\r\n{code:java}\r\n// org.apache.zookeeper.ClientCnxn.SendThread#startConnect\r\nprivate void startConnect(InetSocketAddress addr) throws IOException {\r\n    // initializing it for new connection\r\n    saslLoginFailed = false;\r\n    state = States.CONNECTING;\r\n\r\n    setName(getName().replaceAll(\"\\\\(.*\\\\)\",\r\n            \"(\" + addr.getHostName() + \":\" + addr.getPort() + \")\"));\r\n    if (ZooKeeperSaslClient.isEnabled()) {\r\n        try {\r\n            if (zooKeeperSaslClient != null) {\r\n                zooKeeperSaslClient.shutdown();\r\n            }\r\n            zooKeeperSaslClient = new ZooKeeperSaslClient(SaslServerPrincipal.getServerPrincipal(addr));\r\n        } catch (LoginException e) {\r\n            // An authentication error occurred when the SASL client tried to initialize:\r\n            // for Kerberos this means that the client failed to authenticate with the KDC.\r\n            // This is different from an authentication error that occurs during communication\r\n            // with the Zookeeper server, which is handled below.\r\n            eventThread.queueEvent(new WatchedEvent(\r\n              Watcher.Event.EventType.None,\r\n              Watcher.Event.KeeperState.AuthFailed, null));\r\n            saslLoginFailed = true;\r\n\r\n// =====================modification==========================\r\n            if (ZooKeeperSaslClient.isKerberosBind()) {\r\n                state = States.AUTH_FAILED;\r\n\r\n                LOG.warn(\"Kerberos is bind but LoginException occurs, Zookeeper client will go to AuthFailed state \"\r\n                        + \"and will not continue connection to Zookeeper server.\");\r\n                throw new SaslException(e.getMessage());\r\n            } else {\r\n                LOG.warn(\"SASL configuration failed: \" + e + \" Will continue connection to Zookeeper server without \"\r\n                        + \"SASL authentication, if Zookeeper server allows it.\");\r\n            }\r\n        }\r\n    }\r\n    logStartConnect(addr);\r\n\r\n    clientCnxnSocket.connect(addr);\r\n}\r\n\r\n\r\n// org.apache.zookeeper.ClientCnxn.SendThread#run\r\nif (state.isConnected()) {\r\n    // determine whether we need to send an AuthFailed event.\r\n    if (zooKeeperSaslClient != null) {\r\n        boolean sendAuthEvent = false;\r\n        if (zooKeeperSaslClient.getSaslState() == ZooKeeperSaslClient.SaslState.INITIAL) {\r\n            try {\r\n                zooKeeperSaslClient.initialize(ClientCnxn.this);\r\n            } catch (SaslException e) {\r\n               LOG.error(\"SASL authentication with Zookeeper Quorum member failed: \" + e);\r\n                state = States.AUTH_FAILED;\r\n                sendAuthEvent = true;\r\n            }\r\n        }\r\n        KeeperState authState = zooKeeperSaslClient.getKeeperState();\r\n        if (authState != null) {\r\n            if (authState == KeeperState.AuthFailed) {\r\n                // An authentication error occurred during authentication with the Zookeeper Server.\r\n                state = States.AUTH_FAILED;\r\n                sendAuthEvent = true;\r\n            } else {\r\n                if (authState == KeeperState.SaslAuthenticated) {\r\n                    sendAuthEvent = true;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (sendAuthEvent == true) {\r\n            eventThread.queueEvent(new WatchedEvent(\r\n                  Watcher.Event.EventType.None,\r\n                  authState,null));\r\n            if (state == States.AUTH_FAILED) {\r\n                eventThread.queueEventOfDeath();\r\n\r\n// =====================modification==========================\r\n                if (ZooKeeperSaslClient.isKerberosBind()) {\r\n                    LOG.warn(\"Kerberos is bind but auth failed, Zookeeper client will go to AuthFailed state \"\r\n                            + \"and will not continue connection to Zookeeper server.\");\r\n                    throw new SaslException(\"zooKeeperSaslClient.State is AuthFailed.\");\r\n                }\r\n            }\r\n        }\r\n    }\r\n    to = readTimeout - clientCnxnSocket.getIdleRecv();\r\n}\r\n\r\n\r\n\r\n// org.apache.zookeeper.client.ZooKeeperSaslClient\r\n// =====================modification==========================\r\npublic static final String ENABLE_CLIENT_KERBEROS_BIND_KEY = \"zookeeper.sasl.kerberos.client\";\r\npublic static final String ENABLE_CLIENT_KERBEROS_BIND_DEFAULT = \"false\";\r\n\r\npublic static boolean isKerberosBind() {\r\n    return Boolean.valueOf(System.getProperty(ENABLE_CLIENT_KERBEROS_BIND_KEY, ENABLE_CLIENT_KERBEROS_BIND_DEFAULT));\r\n}{code}",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=xinchen147",
              "name": "xinchen147",
              "key": "JIRAUSER298666",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=JIRAUSER298666&avatarId=52277",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=JIRAUSER298666&avatarId=52277",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=JIRAUSER298666&avatarId=52277",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=JIRAUSER298666&avatarId=52277"
              },
              "displayName": "Xin Chen",
              "active": true,
              "timeZone": "Asia/Shanghai"
            },
            "created": "2024-11-14T02:11:00.466+0000",
            "updated": "2024-11-14T07:59:08.890+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13598616/comment/17898169",
            "id": "17898169",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=xinchen147",
              "name": "xinchen147",
              "key": "JIRAUSER298666",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=JIRAUSER298666&avatarId=52277",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=JIRAUSER298666&avatarId=52277",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=JIRAUSER298666&avatarId=52277",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=JIRAUSER298666&avatarId=52277"
              },
              "displayName": "Xin Chen",
              "active": true,
              "timeZone": "Asia/Shanghai"
            },
            "body": "2.        Also, {*}there is another real scenario in the production environment{*}:\r\n\r\nAnother zk client of Hive is responsible for establishing persistent nodes. Due to abnormal Kereros interaction during creation, a non SASL authenticated Zookeeper client was obtained, It may report an error when creating SASL Znode：\r\n{code:java}\r\norg.apache.zookeeper.KeeperException.NoAuthException\r\norg.apache.zookeeper.KeeperException.InvalidACLException\r\norg.apache.zookeeper.KeeperException.AuthFailedException{code}\r\nSimilarly, after the recovery of kerberos, using this client to continuously create znodes also results in continuous error messages. So the solution provided is to *consider actively rebuilding a client in the user code every time these three exceptions are encountered.*\r\n{code:java}\r\n// user code demo \r\n\r\ntry {\r\n                createZNode(zookeeperClient, c);\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n                c++;\r\n                if (e instanceof org.apache.zookeeper.KeeperException.AuthFailedException || e instanceof org.apache.zookeeper.KeeperException.NoAuthException || e instanceof org.apache.zookeeper.KeeperException.InvalidACLException) {\r\n                    System.out.println(\"Warn: zkclient need construct, state: \" + zooKeeper.getState() + \" zkException: \" + e.getClass());                                                      \r\n                    zooKeeperClient.close();\r\n                    Thread.sleep(5000);\r\n// Proactively rebuild client objects       \r\n                zooKeeper = new ZooKeeper(\"localhost:2181\", 120000, new ZkClientKerberos()); \r\n                } else {\r\n                    throw e; // Other exceptions are thrown directly \r\n}{code}\r\n \r\n\r\n \r\n\r\n ",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=xinchen147",
              "name": "xinchen147",
              "key": "JIRAUSER298666",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=JIRAUSER298666&avatarId=52277",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=JIRAUSER298666&avatarId=52277",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=JIRAUSER298666&avatarId=52277",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=JIRAUSER298666&avatarId=52277"
              },
              "displayName": "Xin Chen",
              "active": true,
              "timeZone": "Asia/Shanghai"
            },
            "created": "2024-11-14T07:59:53.156+0000",
            "updated": "2024-11-14T09:10:01.152+0000"
          }
        ],
        "maxResults": 3,
        "total": 3,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/1",
        "description": "The issue is open and ready for the assignee to start work on it.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
        "name": "Open",
        "id": "1",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13596906",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13596906",
    "key": "ZOOKEEPER-4884",
    "fields": {
      "summary": "FastLeaderElection WorkerSender/WorkerReceiver don't need to be Thread",
      "created": "2024-10-28T09:19:14.000+0000",
      "description": "ZOOKEEPER-1810 replaced them with dedicated threads.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13596906/comment/17931517",
            "id": "17931517",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=tison",
              "name": "tison",
              "key": "tison",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=tison&avatarId=37193",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tison&avatarId=37193",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tison&avatarId=37193",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tison&avatarId=37193"
              },
              "displayName": "Zili Chen",
              "active": true,
              "timeZone": "Asia/Shanghai"
            },
            "body": "This is superseded by ZOOKEEPER-4898 and fixed at master via https://github.com/apache/zookeeper/pull/2228.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=tison",
              "name": "tison",
              "key": "tison",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=tison&avatarId=37193",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tison&avatarId=37193",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tison&avatarId=37193",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tison&avatarId=37193"
              },
              "displayName": "Zili Chen",
              "active": true,
              "timeZone": "Asia/Shanghai"
            },
            "created": "2025-02-28T16:02:44.380+0000",
            "updated": "2025-02-28T16:02:44.380+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Minor",
        "id": "4"
      },
      "labels": [
        "beginner-friendly"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/5",
        "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
        "name": "Resolved",
        "id": "5",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13596881",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13596881",
    "key": "ZOOKEEPER-4883",
    "fields": {
      "summary": "Rollover leader epoch when counter part of zxid reach limit",
      "created": "2024-10-28T04:39:34.000+0000",
      "description": "Currently, zxid rollover will cause re-election(ZOOKEEPER-1277) which is time consuming.\r\n\r\nZOOKEEPER-2789 proposes to use 24 bits for epoch and 40 bits for counter. I do think it is promising as [it promotes rollover rate from 49.7 days to 34.9 years assuming 1k/s ops|https://github.com/apache/zookeeper/pull/2164#issuecomment-2368107479].\r\n\r\nBut I think it is a one-way ticket. And the change of data format may require community wide spread to upgrade third party libraries/tools if they are ever tied to this. Inside ZooKeeper, `accepetedEpoch` and `currentEpoch` are tied to `zxid`. Given a snapshot and a txn log, we need probably deduced those two epoch values to join quorum.\r\n\r\nSo, I presents alternative solution to rollover leader epoch when counter part of zxid reach limit.\r\n\r\n# Treats last proposal of an epoch as rollover proposal.\r\n# Requests from next epoch are proposed normally.\r\n# Fences next epoch once rollover proposal persisted.\r\n# Proposals from next epoch will not be written to disk before rollover committed.\r\n# Leader commits rollover proposal once it get quorum ACKs.\r\n# Blocked new epoch proposals are logged once rollover proposal is committed in corresponding nodes.\r\n \r\nThis results in:\r\n\r\n# No other lead cloud lead using next epoch number once rollover proposal is considered committed.\r\n# No proposals from next epoch will be written to disk before rollover proposal is considered committed.\r\n\r\nHere is the branch, I will draft a pr later.\r\n\r\nhttps://github.com/kezhuw/zookeeper/tree/zxid-rollover",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
        "name": "kezhuw",
        "key": "kezhuw",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
        },
        "displayName": "Kezhu Wang",
        "active": true,
        "timeZone": "Etc/GMT-8"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/1",
        "description": "The issue is open and ready for the assignee to start work on it.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
        "name": "Open",
        "id": "1",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13596830",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13596830",
    "key": "ZOOKEEPER-4882",
    "fields": {
      "summary": "Data loss after restarting an node experienced temporary disk error and rejoin",
      "created": "2024-10-27T03:08:15.000+0000",
      "description": "    The cause is multifold:\r\n    1. Leader will commit a proposal once quorum acked.\r\n    2. Proposal is able to be committed in node's memory even if it has not\r\n       been written to that node's disk.\r\n    3. In case of disk error, the txn log could lag behind memory database.\r\n\r\n    The above applies to both leader and follower. I have not verified leader branch, let's consider only follower for now.\r\n\r\n    f4. A follower experienced temporary disk error will have hole in txn log\r\n       after re-join.\r\n    f5. Restarted follower will lose the data. Worse, it is able to win\r\n       election and propagate data loss to whole cluster.\r\n\r\nI authored commits in my repo to expose this.\r\n\r\nhttps://github.com/kezhuw/zookeeper/commits/data-loss-temporary-sync-disk-error/",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13596830/comment/17893167",
            "id": "17893167",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "body": "The leader branch might be a little complicated as it take a clean snapshot before leading. But once it is restarted, it has no much difference to the follower case.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "created": "2024-10-27T03:13:14.968+0000",
            "updated": "2024-10-27T03:13:14.968+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13596830/comment/17893168",
            "id": "17893168",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "body": "{quote}\r\nBut once it is restarted, it has no much difference to the follower case.\r\n{quote}\r\n\r\nThis is no true. The snapshot has no data loss. But once it got elected, it could propagate data loss in txn log through DIFF sync. We need test to verify this.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "created": "2024-10-27T03:17:22.196+0000",
            "updated": "2024-10-27T03:17:22.196+0000"
          }
        ],
        "maxResults": 2,
        "total": 2,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
        "name": "kezhuw",
        "key": "kezhuw",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
        },
        "displayName": "Kezhu Wang",
        "active": true,
        "timeZone": "Etc/GMT-8"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [
        "data-loss"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/1",
        "description": "The issue is open and ready for the assignee to start work on it.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
        "name": "Open",
        "id": "1",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13596493",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13596493",
    "key": "ZOOKEEPER-4881",
    "fields": {
      "summary": "Support non blocking ZooKeeper::close",
      "created": "2024-10-23T15:12:17.000+0000",
      "description": "{{ZooKeeper::close}} is synchronous, it waits until {{OpCode.closeSession}} returned. I think it would be useful to support background closing to avoid block caller, just like `close(2)` for socket. We probably could use {{ZooKeeperBuilder}} from ZOOKEEPER-4697 to manually enable it. This way we would not surprise anyone just like `SO_LINGER` for socket.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13596493/comment/17892191",
            "id": "17892191",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "body": "{{ZooKeeper::closeAsync()}}(or whatever name) should also sound. The good of an addition constructor level option is that it play well with {{AutoCloseable}}. I am thinking whether we should provide both.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "created": "2024-10-23T15:20:36.494+0000",
            "updated": "2024-10-23T15:20:36.494+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13596493/comment/17892192",
            "id": "17892192",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "body": "I believe synchronous {{Zookeeper::close}} would be helpful in certain cases, such as tests, to ensure that session get closed after return.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "created": "2024-10-23T15:22:24.906+0000",
            "updated": "2024-10-23T15:22:24.906+0000"
          }
        ],
        "maxResults": 2,
        "total": 2,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/1",
        "description": "The issue is open and ready for the assignee to start work on it.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
        "name": "Open",
        "id": "1",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13596328",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13596328",
    "key": "ZOOKEEPER-4880",
    "fields": {
      "summary": "Generate comments from zookeeper.jute into code",
      "created": "2024-10-22T12:52:23.000+0000",
      "description": "When I was learning protobuf, I found that the comments in the proto file would be generated into the code. I think this feature is very useful. I wonder if this feature can be added to zookeeper, because in the process of learning zookeeper, we can directly see the attribute comments of the relevant classes generated by jute, and there is no need to check the meaning of the fields in zookeeper.jute. Although I found that there are not many comments in the zookeeper.jute file, I think it would be helpful to generate the comments into the code.\r\n\r\nAnd I studied javacc and found that javacc supports this feature. We can get the comments in zookeeper.jute through SPECIAL_TOKEN.\r\n\r\nIf possible, I hope to contribute a PR.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13596328/comment/17892097",
            "id": "17892097",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "body": "+1\r\n\r\nLook forward to this.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "created": "2024-10-23T09:23:40.210+0000",
            "updated": "2024-10-23T09:23:40.210+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13596328/comment/17903794",
            "id": "17903794",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "body": "Issue resolved by pull request 2206\n[https://github.com/apache/zookeeper/pull/2206]",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "created": "2024-12-07T05:55:30.035+0000",
            "updated": "2024-12-07T05:55:30.035+0000"
          }
        ],
        "maxResults": 2,
        "total": 2,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=luozongle01",
        "name": "luozongle01",
        "key": "JIRAUSER307443",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=JIRAUSER307443&avatarId=53836",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=JIRAUSER307443&avatarId=53836",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=JIRAUSER307443&avatarId=53836",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=JIRAUSER307443&avatarId=53836"
        },
        "displayName": "luozongle",
        "active": true,
        "timeZone": "Asia/Shanghai"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Minor",
        "id": "4"
      },
      "labels": [
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/5",
        "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
        "name": "Resolved",
        "id": "5",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13596020",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13596020",
    "key": "ZOOKEEPER-4879",
    "fields": {
      "summary": "Fix log arguments typo",
      "created": "2024-10-18T16:40:45.000+0000",
      "description": "fix log arguments typo, exception stack does not need placeholder.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13596020/comment/17901355",
            "id": "17901355",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "body": "master: 5664ce11c98cfdd9348b2e32f74307582b7a1dda",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "created": "2024-11-27T02:12:53.328+0000",
            "updated": "2024-11-27T02:12:53.328+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=luozongle01",
        "name": "luozongle01",
        "key": "JIRAUSER307443",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=JIRAUSER307443&avatarId=53836",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=JIRAUSER307443&avatarId=53836",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=JIRAUSER307443&avatarId=53836",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=JIRAUSER307443&avatarId=53836"
        },
        "displayName": "luozongle",
        "active": true,
        "timeZone": "Asia/Shanghai"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/5",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/trivial.svg",
        "name": "Trivial",
        "id": "5"
      },
      "labels": [
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/5",
        "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
        "name": "Resolved",
        "id": "5",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13595988",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13595988",
    "key": "ZOOKEEPER-4878",
    "fields": {
      "summary": "Zookeeper servers not running after Chaos mesh IO fault experiment",
      "created": "2024-10-18T12:15:24.000+0000",
      "description": "We are running zookeeper in kubernetes as stateful set with 3 replicas. when we performed chaos mesh IO fault experiment using [^IO_Fault.yaml], zookeeper servers are not recovering.\r\n\r\nZookeeper config file: [^zoo.cfg]\r\n{code:java}\r\n2024-10-24T09:43:40.896+0000 [myid:] - ERROR [QuorumPeer[myid=1](plain=[0:0:0:0:0:0:0:0]:2181)(secure=[0:0:0:0:0:0:0:0]:2281):o.a.z.s.ZooKeeperServer@552] - Severe unrecoverable error, exiting\r\njava.io.FileNotFoundException: /var/lib/zookeeper/data/version-2/snapshot.1100000859 (Input/output error)\r\n        at java.base/java.io.FileOutputStream.open0(Native Method)\r\n        at java.base/java.io.FileOutputStream.open(FileOutputStream.java:298)\r\n        at java.base/java.io.FileOutputStream.<init>(FileOutputStream.java:237)\r\n        at java.base/java.io.FileOutputStream.<init>(FileOutputStream.java:187)\r\n        at org.apache.zookeeper.server.persistence.SnapStream.getOutputStream(SnapStream.java:133)\r\n        at org.apache.zookeeper.server.persistence.FileSnap.serialize(FileSnap.java:242)\r\n        at org.apache.zookeeper.server.persistence.FileTxnSnapLog.save(FileTxnSnapLog.java:481)\r\n        at org.apache.zookeeper.server.ZooKeeperServer.takeSnapshot(ZooKeeperServer.java:550)\r\n        at org.apache.zookeeper.server.ZooKeeperServer.takeSnapshot(ZooKeeperServer.java:544)\r\n        at org.apache.zookeeper.server.ZooKeeperServer.loadData(ZooKeeperServer.java:540)\r\n        at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:597)\r\n        at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1552)\r\n2024-10-24T09:43:40.898+0000 [myid:] - ERROR [QuorumPeer[myid=1](plain=[0:0:0:0:0:0:0:0]:2181)(secure=[0:0:0:0:0:0:0:0]:2281):o.a.z.u.ServiceUtils@48] - Exiting JVM with code 10 {code}\r\nExpectation: When IO_fault experiment using chaos mesh is performed for 60 sec (storage pause time), all the zookeeper servers should recover by itself without any manual intervention within the 10times the storage pause time.\r\n\r\nIs it possible to have partial traffic when PV is hanged? ",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13595988/comment/17891018",
            "id": "17891018",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "body": "Do you have more logs so we can know the more context about how are you testing and how it fails ?\r\n\r\nPersonally, I think \"unrecoverable\" means it demands human operation. If you are going fault IO operation to behave \"corrupted\", then \"unrecoverable\" is suitable.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "created": "2024-10-18T16:34:00.395+0000",
            "updated": "2024-10-18T16:34:00.395+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13595988/comment/17892470",
            "id": "17892470",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=dharani",
              "name": "dharani",
              "key": "dharani",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Dharani",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "Hi [~kezhuw] ,\r\n\r\nI have attached the logs and the experiment configuration used while performing the fault IO operation using chaos mesh.  After the fault IO operation on the PVC path, zookeeper servers are not recovering and unable to serve requests. Is there a way to mitigate it?",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=dharani",
              "name": "dharani",
              "key": "dharani",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Dharani",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2024-10-24T12:56:18.939+0000",
            "updated": "2024-10-24T12:56:18.939+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13595988/comment/17893341",
            "id": "17893341",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "body": "I saw the logs and found that all nodes are experiencing faulty storage. ZooKeeper is able to tolerate n faulty nodes of 2n+1 nodes. I suggest you not to sharing PVC for ZooKeeper instances, at least not majority(a.k.a. n+1 nodes) on one physical volume.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "created": "2024-10-28T05:59:23.303+0000",
            "updated": "2024-10-28T05:59:23.303+0000"
          }
        ],
        "maxResults": 3,
        "total": 3,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/5",
        "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
        "name": "Resolved",
        "id": "5",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13595900",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13595900",
    "key": "ZOOKEEPER-4877",
    "fields": {
      "summary": "Fix typos",
      "created": "2024-10-18T01:55:50.000+0000",
      "description": "Fix typos.\r\n\r\n1. !image-2024-10-18-09-53-46-914.png!\r\n\r\n \r\n\r\n \r\n\r\n2. !image-2024-10-18-09-54-06-318.png!\r\n\r\n \r\n\r\n3. !image-2024-10-18-09-54-26-149.png!\r\n\r\n \r\n\r\n4. !image-2024-10-18-09-54-49-783.png!\r\n\r\n \r\n\r\n \r\n\r\n5. !image-2024-10-18-09-55-17-835.png!",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13595900/comment/17890995",
            "id": "17890995",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "body": "Issue resolved by pull request 2203\n[https://github.com/apache/zookeeper/pull/2203]",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "created": "2024-10-18T15:36:04.127+0000",
            "updated": "2024-10-18T15:36:04.127+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=luozongle",
        "name": "luozongle",
        "key": "JIRAUSER300271",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
        },
        "displayName": "luozongle",
        "active": true,
        "timeZone": "Etc/UTC"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/5",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/trivial.svg",
        "name": "Trivial",
        "id": "5"
      },
      "labels": [
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/5",
        "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
        "name": "Resolved",
        "id": "5",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13595736",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13595736",
    "key": "ZOOKEEPER-4876",
    "fields": {
      "summary": "jetty-http-9.4.53.v20231009.jar: CVE-2024-6763(3.7)",
      "created": "2024-10-16T23:12:39.000+0000",
      "description": null,
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13595736/comment/17890378",
            "id": "17890378",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=ddiederen",
              "name": "ddiederen",
              "key": "ddiederen",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Damien Diederen",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "I looked into this, and bumping the dependency to the latest release of Jetty advertised on [https://jetty.org/download.html], {{{}9.4.56.v20240826{}}}, apparently resolves a fresh {{{}CVE-2024-8184{}}}, but *not* {{{}CVE-2024-6763{}}}—both having been published on 2024-10-14.\r\n\r\nWorse, still, this comment says:\r\n\r\n[https://github.com/jetty/jetty.project/pull/12012#issuecomment-2416450253]\r\n{quote}This will not be backported to an End of Community Support version of Jetty.\r\n{quote}\r\nOn the other hand, it continues with:\r\n{quote}As stated in [CVE-2024-6763|https://github.com/advisories/GHSA-qh8g-58pp-2wxh], the use of Jetty server, or Jetty client, does not make you vulnerable to that CVE.\r\n{quote}\r\nThe linked report itself explains:\r\n{quote}The impact of this vulnerability is limited to developers that use the Jetty HttpURI directly. Example: your project implemented a blocklist to block on some hosts based on HttpURI's handling of authority section.\r\n{quote}\r\nSo: should we upgrade to 9.4.56 and suppress CVE-2024-6763? (Note that I haven't performed an analysis of the affected source code!)\r\n\r\nWDYT?",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=ddiederen",
              "name": "ddiederen",
              "key": "ddiederen",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Damien Diederen",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2024-10-17T08:55:16.546+0000",
            "updated": "2024-10-17T08:56:28.322+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13595736/comment/17890482",
            "id": "17890482",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
              "name": "andor",
              "key": "andorm",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
              },
              "displayName": "Andor Molnar",
              "active": true,
              "timeZone": "Europe/Budapest"
            },
            "body": "{quote}So: should we upgrade to 9.4.56 and suppress CVE-2024-6763? \r\n{quote}\r\nYes, I think that's what we should do. I did a quick grep in source code for {{HttpURI}} and we don't use it, so I believe we can suppress that CVE.\r\n\r\nI bumped Jetty version and build is successful. Let me create a PR.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
              "name": "andor",
              "key": "andorm",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
              },
              "displayName": "Andor Molnar",
              "active": true,
              "timeZone": "Europe/Budapest"
            },
            "created": "2024-10-17T15:01:45.606+0000",
            "updated": "2024-10-17T15:01:45.606+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13595736/comment/17890487",
            "id": "17890487",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
              "name": "andor",
              "key": "andorm",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
              },
              "displayName": "Andor Molnar",
              "active": true,
              "timeZone": "Europe/Budapest"
            },
            "body": "https://github.com/apache/zookeeper/pull/2202",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
              "name": "andor",
              "key": "andorm",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
              },
              "displayName": "Andor Molnar",
              "active": true,
              "timeZone": "Europe/Budapest"
            },
            "created": "2024-10-17T15:15:27.177+0000",
            "updated": "2024-10-17T15:15:27.177+0000"
          }
        ],
        "maxResults": 3,
        "total": 3,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
        "name": "andor",
        "key": "andorm",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
        },
        "displayName": "Andor Molnar",
        "active": true,
        "timeZone": "Europe/Budapest"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
        "name": "Closed",
        "id": "6",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13595417",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13595417",
    "key": "ZOOKEEPER-4875",
    "fields": {
      "summary": "Support pre-constructed ZKConfig in server side",
      "created": "2024-10-15T02:59:51.000+0000",
      "description": "Currently, `ZKConfig` is only constructed right before its usage. It makes it hard to run multiple zookeeper servers in one JVM but with different configurations. Though, we don't officially claim support to that, but I think it should be a good to not have such a ban in our side. Also, accepting pre-constructed `ZKConfig` clould also benefit tests to not mess up properties between client and server.\r\n\r\nSee also https://github.com/apache/zookeeper/pull/2200#discussion_r1800328858",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
        "name": "kezhuw",
        "key": "kezhuw",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
        },
        "displayName": "Kezhu Wang",
        "active": true,
        "timeZone": "Etc/GMT-8"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/1",
        "description": "The issue is open and ready for the assignee to start work on it.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
        "name": "Open",
        "id": "1",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13595141",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13595141",
    "key": "ZOOKEEPER-4874",
    "fields": {
      "summary": "Avoid using fuzzy snapshots.",
      "created": "2024-10-12T02:34:51.000+0000",
      "description": "Currently, ZooKeeper uses a fuzzy snapshot method that allows write requests to continue processing while taking a snapshot. However, this approach does not retain an instantaneous data view during the serialization snapshot, leading to some issues( ZOOKEEPER-4846, ZOOKEEPER-3145). There is a need to optimize this process in order to maintain a consistent and accurate data view., \r\n\r\nWe can optimize the snapshot process by caching the change and applying it after the snapshot is finished to avoid a fuzzy snapshot.\r\n\r\n ",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/1",
        "description": "The issue is open and ready for the assignee to start work on it.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
        "name": "Open",
        "id": "1",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13595093",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13595093",
    "key": "ZOOKEEPER-4873",
    "fields": {
      "summary": "An exception occurring in the INITIAL state of ZooKeeper can result in resource leaks.",
      "created": "2024-10-11T14:59:11.000+0000",
      "description": "Currently, org.apache.zookeeper.server.ZooKeeperServer#canShutdown only checks the *Running* and *Error* states of the ZooKeeperServer. If an exception occurs in the *INITIAL* state, org.apache.zookeeper.server.ZooKeeperServer#shutdown(boolean) may not work properly, potentially leading to a resource leak.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13595093/comment/17888692",
            "id": "17888692",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=luoxin",
              "name": "luoxin",
              "key": "JIRAUSER299934",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "luoxin",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "!image-2024-10-11-22-59-59-190.png!\r\n\r\nIf already shut down, canShutdown() should return false; otherwise, it should return true.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=luoxin",
              "name": "luoxin",
              "key": "JIRAUSER299934",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "luoxin",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2024-10-11T15:01:48.040+0000",
            "updated": "2024-10-11T15:01:48.040+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/1",
        "description": "The issue is open and ready for the assignee to start work on it.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
        "name": "Open",
        "id": "1",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13594841",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13594841",
    "key": "ZOOKEEPER-4872",
    "fields": {
      "summary": "SnapshotCommand should not perform fastForwardFromEdits ",
      "created": "2024-10-10T00:28:13.000+0000",
      "description": null,
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13594841/comment/17888099",
            "id": "17888099",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=li4wang",
              "name": "li4wang",
              "key": "JIRAUSER299380",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Li Wang",
              "active": true,
              "timeZone": "America/Los_Angeles"
            },
            "body": "To avoid the potential of getting into data inconsistent state, SnapshotCommand should just take a snapshot from the data tree, instead of applying the txns recorded in the txn log and then taking snapshot.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=li4wang",
              "name": "li4wang",
              "key": "JIRAUSER299380",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Li Wang",
              "active": true,
              "timeZone": "America/Los_Angeles"
            },
            "created": "2024-10-10T00:31:03.688+0000",
            "updated": "2024-10-10T00:31:03.688+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13594841/comment/17895454",
            "id": "17895454",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=li4wang",
              "name": "li4wang",
              "key": "JIRAUSER299380",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Li Wang",
              "active": true,
              "timeZone": "America/Los_Angeles"
            },
            "body": "\r\n{code:java}\r\n LOG.error(\"{}(highestZxid) > {}(next log) for type {}\", highestZxid, hdr.getZxid(), hdr.getType());\r\n{code}\r\n\r\nThis is to fix the error that can happen when snapshot is taken while txns are processed and appended to the txn log.  ",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=li4wang",
              "name": "li4wang",
              "key": "JIRAUSER299380",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Li Wang",
              "active": true,
              "timeZone": "America/Los_Angeles"
            },
            "created": "2024-11-04T23:06:47.503+0000",
            "updated": "2024-11-04T23:06:47.503+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13594841/comment/17901348",
            "id": "17901348",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "body": "master: 3e02328048a9c753624d44aba51ac70cab60619a\r\nbranch-3.9: da1fc515611dfce7b846a4aef2b362f1b238a266",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "created": "2024-11-27T01:19:20.316+0000",
            "updated": "2024-11-27T01:19:20.316+0000"
          }
        ],
        "maxResults": 3,
        "total": 3,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=liwang",
        "name": "liwang",
        "key": "liwang",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"
        },
        "displayName": "Li Wang",
        "active": true,
        "timeZone": "America/Los_Angeles"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
        "name": "Closed",
        "id": "6",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13594826",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13594826",
    "key": "ZOOKEEPER-4871",
    "fields": {
      "summary": "ZooKeeper python module (zkpython) is incompatible with Python 3.12",
      "created": "2024-10-09T21:11:01.000+0000",
      "description": "I've tried to  run zk-smoktest.py on latest Ubuntu 24.04 and with Python 3.12 and run into the following issue:\r\n{noformat}\r\n$ python zk-smoketest.py -h\r\nTraceback (most recent call last):\r\n  File \"/home/andor/git/zk-smoketest/zk-smoketest.py\", line 22, in <module>\r\n    import zkclient\r\n  File \"/home/andor/git/zk-smoketest/zkclient.py\", line 17, in <module>\r\n    import zookeeper, time, threading\r\nImportError: /usr/local/lib/python3.12/dist-packages/ZooKeeper-0.4-py3.12-linux-x86_64.egg/zookeeper.cpython-312-x86_64-linux-gnu.so: undefined symbol: PyIOBase_Type\r\n{noformat}\r\nIt turned out that *PyIOBase_Type* is deprecated and not available in Python 3.12.\r\n\r\nFound the following workaround in a different project which might be useful for *zkpython* too.\r\n\r\n[https://github.com/inspired-solutions/pygraphviz/pull/1/files]\r\n\r\n ",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13594826/comment/18020984",
            "id": "18020984",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
              "name": "andor",
              "key": "andorm",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
              },
              "displayName": "Andor Molnar",
              "active": true,
              "timeZone": "Europe/Budapest"
            },
            "body": "Issue resolved by pull request 2199\n[https://github.com/apache/zookeeper/pull/2199]",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
              "name": "andor",
              "key": "andorm",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
              },
              "displayName": "Andor Molnar",
              "active": true,
              "timeZone": "Europe/Budapest"
            },
            "created": "2025-09-17T20:51:45.566+0000",
            "updated": "2025-09-17T20:51:45.566+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
        "name": "andor",
        "key": "andorm",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
        },
        "displayName": "Andor Molnar",
        "active": true,
        "timeZone": "Europe/Budapest"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/5",
        "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
        "name": "Resolved",
        "id": "5",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13594809",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13594809",
    "key": "ZOOKEEPER-4870",
    "fields": {
      "summary": "Proactive leadership transfer",
      "created": "2024-10-09T17:05:53.000+0000",
      "description": "We do have leadership transfer, but it only happen when we are removing leader in reconfiguration. It would be nice to support it with dedicated API. This way it will be really useful to reduce unavailability during rolling upgrade or leader shutdown.\r\n\r\nAlso, I think it cloud also help zxid rollover. Inheriting leadership in rollover should be similar to leadership transfer in protocol.\r\n\r\nhttps://www.usenix.org/conference/atc12/technical-sessions/presentation/shraer\r\n\r\n{quote}\r\nwe investigate the effect of\r\nreconfigurations removing the leader. Note that a server\r\ncan never be added to a cluster as leader as we always\r\nprioritize the current leader. Figure 8 shows the advan-\r\ntage of designating a new leader when removing the cur-\r\nrent one, and thus avoiding leader election. It depicts\r\nthe average time to recover from a leader crash versus\r\nthe average time to regain system availability following\r\nthe removal of the leader. The average is taken on 10\r\nexecutions. We can see that designating a default leader\r\nsaves up to 1sec, depending on the cluster size. As cluster\r\nsize increases, leader election takes longer while using a\r\ndefault leader takes constant time regardless of the clus-\r\nter size. Nevertheless, as the figure shows, cluster size\r\nalways affects total leader recovery time, as it includes\r\nsynchronizing state with a quorum of followers.\r\n{quote}",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/1",
        "description": "The issue is open and ready for the assignee to start work on it.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
        "name": "Open",
        "id": "1",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13594564",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13594564",
    "key": "ZOOKEEPER-4869",
    "fields": {
      "summary": "Update doc of Supporting for Multiple Time Units in autopurge.purgeInterval Configuration",
      "created": "2024-10-08T01:11:59.000+0000",
      "description": null,
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=puru",
        "name": "puru",
        "key": "puru",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
        },
        "displayName": "Purshotam Shah",
        "active": true,
        "timeZone": "Etc/UTC"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Minor",
        "id": "4"
      },
      "labels": [
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/5",
        "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
        "name": "Resolved",
        "id": "5",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13594530",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13594530",
    "key": "ZOOKEEPER-4868",
    "fields": {
      "summary": "Bump commons-io library to 2.14.0",
      "created": "2024-10-07T15:50:17.000+0000",
      "description": "CVE-2024-47554 is fixed in that version of the library. Could please you confirm whether Zookeeper is affected by this vulnerability and if so, are there any plans to update the dependency?\r\n\r\n{code}\r\nJava (jar)\r\n==========\r\nTotal: 1 (UNKNOWN: 0, LOW: 0, MEDIUM: 0, HIGH: 1, CRITICAL: 0)\r\n┌───────────────────────────────────────────────┬────────────────┬──────────┬────────┬───────────────────┬───────────────┬─────────────────────────────────────────────────────────┐\r\n│                    Library                    │ Vulnerability  │ Severity │ Status │ Installed Version │ Fixed Version │                          Title                          │\r\n├───────────────────────────────────────────────┼────────────────┼──────────┼────────┼───────────────────┼───────────────┼─────────────────────────────────────────────────────────┤\r\n│ commons-io:commons-io (commons-io-2.11.0.jar) │ CVE-2024-47554 │ HIGH     │ fixed  │ 2.11.0            │ 2.14.0        │ apache-commons-io: Possible denial of service attack on │\r\n│                                               │                │          │        │                   │               │ untrusted input to XmlStreamReader                      │\r\n│                                               │                │          │        │                   │               │ https://avd.aquasec.com/nvd/cve-2024-47554              │\r\n└───────────────────────────────────────────────┴────────────────┴──────────┴────────┴───────────────────┴───────────────┴─────────────────────────────────────────────────────────┘ \r\n{code}\r\nh4. Steps to reproduce\r\n{code}\r\ntrivy image zookeeper:3.9\r\n{code}\r\n\r\n",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13594530/comment/17887682",
            "id": "17887682",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
              "name": "andor",
              "key": "andorm",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
              },
              "displayName": "Andor Molnar",
              "active": true,
              "timeZone": "Europe/Budapest"
            },
            "body": "Issue resolved by pull request 2197\n[https://github.com/apache/zookeeper/pull/2197]",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
              "name": "andor",
              "key": "andorm",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
              },
              "displayName": "Andor Molnar",
              "active": true,
              "timeZone": "Europe/Budapest"
            },
            "created": "2024-10-08T19:08:49.717+0000",
            "updated": "2024-10-08T19:08:49.717+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13594530/comment/17887710",
            "id": "17887710",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=tison",
              "name": "tison",
              "key": "tison",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=tison&avatarId=37193",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tison&avatarId=37193",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tison&avatarId=37193",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tison&avatarId=37193"
              },
              "displayName": "Zili Chen",
              "active": true,
              "timeZone": "Asia/Shanghai"
            },
            "body": "FYI, ZK isn't affected by this CVE. But bump version to reduce friction is valuable so we bump it and make scanners happy.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=tison",
              "name": "tison",
              "key": "tison",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=tison&avatarId=37193",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tison&avatarId=37193",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tison&avatarId=37193",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tison&avatarId=37193"
              },
              "displayName": "Zili Chen",
              "active": true,
              "timeZone": "Asia/Shanghai"
            },
            "created": "2024-10-08T21:19:56.249+0000",
            "updated": "2024-10-08T21:20:22.348+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13594530/comment/17887788",
            "id": "17887788",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=jotamartos",
              "name": "jotamartos",
              "key": "JIRAUSER284183",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Jota Martos",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "Thank you for confirming the solution is not affected and for updating the dependency too. ",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=jotamartos",
              "name": "jotamartos",
              "key": "JIRAUSER284183",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Jota Martos",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2024-10-09T06:39:31.184+0000",
            "updated": "2024-10-09T06:39:31.184+0000"
          }
        ],
        "maxResults": 3,
        "total": 3,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=tison",
        "name": "tison",
        "key": "tison",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=tison&avatarId=37193",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tison&avatarId=37193",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tison&avatarId=37193",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tison&avatarId=37193"
        },
        "displayName": "Zili Chen",
        "active": true,
        "timeZone": "Asia/Shanghai"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
        "name": "Closed",
        "id": "6",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13594413",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13594413",
    "key": "ZOOKEEPER-4867",
    "fields": {
      "summary": "Cannot use encrypted PEM certificate",
      "created": "2024-10-05T22:50:46.000+0000",
      "description": "TLS can be enabled in ZooKeeper and configured using PEM formatted files.\r\n\r\nHowever, if the PEM file contains an encrypted EC (or RSA) private key, ZooKeeper is not able to find it within the PEM file.\r\n\r\nThe {{PemReader.loadPrivateKey}} method's RegEx does not match such a key, for example:\r\n\r\n{code}\r\n-----BEGIN EC PRIVATE KEY-----\r\nProc-Type: 4,ENCRYPTED\r\nDEK-Info: AES-256-CBC,e49\r\n\r\nrdz\r\n-----END EC PRIVATE KEY-----\r\n{code}\r\n\r\nThis appears to be because the RegEx does not allow {{-}} or {{,}} characters within the body of the private key.\r\n\r\nThere may be other problems with using such keys beyond the RegEx matching.",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/1",
        "description": "The issue is open and ready for the assignee to start work on it.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
        "name": "Open",
        "id": "1",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13593881",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13593881",
    "key": "ZOOKEEPER-4866",
    "fields": {
      "summary": "Override `equals()` and `hashCode()` for `ClientCnxn.AuthData`",
      "created": "2024-10-01T13:05:54.000+0000",
      "description": "In {{{}ClientCnxn.java{}}}, when managing authentication information, {{AuthData}} objects are added to {{{}authInfo{}}}, which is a set. However, the {{AuthData}} class does not override the {{equals()}} and {{hashCode()}} methods. This means that duplicate authentication data will not be automatically removed when added to the set. Why were {{equals()}} and {{hashCode()}} not overridden in the {{AuthData}} class? Is there a specific reason for this design decision?",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/1",
        "description": "The issue is open and ready for the assignee to start work on it.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
        "name": "Open",
        "id": "1",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13593631",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13593631",
    "key": "ZOOKEEPER-4865",
    "fields": {
      "summary": "User-level exception log cannot be output correctly.",
      "created": "2024-09-29T09:10:01.000+0000",
      "description": "Currently, the condition check for the user-level exception log may be incorrect, and the exception log may not be output correctly. The error code is negative, so the exception log should be output when the error code is less than APIERROR.\r\n\r\n!image-2024-09-29-17-01-01-153.png!\r\n\r\nAnd shall we move the user-level exception log to FinalRequestProcessor? Because we can get more user-level exception there.",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Minor",
        "id": "4"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/1",
        "description": "The issue is open and ready for the assignee to start work on it.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
        "name": "Open",
        "id": "1",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13593325",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13593325",
    "key": "ZOOKEEPER-4864",
    "fields": {
      "summary": "TxnLogToolkit dump multi to unrecognized chars.",
      "created": "2024-09-26T09:27:31.000+0000",
      "description": "!https://intranetproxy.alipay.com/skylark/lark/0/2024/png/17056839/1727342763883-20799ce6-7595-461b-bb77-bb49261cdee6.png?x-oss-process=image%2Fformat%2Cwebp!",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13593325/comment/17884938",
            "id": "17884938",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=luoxin",
              "name": "luoxin",
              "key": "JIRAUSER299934",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "luoxin",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "Currently, the TxnLogToolkit dumps the multi-txn using new String(txn.getData(),StandardCharsets.UTF_8), but the transaction bytes cannot be converted to a string directly by UTF-8 decoding. We should dump the transaction in a multi-transaction case-by-case manner. ",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=luoxin",
              "name": "luoxin",
              "key": "JIRAUSER299934",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "luoxin",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2024-09-26T09:34:15.316+0000",
            "updated": "2024-09-26T09:34:15.316+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13593325/comment/17884939",
            "id": "17884939",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=luoxin",
              "name": "luoxin",
              "key": "JIRAUSER299934",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "luoxin",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "I will submit a pr to resolve it.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=luoxin",
              "name": "luoxin",
              "key": "JIRAUSER299934",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "luoxin",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2024-09-26T09:34:36.424+0000",
            "updated": "2024-09-26T09:34:36.424+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13593325/comment/17884981",
            "id": "17884981",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "body": "Does this solved by ZOOKEEPER-4607 ?",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "created": "2024-09-26T12:10:27.095+0000",
            "updated": "2024-09-26T12:10:27.095+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13593325/comment/17885221",
            "id": "17885221",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=luoxin",
              "name": "luoxin",
              "key": "JIRAUSER299934",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "luoxin",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "It seems only error will be decoded.\r\n\r\n!image-2024-09-27-13-52-45-301.png!",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=luoxin",
              "name": "luoxin",
              "key": "JIRAUSER299934",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "luoxin",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2024-09-27T05:52:54.558+0000",
            "updated": "2024-09-27T05:53:27.356+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13593325/comment/17885223",
            "id": "17885223",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=luoxin",
              "name": "luoxin",
              "key": "JIRAUSER299934",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "luoxin",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "After building zookeeper with the latest code, I found that the problem still persists with other transactions in multi-txn (such as checkVersion, setData, etc.).",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=luoxin",
              "name": "luoxin",
              "key": "JIRAUSER299934",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "luoxin",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2024-09-27T06:03:45.004+0000",
            "updated": "2024-09-27T06:03:45.004+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13593325/comment/17885308",
            "id": "17885308",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=luoxin",
              "name": "luoxin",
              "key": "JIRAUSER299934",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "luoxin",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "Hi, [~kezhuw] \r\n\r\nI submit a pr to solve it, can you take a look?",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=luoxin",
              "name": "luoxin",
              "key": "JIRAUSER299934",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "luoxin",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2024-09-27T10:43:08.999+0000",
            "updated": "2024-09-27T10:43:08.999+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13593325/comment/17889491",
            "id": "17889491",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=tison",
              "name": "tison",
              "key": "tison",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=tison&avatarId=37193",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tison&avatarId=37193",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tison&avatarId=37193",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tison&avatarId=37193"
              },
              "displayName": "Zili Chen",
              "active": true,
              "timeZone": "Asia/Shanghai"
            },
            "body": "master via https://github.com/apache/zookeeper/commit/b99714543db86ca081a5d648c565f0d9cb4c82c2",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=tison",
              "name": "tison",
              "key": "tison",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=tison&avatarId=37193",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tison&avatarId=37193",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tison&avatarId=37193",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tison&avatarId=37193"
              },
              "displayName": "Zili Chen",
              "active": true,
              "timeZone": "Asia/Shanghai"
            },
            "created": "2024-10-15T07:04:07.509+0000",
            "updated": "2024-10-15T07:04:07.509+0000"
          }
        ],
        "maxResults": 7,
        "total": 7,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=luoxin",
        "name": "luoxin",
        "key": "JIRAUSER299934",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
        },
        "displayName": "luoxin",
        "active": true,
        "timeZone": "Etc/UTC"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/5",
        "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
        "name": "Resolved",
        "id": "5",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13593112",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13593112",
    "key": "ZOOKEEPER-4863",
    "fields": {
      "summary": "Support Client Error metrics",
      "created": "2024-09-24T16:09:15.000+0000",
      "description": "Support client error statistics metrics may help users find exceptions in their applications. For example, using {{echo mntr | nc localhost 2181}} can produce the following output:\r\n\r\n...\r\n\r\nclient_error_node_exist 33\r\n\r\nclient_error_no_node 22\r\n\r\n...\r\n\r\nWe can also add these metrics to Prometheus metrics.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13593112/comment/17884350",
            "id": "17884350",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=luoxin",
              "name": "luoxin",
              "key": "JIRAUSER299934",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "luoxin",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "I will submit a pr to support it.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=luoxin",
              "name": "luoxin",
              "key": "JIRAUSER299934",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "luoxin",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2024-09-24T16:09:45.859+0000",
            "updated": "2024-09-24T16:09:45.859+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/1",
        "description": "The issue is open and ready for the assignee to start work on it.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
        "name": "Open",
        "id": "1",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13592990",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13592990",
    "key": "ZOOKEEPER-4862",
    "fields": {
      "summary": "Doc for Secure prometheus support",
      "created": "2024-09-23T19:01:17.000+0000",
      "description": null,
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13592990/comment/17885642",
            "id": "17885642",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "body": "master: 1880fc0d0a092b2c4e518bc45d5c4e8a77ca4abc",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "created": "2024-09-29T02:04:37.509+0000",
            "updated": "2024-09-29T02:04:37.509+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=puru",
        "name": "puru",
        "key": "puru",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
        },
        "displayName": "Purshotam Shah",
        "active": true,
        "timeZone": "Etc/UTC"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/5",
        "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
        "name": "Resolved",
        "id": "5",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13592245",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13592245",
    "key": "ZOOKEEPER-4861",
    "fields": {
      "summary": "TLS compatibility issue",
      "created": "2024-09-16T13:47:30.000+0000",
      "description": "TLS is not established after the following warning message:\r\n\r\n{{2024-09-06 20:55:34,307 [myid:] - WARN  [epollEventLoopGroup-4-1:o.a.z.s.NettyServerCnxnFactory$CnxnChannelHandler@302] - Exception }}\r\n{\\{caught }}\r\n{{{}io.netty.handler.codec.DecoderException: javax.net.ssl.SSLHandshakeException: The client supported protocol versions [TLSv1.2] are n{}}}{{{}ot accepted by server preferences [TLS13] {{}}}}\r\n{\\{       at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:499) }}\r\n{\\{       at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290) }}\r\n{\\{       at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) }}\r\n{\\{       at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) }}\r\n{\\{       at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) }}\r\n{\\{       at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410) }}\r\n{\\{       at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) }}\r\n{{       at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)}}\r\n\r\nDuring the startup, zookeeper logs:\r\n\r\n{{2024-09-06 20:54:49,778 [myid:] - INFO  [main:o.a.z.c.X509Util@110] - Default TLS protocol is TLSv1.3, supported TLS protocols are [ }}\r\n{{TLSv1.3, TLSv1.2, TLSv1.1, TLSv1, SSLv3, SSLv2Hello] }}\r\n\r\n \r\n\r\nThis was noticed on the following environment:\r\n * Zookeeper Client (3.9.0) - Zookeeper Server (3.9.1): When Zookeeper server is running with Java 21. Client java version does not matter. This works with Java 17.\r\n * Zookeeper Client (3.9.1) - Zookeeper Server (3.9.2): It happens for Java 17 and Java 21",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/1",
        "description": "The issue is open and ready for the assignee to start work on it.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
        "name": "Open",
        "id": "1",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13592123",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13592123",
    "key": "ZOOKEEPER-4860",
    "fields": {
      "summary": "Disable X-Forwarded-For in IPAuthenticationProvider by default",
      "created": "2024-09-13T20:17:05.000+0000",
      "description": "Disable *X-Forwarded-For* header check in *IPAuthenticationProvider* by default to improve reliability in client IP address detection. \r\n\r\nX-Forwarded-For is not a standard header, it's not required and not needed unless ZooKeeper is behind a proxy server. Relying on that when detecting client IP address should be the exception, not the standard behaviour. Therefore we should disable it by defult.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13592123/comment/17882447",
            "id": "17882447",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
              "name": "andor",
              "key": "andorm",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
              },
              "displayName": "Andor Molnar",
              "active": true,
              "timeZone": "Europe/Budapest"
            },
            "body": "ping [~liwang] ",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
              "name": "andor",
              "key": "andorm",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
              },
              "displayName": "Andor Molnar",
              "active": true,
              "timeZone": "Europe/Budapest"
            },
            "created": "2024-09-17T15:38:28.623+0000",
            "updated": "2024-09-17T15:38:28.623+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
        "name": "andor",
        "key": "andorm",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
        },
        "displayName": "Andor Molnar",
        "active": true,
        "timeZone": "Europe/Budapest"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
        "name": "Closed",
        "id": "6",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13591716",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13591716",
    "key": "ZOOKEEPER-4859",
    "fields": {
      "summary": "C client tests hang to be cancelled quite often",
      "created": "2024-09-11T02:38:07.000+0000",
      "description": "CPPUNIT tests runs sequentially. By comparing logs with successful run, I think it could be {{{}Zookeeper_readOnly::testReadOnlyWithSSL{}}}.\r\n\r\nLogs from failed run.\r\n{noformat}\r\n     [exec] Zookeeper_multi::testWatch : elapsed 2005 : OK\r\n     [exec] Zookeeper_multi::testSequentialNodeCreateInAsyncMulti : elapsed 2001 : OK\r\n     [exec] Zookeeper_multi::testBigAsyncMulti : elapsed 3003 : OK\r\n     [exec] Zookeeper_operations::testAsyncWatcher1 : elapsed 54 : OK\r\n     [exec] Zookeeper_operations::testAsyncGetOperation : elapsed 54 : OK\r\n     [exec] Zookeeper_operations::testOperationsAndDisconnectConcurrently1 : elapsed 382 : OK\r\n     [exec] Zookeeper_operations::testOperationsAndDisconnectConcurrently2 : elapsed 0 : OK\r\n     [exec] Zookeeper_operations::testConcurrentOperations1 : elapsed 21127 : OK\r\n     [exec] Zookeeper_readOnly::testReadOnly ZooKeeper server started ZooKeeper server started : elapsed 12214 : OK\r\n{noformat}\r\nLogs from successful run.\r\n{noformat}\r\n     [exec] Zookeeper_multi::testWatch : elapsed 2006 : OK\r\n     [exec] Zookeeper_multi::testSequentialNodeCreateInAsyncMulti : elapsed 2001 : OK\r\n     [exec] Zookeeper_multi::testBigAsyncMulti : elapsed 3003 : OK\r\n     [exec] Zookeeper_operations::testAsyncWatcher1 : elapsed 54 : OK\r\n     [exec] Zookeeper_operations::testAsyncGetOperation : elapsed 54 : OK\r\n     [exec] Zookeeper_operations::testOperationsAndDisconnectConcurrently1 : elapsed 387 : OK\r\n     [exec] Zookeeper_operations::testOperationsAndDisconnectConcurrently2 : elapsed 0 : OK\r\n     [exec] Zookeeper_operations::testConcurrentOperations1 : elapsed 22459 : OK\r\n     [exec] Zookeeper_readOnly::testReadOnly ZooKeeper server started ZooKeeper server started : elapsed 15515 : OK\r\n     [exec] Zookeeper_readOnly::testReadOnlyWithSSL ZooKeeper server started ZooKeeper server started : elapsed 14865 : OK\r\n{noformat}\r\n ",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13591716/comment/17881335",
            "id": "17881335",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "body": "Shit happens.\r\n\r\nGithub is providing us hostnames with more than 64 characters quite often now.\r\n{noformat}\r\nfv-az1272-448.grsihaubamwerhiryzjrxtypna.phxx.internal.cloudapp.net\r\nfv-az1383-210.ikz3ofujitfebmhnxoyjuylfjd.ex.internal.cloudapp.net\r\n{noformat}\r\n\r\nAnd openssl refuses to generate certs for ssl tests when hostname length is greater than 64. \r\n\r\nI found these from {{gencerts.stderr}} (output by {{gencerts.sh}}).\r\n\r\n{noformat}\r\nError making certificate request\r\n404703E6897F0000:error:06800097:asn1 encoding routines:ASN1_mbstring_ncopy:string too long:../crypto/asn1/a_mbstr.c:106:maxsize=64\r\n{noformat}\r\n\r\n",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "created": "2024-09-12T14:49:22.960+0000",
            "updated": "2024-09-12T14:49:22.960+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13591716/comment/17883034",
            "id": "17883034",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "body": "I have reported this to https://github.com/actions/runner-images/issues/10650. I was guided to there from Github Support.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "created": "2024-09-19T14:46:11.386+0000",
            "updated": "2024-09-19T14:46:11.386+0000"
          }
        ],
        "maxResults": 2,
        "total": 2,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
        "name": "kezhuw",
        "key": "kezhuw",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
        },
        "displayName": "Kezhu Wang",
        "active": true,
        "timeZone": "Etc/GMT-8"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
        "name": "Closed",
        "id": "6",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13591355",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13591355",
    "key": "ZOOKEEPER-4858",
    "fields": {
      "summary": "Remove the lock contention between snapshotting and the sync operation",
      "created": "2024-09-07T01:49:39.000+0000",
      "description": "Remove the synchronized keyword from Zookeeper.takeSnapshot() and  ZookeeperServer.restoreFromSnapshot() API, as it causes lock contention on the ZookeeperServer object with the sync operation. \r\n\r\nIn ZookeeperServer.java, we have the following\r\n{code:java}\r\n\r\n public synchronized File takeSnapshot(boolean syncSnap, boolean isSevere, boolean fastForwardFromEdits) throws IOException {\r\n....\r\n}\r\n{code}\r\n\r\nIn ObserverZookeeperServer.java and FollowerZookeeperServer.java, we have the following\r\n       \r\n{code:java}\r\npublic synchronized void sync() {\r\n     ...\r\n    }\r\n\r\n{code}\r\n\r\n\r\n",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13591355/comment/17879993",
            "id": "17879993",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=li4wang",
              "name": "li4wang",
              "key": "JIRAUSER299380",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Li Wang",
              "active": true,
              "timeZone": "America/Los_Angeles"
            },
            "body": "Will submit a patch for it.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=li4wang",
              "name": "li4wang",
              "key": "JIRAUSER299380",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "Li Wang",
              "active": true,
              "timeZone": "America/Los_Angeles"
            },
            "created": "2024-09-07T01:54:13.370+0000",
            "updated": "2024-09-07T01:59:59.948+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13591355/comment/17907532",
            "id": "17907532",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "body": "Issue resolved by pull request 2185\n[https://github.com/apache/zookeeper/pull/2185]",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "created": "2024-12-21T04:15:52.260+0000",
            "updated": "2024-12-21T04:15:52.260+0000"
          }
        ],
        "maxResults": 2,
        "total": 2,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=li4wang",
        "name": "li4wang",
        "key": "JIRAUSER299380",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
        },
        "displayName": "Li Wang",
        "active": true,
        "timeZone": "America/Los_Angeles"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
        "name": "Closed",
        "id": "6",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13591187",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13591187",
    "key": "ZOOKEEPER-4857",
    "fields": {
      "summary": "Enhancing Logging for Ephemeral Type Handling in EphemeralType.get() Method",
      "created": "2024-09-05T14:50:45.000+0000",
      "description": "The {{EphemeralType.get(long ephemeralOwner)}} method in the ZooKeeper codebase is responsible for determining the type of ephemeral node based on the provided {{ephemeralOwner}} value. The current implementation lacks sufficient logging to diagnose and understand how ephemeral types are determined, especially when dealing with extended ephemeral types. By enhancing the method with detailed logging, we can make it easier to track the logic flow and pinpoint issues when handling different {{ephemeralOwner}} values, particularly under scenarios involving extended ephemeral types and emulation of older versions.\r\n \r\n*Expected Behavior:* \r\nThe method should log the steps it takes to determine the {{EphemeralType}} based on the provided {{ephemeralOwner}} value. This includes logging whether extended ephemeral types are enabled, if specific properties like TTL emulation are set, and the final {{EphemeralType}} that is returned. For invalid {{ephemeralOwner}} values, an error should be logged before an exception is thrown.\r\n \r\n*How-to-Fix:*\r\nWe propose to enhance the {{EphemeralType.get(long ephemeralOwner)}} method with logging statements that detail the decision-making process for returning an {{{}EphemeralType{}}}. These logs will include the status of feature flags, the type of {{{}ephemeralOwner{}}}, and error conditions.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13591187/comment/17879593",
            "id": "17879593",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=loggingresearch",
              "name": "loggingresearch",
              "key": "JIRAUSER301422",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "LoggingResearch",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "To make it clear on how to fix the issue, we upload the comparison between the original version and the log-enhanced version in the attached file `original-vs-log-enhanced.md`.  The log-enhanced version is generated automatically utilizing our proposed tool. ",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=loggingresearch",
              "name": "loggingresearch",
              "key": "JIRAUSER301422",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "LoggingResearch",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2024-09-05T14:51:05.318+0000",
            "updated": "2024-09-05T14:51:05.318+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13591187/comment/17885581",
            "id": "17885581",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "body": "-1\r\n\r\n{{EphemeralType.get}} is a simple utility method. It should not log anything. {{IllegalArgumentException}} is enough for error path.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "created": "2024-09-28T13:52:55.867+0000",
            "updated": "2024-09-28T13:52:55.867+0000"
          }
        ],
        "maxResults": 2,
        "total": 2,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/5",
        "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
        "name": "Resolved",
        "id": "5",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13591184",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13591184",
    "key": "ZOOKEEPER-4856",
    "fields": {
      "summary": "Enhancement of QuorumCnxManager to Log Configuration Parameter for Connection Timeout",
      "created": "2024-09-05T14:47:43.000+0000",
      "description": "The {{QuorumCnxManager}} constructor in the ZooKeeper quorum module reads the {{zookeeper.cnxTimeout}} system property to set the connection timeout. However, there is currently no logging in place to indicate whether this parameter has been set or what its value is. This enhancement adds logging to ensure that users are informed whether the parameter is set and what value it holds, or if it falls back to the default timeout.\r\n \r\n*Expected Behavior:* \r\nWhen the system property {{zookeeper.cnxTimeout}} is set, a log message should be generated indicating the value and the configured timeout in milliseconds. If the property is not set, a warning should be logged stating that the default timeout will be used.\r\n \r\n*How-to-Fix:*\r\nWe propose adding logging statements to expose the relationship between the {{zookeeper.cnxTimeout}} system property and the connection timeout configuration. This will help in debugging and understanding how the system parameter affects the quorum manager's behavior.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13591184/comment/17879590",
            "id": "17879590",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=loggingresearch",
              "name": "loggingresearch",
              "key": "JIRAUSER301422",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "LoggingResearch",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "To make it clear on how to fix the issue, we upload the comparison between the original version and the log-enhanced version in the attached file `original-vs-log-enhanced.md`.  The log-enhanced version is generated automatically utilizing our proposed tool. ",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=loggingresearch",
              "name": "loggingresearch",
              "key": "JIRAUSER301422",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "LoggingResearch",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2024-09-05T14:48:00.998+0000",
            "updated": "2024-09-05T14:48:00.998+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/1",
        "description": "The issue is open and ready for the assignee to start work on it.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
        "name": "Open",
        "id": "1",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13591183",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13591183",
    "key": "ZOOKEEPER-4855",
    "fields": {
      "summary": "Enhance Logging in AdminServerFactory to Reflect Configuration Changes",
      "created": "2024-09-05T14:44:56.000+0000",
      "description": "The {{AdminServerFactory}} class in ZooKeeper creates an admin server based on a configuration parameter ({{{}zookeeper.admin.enableServer{}}}). Currently, there is no logging to indicate whether the server was enabled or disabled based on this parameter, which makes it difficult to troubleshoot or verify behavior during testing or in production. The enhancement proposes adding logging to capture this configuration decision, aiding in better diagnostics and understanding of server behavior.\r\n \r\n*Expected Behavior:* \r\nWhen the {{zookeeper.admin.enableServer}} property is set to {{{}\"false\"{}}}, the {{AdminServerFactory}} should log an informational message indicating that the JettyAdminServer is disabled. When the property is set to {{{}\"true\"{}}}, the server should start without additional logging related to this property, unless an error occurs.\r\n \r\n*How-to-Fix:*\r\nIt's important to introduce required logging.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13591183/comment/17879591",
            "id": "17879591",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=loggingresearch",
              "name": "loggingresearch",
              "key": "JIRAUSER301422",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "LoggingResearch",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "To make it clear on how to fix the issue, we upload the comparison between the original version and the log-enhanced version in the attached file `original-vs-log-enhanced.md`.  The log-enhanced version is generated automatically utilizing our proposed tool. ",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=loggingresearch",
              "name": "loggingresearch",
              "key": "JIRAUSER301422",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "LoggingResearch",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2024-09-05T14:48:12.625+0000",
            "updated": "2024-09-05T14:48:12.625+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/1",
        "description": "The issue is open and ready for the assignee to start work on it.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
        "name": "Open",
        "id": "1",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13591181",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13591181",
    "key": "ZOOKEEPER-4854",
    "fields": {
      "summary": "Enhance Logging for Client Connection Socket Selection in ZooKeeper",
      "created": "2024-09-05T14:41:24.000+0000",
      "description": "The {{ZooKeeper}} class currently selects a client connection socket implementation ({{{}ClientCnxnSocket{}}}) based on a configuration parameter ({{{}zookeeper.clientCnxnSocket{}}}). However, the current implementation does not log the outcome of this selection, making it difficult to debug issues related to socket selection or understand the behavior of the client in different environments. The proposed enhancement adds logging to expose the decision-making process, providing clearer insights into which socket is being used and whether the configuration was set correctly.\r\n \r\n*Expected Behavior:* \r\nWhen the {{zookeeper.clientCnxnSocket}} property is set to a valid value (e.g., {{{}ClientCnxnSocketNetty{}}}), the log should indicate that this specific socket is being used. If the property is not set or is set to the default value (ClientCnxnSocketNIO), the log should confirm that the default socket is in use. If the property is set to an unrecognized value, the log should warn that the system is defaulting to {{{}ClientCnxnSocketNIO{}}}.\r\n \r\n*How-to-Fix:*\r\nIntroduce logging within the {{getClientCnxnSocket}} method to capture and report the configuration state of the {{ZOOKEEPER_CLIENT_CNXN_SOCKET}} parameter. This enhancement will help trace which client connection socket implementation is selected—whether it's the default {{{}ClientCnxnSocketNIO{}}}, a specified alternative like {{{}ClientCnxnSocketNetty{}}}, or an unrecognized value that causes a fallback to the default. The added log statements will improve transparency and aid in debugging by providing clear and actionable information in the logs.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13591181/comment/17879584",
            "id": "17879584",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=loggingresearch",
              "name": "loggingresearch",
              "key": "JIRAUSER301422",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "LoggingResearch",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "body": "To make it clear on how to fix the issue, we upload the comparison between the original version and the log-enhanced version in the attached file `original-vs-log-enhanced.md`.  The log-enhanced version is generated automatically utilizing our proposed tool. ",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=loggingresearch",
              "name": "loggingresearch",
              "key": "JIRAUSER301422",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
              },
              "displayName": "LoggingResearch",
              "active": true,
              "timeZone": "Etc/UTC"
            },
            "created": "2024-09-05T14:41:50.123+0000",
            "updated": "2024-09-05T14:41:50.123+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/1",
        "description": "The issue is open and ready for the assignee to start work on it.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
        "name": "Open",
        "id": "1",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13590003",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13590003",
    "key": "ZOOKEEPER-4853",
    "fields": {
      "summary": "erroneous assertion in ZooKeeperQuotaTest#testQuota",
      "created": "2024-08-26T04:10:27.000+0000",
      "description": "Created for https://github.com/apache/zookeeper/pull/2169.\r\n\r\n{code:java}\r\nassertNotNull(server.getZKDatabase().getDataTree().getMaxPrefixWithQuota(path) != null, \"Quota is still set\");\r\n{code}\r\n\r\nThe above equation test evaluates to a non null boolean value, so always pass.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13590003/comment/17876574",
            "id": "17876574",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "body": "Issue resolved by pull request 2169\n[https://github.com/apache/zookeeper/pull/2169]",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "created": "2024-08-26T04:13:51.693+0000",
            "updated": "2024-08-26T04:13:51.693+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Minor",
        "id": "4"
      },
      "labels": [
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/5",
        "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
        "name": "Resolved",
        "id": "5",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13589587",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13589587",
    "key": "ZOOKEEPER-4852",
    "fields": {
      "summary": "Fix the bad \"*uuuuu\" mark in the ASF license",
      "created": "2024-08-21T09:37:05.000+0000",
      "description": "we have four java files have this issue. e.g. \r\n\r\n \r\n{code:java}\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *uuuuu\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"/RequuuAS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\npackage org.apache.zookeeper.server;\r\nimport java.io.IOException;\r\nimport java.nio.ByteBuffer;\r\nimport java.util.function.Supplier;\r\nimport org.apache.jute.Record;\r\npublic interface RequestRecord {\r\n{code}\r\n ",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13589587/comment/17893672",
            "id": "17893672",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "body": "master: 9d522642a9c78dafb7084952f9807beb205478c3\r\nbranch-3.9: 3ca20f8a867c63255d212035287eac1c8dbad750\r\nbranch-3.8: 758a0d2e621b38c4531c88520f9564778e547e50 (after conflict resolved)",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "created": "2024-10-29T02:28:45.456+0000",
            "updated": "2024-10-29T02:28:45.456+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/5",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/trivial.svg",
        "name": "Trivial",
        "id": "5"
      },
      "labels": [
        "beginner-friendly",
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
        "name": "Closed",
        "id": "6",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13589494",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13589494",
    "key": "ZOOKEEPER-4851",
    "fields": {
      "summary": "Honor X-Forwarded-For optionally in IPAuthenticationProvider",
      "created": "2024-08-20T17:54:44.000+0000",
      "description": "Introduce a feature flag in *IPAuthenticationProvider* to toggle reading of *X-Forwarded-For* header from HTTP requests, because there're some use cases when it's not needed.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13589494/comment/17875274",
            "id": "17875274",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
              "name": "andor",
              "key": "andorm",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
              },
              "displayName": "Andor Molnar",
              "active": true,
              "timeZone": "Europe/Budapest"
            },
            "body": "ping [~liwang] ",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
              "name": "andor",
              "key": "andorm",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
              },
              "displayName": "Andor Molnar",
              "active": true,
              "timeZone": "Europe/Budapest"
            },
            "created": "2024-08-20T19:03:01.524+0000",
            "updated": "2024-08-20T19:03:01.524+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
        "name": "andor",
        "key": "andorm",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
        },
        "displayName": "Andor Molnar",
        "active": true,
        "timeZone": "Europe/Budapest"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
        "name": "Closed",
        "id": "6",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13589149",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13589149",
    "key": "ZOOKEEPER-4850",
    "fields": {
      "summary": "Enhance zkCli Tool to Support Reading and Writing Binary Data",
      "created": "2024-08-17T03:42:51.000+0000",
      "description": "Currently, the `get` and `set` commands in the zkCli tool only support reading and writing text data. However, znode data can be an arbitrary byte array. It would be useful to read and write binary data in base64 or hexdump format.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13589149/comment/17874558",
            "id": "17874558",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=ctubbsii",
              "name": "ctubbsii",
              "key": "ctubbsii",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=ctubbsii&avatarId=15840",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ctubbsii&avatarId=15840",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ctubbsii&avatarId=15840",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ctubbsii&avatarId=15840"
              },
              "displayName": "Christopher Tubbs",
              "active": true,
              "timeZone": "America/New_York"
            },
            "body": "I don't think this is worth it. See my comments on the PR ",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=ctubbsii",
              "name": "ctubbsii",
              "key": "ctubbsii",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=ctubbsii&avatarId=15840",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ctubbsii&avatarId=15840",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ctubbsii&avatarId=15840",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ctubbsii&avatarId=15840"
              },
              "displayName": "Christopher Tubbs",
              "active": true,
              "timeZone": "America/New_York"
            },
            "created": "2024-08-17T18:19:11.201+0000",
            "updated": "2024-08-17T18:19:11.201+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=shawyeok",
        "name": "shawyeok",
        "key": "shawyeok",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
        },
        "displayName": "Yike Xiao",
        "active": true,
        "timeZone": "Asia/Shanghai"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
        "name": "Minor",
        "id": "4"
      },
      "labels": [
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
        "name": "Closed",
        "id": "6",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13588728",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13588728",
    "key": "ZOOKEEPER-4849",
    "fields": {
      "summary": "Option to Provide Custom X509 Implementation of QuorumAuthServer and QuorumAuthLearner",
      "created": "2024-08-13T15:24:37.000+0000",
      "description": "With the implementation of ZOOKEEPER-2123, we now have the option to implement a custom X509 AuthenticationProvider for client-server authentication. We also need a similar option for quorum authentication. In our cloud environment, we could restrict quorum members to those with specific certificates, allowing only those to join the quorum.",
      "comment": {
        "comments": [],
        "maxResults": 0,
        "total": 0,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=puru",
        "name": "puru",
        "key": "puru",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
        },
        "displayName": "Purshotam Shah",
        "active": true,
        "timeZone": "Etc/UTC"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/1",
        "description": "The issue is open and ready for the assignee to start work on it.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
        "name": "Open",
        "id": "1",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13588088",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13588088",
    "key": "ZOOKEEPER-4848",
    "fields": {
      "summary": "Possible stack overflow in setup_random",
      "created": "2024-08-07T06:06:10.000+0000",
      "description": "Created for https://github.com/apache/zookeeper/pull/2097.\r\n\r\n{code:c}\r\n        int seed_len = 0;\r\n        /* Enter a loop to fill in seed with random data from /dev/urandom.\r\n         * This is done in a loop so that we can safely handle short reads\r\n         * which can happen due to signal interruptions.\r\n         */\r\n        while (seed_len < sizeof(seed)) {\r\n            /* Assert we either read something or we were interrupted due to a\r\n             * signal (errno == EINTR) in which case we need to retry.\r\n             */\r\n            int rc = read(fd, &seed + seed_len, sizeof(seed) - seed_len);\r\n            assert(rc > 0 || errno == EINTR);\r\n            if (rc > 0) {\r\n                seed_len += rc;\r\n            }\r\n        }\r\n{code}\r\n\r\nAbove code will overflow {{seed}} in case of a short read.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13588088/comment/17890768",
            "id": "17890768",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "body": "Issue resolved by pull request 2097\n[https://github.com/apache/zookeeper/pull/2097]",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw",
              "name": "kezhuw",
              "key": "kezhuw",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"
              },
              "displayName": "Kezhu Wang",
              "active": true,
              "timeZone": "Etc/GMT-8"
            },
            "created": "2024-10-18T01:45:04.337+0000",
            "updated": "2024-10-18T01:45:04.337+0000"
          }
        ],
        "maxResults": 1,
        "total": 1,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
        "name": "Closed",
        "id": "6",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13587293",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13587293",
    "key": "ZOOKEEPER-4847",
    "fields": {
      "summary": "Found od in zookeeper/data/version-2/currentEpoch",
      "created": "2024-07-30T08:01:38.000+0000",
      "description": "{code:java}\r\n2024-07-30 16:32:48,950 [myid:1] - ERROR [main:QuorumPeer@1148] - Unable to load database on disk\r\njava.io.IOException: Found od in /cloud/data/zookeeper/data/version-2/currentEpoch\r\n        at org.apache.zookeeper.server.quorum.QuorumPeer.readLongFromFile(QuorumPeer.java:2126)\r\n        at org.apache.zookeeper.server.quorum.QuorumPeer.loadDataBase(QuorumPeer.java:1100)\r\n        at org.apache.zookeeper.server.quorum.QuorumPeer.start(QuorumPeer.java:1079)\r\n        at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:227)\r\n        at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:136)\r\n        at org.apache.zookeeper.server.quorum.QuorumPeerMain.main(QuorumPeerMain.java:90)\r\n2024-07-30 16:32:48,953 [myid:1] - ERROR [main:QuorumPeerMain@113] - Unexpected exception, exiting abnormally\r\njava.lang.RuntimeException: Unable to run quorum server\r\n        at org.apache.zookeeper.server.quorum.QuorumPeer.loadDataBase(QuorumPeer.java:1149)\r\n        at org.apache.zookeeper.server.quorum.QuorumPeer.start(QuorumPeer.java:1079)\r\n        at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:227)\r\n        at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:136)\r\n        at org.apache.zookeeper.server.quorum.QuorumPeerMain.main(QuorumPeerMain.java:90)\r\nCaused by: java.io.IOException: Found od in /cloud/data/zookeeper/data/version-2/currentEpoch\r\n        at org.apache.zookeeper.server.quorum.QuorumPeer.readLongFromFile(QuorumPeer.java:2126)\r\n        at org.apache.zookeeper.server.quorum.QuorumPeer.loadDataBase(QuorumPeer.java:1100)\r\n        ... 4 more\r\n2024-07-30 16:32:48,954 [myid:1] - INFO  [main:ZKAuditProvider@42] - ZooKeeper audit is disabled.\r\n2024-07-30 16:32:48,955 [myid:1] - ERROR [main:ServiceUtils@48] - Exiting JVM with code 1\r\n {code}\r\nI accidentally encountered this error and found that the current Epoch file had been written with letters. Then, the zk process detected the contents of this file during restart and threw an exception before exiting the process. However, zk was unable to recover it.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13587293/comment/17869585",
            "id": "17869585",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=xinchen147",
              "name": "xinchen147",
              "key": "JIRAUSER298666",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=JIRAUSER298666&avatarId=52277",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=JIRAUSER298666&avatarId=52277",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=JIRAUSER298666&avatarId=52277",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=JIRAUSER298666&avatarId=52277"
              },
              "displayName": "Xin Chen",
              "active": true,
              "timeZone": "Asia/Shanghai"
            },
            "body": "The code written into the contents of this file is as follows:\r\n{code:java}\r\n/**\r\n * Write a long value to disk atomically. Either succeeds or an exception\r\n * is thrown.\r\n * @param name file name to write the long to\r\n * @param value the long value to write to the named file\r\n * @throws IOException if the file cannot be written atomically\r\n */\r\n// visibleForTest\r\n void writeLongToFile(String name, final long value) throws IOException {\r\n    File file = new File(logFactory.getSnapDir(), name);\r\n    new AtomicFileWritingIdiom(file, new WriterStatement() {\r\n        @Override\r\n        public void write(Writer bw) throws IOException {\r\n            bw.write(Long.toString(value));\r\n        }\r\n    });\r\n} {code}\r\nAt the moment when the file was written with letters, there may have been a node power outage, disk failure, etc., but I feel that these should not have caused the writing of long numbers to become writing letters ‘od’.  Who has experience and insights in this area, please.\r\n\r\n ",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=xinchen147",
              "name": "xinchen147",
              "key": "JIRAUSER298666",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=JIRAUSER298666&avatarId=52277",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=JIRAUSER298666&avatarId=52277",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=JIRAUSER298666&avatarId=52277",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=JIRAUSER298666&avatarId=52277"
              },
              "displayName": "Xin Chen",
              "active": true,
              "timeZone": "Asia/Shanghai"
            },
            "created": "2024-07-30T09:28:13.839+0000",
            "updated": "2024-07-30T09:28:13.839+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13587293/comment/17869601",
            "id": "17869601",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=xinchen147",
              "name": "xinchen147",
              "key": "JIRAUSER298666",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=JIRAUSER298666&avatarId=52277",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=JIRAUSER298666&avatarId=52277",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=JIRAUSER298666&avatarId=52277",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=JIRAUSER298666&avatarId=52277"
              },
              "displayName": "Xin Chen",
              "active": true,
              "timeZone": "Asia/Shanghai"
            },
            "body": "The severity of this problem lies in the fact that once the ‘currentEpoch‘ content becomes letters, if zk restarts due to other factors, it will never be able to start successfully. I have proposed a solution to avoid and fix the issue, which allows the zk process to automatically recover when restarted. This involves a file deletion operation when incorrect file content is found during the startup process. This way, when zk is pulled up again, a new valid file can be created by default.\r\n\r\n \r\n{code:java}\r\nprivate long readLongFromFile(String name) throws IOException {\r\n    File file = new File(logFactory.getSnapDir(), name);\r\n    BufferedReader br = new BufferedReader(new FileReader(file));\r\n    String line = \"\";\r\n    try {\r\n        line = br.readLine();\r\n        return Long.parseLong(line);\r\n    } catch (NumberFormatException e) {\r\n// Delete the file and print a log when deletion fails                       \r\n    if (!file.delete()) {\r\n            LOG.error(\"Unable to delete wrong file {}\", file);\r\n        }\r\n        throw new IOException(\"Found \" + line + \" in \" + file);\r\n    } finally {\r\n        br.close();\r\n    }\r\n} {code}\r\n \r\n\r\nIf the file does not exist at startup, it will be created by default, which is an existing logic：\r\n{code:java}\r\nprivate void loadDataBase() {\r\n    try {\r\n        zkDb.loadDataBase();\r\n\r\n        // load the epochs\r\n        long lastProcessedZxid = zkDb.getDataTree().lastProcessedZxid;\r\n        long epochOfZxid = ZxidUtils.getEpochFromZxid(lastProcessedZxid);\r\n        try {\r\n            currentEpoch = readLongFromFile(CURRENT_EPOCH_FILENAME);\r\n        } catch (FileNotFoundException e) {\r\n            // pick a reasonable epoch number\r\n            // this should only happen once when moving to a\r\n            // new code version\r\n            currentEpoch = epochOfZxid;\r\n            LOG.info(\r\n                \"{} not found! Creating with a reasonable default of {}. \"\r\n                    + \"This should only happen when you are upgrading your installation\",\r\n                CURRENT_EPOCH_FILENAME,\r\n                currentEpoch);\r\n            writeLongToFile(CURRENT_EPOCH_FILENAME, currentEpoch);\r\n        } {code}\r\n ",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=xinchen147",
              "name": "xinchen147",
              "key": "JIRAUSER298666",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=JIRAUSER298666&avatarId=52277",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=JIRAUSER298666&avatarId=52277",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=JIRAUSER298666&avatarId=52277",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=JIRAUSER298666&avatarId=52277"
              },
              "displayName": "Xin Chen",
              "active": true,
              "timeZone": "Asia/Shanghai"
            },
            "created": "2024-07-30T09:58:59.614+0000",
            "updated": "2024-07-30T10:01:36.355+0000"
          }
        ],
        "maxResults": 2,
        "total": 2,
        "startAt": 0
      },
      "assignee": null,
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
        "name": "Major",
        "id": "3"
      },
      "labels": [],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/1",
        "description": "The issue is open and ready for the assignee to start work on it.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
        "name": "Open",
        "id": "1",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      }
    }
  },
  {
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "id": "13587121",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13587121",
    "key": "ZOOKEEPER-4846",
    "fields": {
      "summary": "Failure to reload database due to missing ACL",
      "created": "2024-07-28T10:51:12.000+0000",
      "description": "ZooKeeper snapshots are {_}fuzzy{_}, as the server does not stop processing requests while ACLs and nodes are being streamed to disk.\r\n\r\nACLs, notably, are streamed {_}first{_}, as a mapping between the full serialized ACL and an \"ACL ID\" referenced by the node.\r\n\r\nConsequently, a snapshot can very well contain ACL IDs which do not exist in the mapping. Prior to ZOOKEEPER-4799, such situations would produce harmless (if annoying) \"Ignoring acl XYZ as it does not exist in the cache\" INFO entries in the server logs.\r\n\r\nWith ZOOKEEPER-4799, we started \"eagerly\" fetching the referenced ACLs in {{DataTree}} operations such as {{{}createNode{}}}, {{{}deleteNode{}}}, etc.—as opposed to just fetching them from request processors.\r\n\r\nThis can result in fatal errors during the {{fastForwardFromEdits}} phase of restoring a database, when transactions are processed on top of an inconsistent data tree—preventing the server from starting.\r\n\r\nThe errors are thrown in this code path:\r\n{code:java}\r\n// ReferenceCountedACLCache.java:90\r\nList<ACL> acls = longKeyMap.get(longVal);\r\nif (acls == null) {\r\n    LOG.error(\"ERROR: ACL not available for long {}\", longVal);\r\n    throw new RuntimeException(\"Failed to fetch acls for \" + longVal);\r\n}\r\n{code}\r\nHere is a scenario leading to such a failure:\r\n * An existing node {{{}/foo{}}}, sporting an unique ACL, is deleted. This is recorded in transaction log {{{}$SNAP-1{}}}; said ACL is also deallocated;\r\n * Snapshot {{$SNAP}} is started;\r\n * The ACL map is serialized to {{{}$SNAP{}}};\r\n * A new node {{/foo}} sporting the same unique ACL is created in a portion of the data tree which still has to be serialized;\r\n * Node {{/foo}} is serialized to {{{}$SNAP{}}}—but its ACL isn't;\r\n * The server is restarted;\r\n * The {{DataTree}} is initialized from {{{}$SNAP{}}}, including node {{/foo}} with a dangling ACL reference;\r\n * Transaction log {{$SNAP-1}} is being replayed, leading to a {{{}deleteNode(\"/foo\"){}}};\r\n * {{getACL(node)}} panics, preventing a successful restart.",
      "comment": {
        "comments": [
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13587121/comment/17924680",
            "id": "17924680",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
              "name": "andor",
              "key": "andorm",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
              },
              "displayName": "Andor Molnar",
              "active": true,
              "timeZone": "Europe/Budapest"
            },
            "body": "Example stack trace.\r\n{noformat}\r\n2025-02-05 16:07:20,312 ERROR org.apache.zookeeper.server.ZooKeeperServerMain: Unexpected exception, exiting abnormally\r\njava.lang.RuntimeException: Failed to fetch acls for 7382\r\n        at org.apache.zookeeper.server.ReferenceCountedACLCache.convertLong(ReferenceCountedACLCache.java:93)\r\n        at org.apache.zookeeper.server.DataTree.getACL(DataTree.java:801)\r\n        at org.apache.zookeeper.server.DataTree.createNode(DataTree.java:455)\r\n        at org.apache.zookeeper.server.DataTree.processTxn(DataTree.java:881)\r\n        at org.apache.zookeeper.server.DataTree.processTxn(DataTree.java:864)\r\n        at org.apache.zookeeper.server.persistence.FileTxnSnapLog.processTransaction(FileTxnSnapLog.java:442)\r\n        at org.apache.zookeeper.server.persistence.FileTxnSnapLog.fastForwardFromEdits(FileTxnSnapLog.java:350)\r\n        at org.apache.zookeeper.server.persistence.FileTxnSnapLog.lambda$restore$0(FileTxnSnapLog.java:267)\r\n        at org.apache.zookeeper.server.persistence.FileTxnSnapLog.restore(FileTxnSnapLog.java:312)\r\n        at org.apache.zookeeper.server.ZKDatabase.loadDataBase(ZKDatabase.java:285)\r\n        at org.apache.zookeeper.server.ZooKeeperServer.loadData(ZooKeeperServer.java:531)\r\n        at org.apache.zookeeper.server.ZooKeeperServer.startdata(ZooKeeperServer.java:704)\r\n        at org.apache.zookeeper.server.NettyServerCnxnFactory.startup(NettyServerCnxnFactory.java:745)\r\n        at org.apache.zookeeper.server.ServerCnxnFactory.startup(ServerCnxnFactory.java:130)\r\n        at org.apache.zookeeper.server.ZooKeeperServerMain.runFromConfig(ZooKeeperServerMain.java:161)\r\n        at org.apache.zookeeper.server.ZooKeeperServerMain.initializeAndRun(ZooKeeperServerMain.java:113)\r\n        at org.apache.zookeeper.server.ZooKeeperServerMain.main(ZooKeeperServerMain.java:68)\r\n        at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:141)\r\n        at org.apache.zookeeper.server.quorum.QuorumPeerMain.main(QuorumPeerMain.java:91){noformat}\r\nIt indicates that problem happens when trying to execute createTxn a znode whose *parent* doesn't have a valid ACL.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
              "name": "andor",
              "key": "andorm",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
              },
              "displayName": "Andor Molnar",
              "active": true,
              "timeZone": "Europe/Budapest"
            },
            "created": "2025-02-06T19:49:33.856+0000",
            "updated": "2025-02-06T19:49:33.856+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13587121/comment/17924725",
            "id": "17924725",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
              "name": "andor",
              "key": "andorm",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
              },
              "displayName": "Andor Molnar",
              "active": true,
              "timeZone": "Europe/Budapest"
            },
            "body": "Found a solution. It's super simple. ZooKeeper actually doesn't lose that txn gap, it's in the previous logfile and it iterates over it.\r\n\r\nLook at this log snippet: \r\n{noformat}\r\n2025-02-06 17:12:40,818 [myid:] - INFO  [main:FileSnap@85] - Reading snapshot /home/andor/tmp/zookeeper/version-2/snapshot.674c0\r\n2025-02-06 17:12:40,845 [myid:] - INFO  [main:ReferenceCountedACLCache@174] - Ignoring acl 7382 as it does not exist in the cache\r\n2025-02-06 17:12:40,847 [myid:] - INFO  [main:DataTree@1719] - The digest in the snapshot has digest version of 2, with zxid as 0x674c1, and digest value as 8282470946294\r\n2025-02-06 17:12:40,858 [myid:] - INFO  [main:FileTxnLog$FileTxnIterator@693] - Going to next log file /home/andor/tmp/zookeeper/version-2/log.5a1df\r\n2025-02-06 17:12:40,924 [myid:] - INFO  [main:FileTxnSnapLog@351] - Processing zxid 0x674c1: 0x674c1\r\n2025-02-06 17:12:40,924 [myid:] - INFO  [main:DataTree@469] - Creating node /cloudera_manager_zookeeper_canary with acl 6\r\n2025-02-06 17:12:40,928 [myid:] - INFO  [main:FileTxnLog$FileTxnIterator@693] - Going to next log file /home/andor/tmp/zookeeper/version-2/log.674c2\r\n2025-02-06 17:12:40,928 [myid:] - INFO  [main:FileTxnSnapLog@351] - Processing zxid 0x674c2: 0x674c2\r\n2025-02-06 17:12:40,928 [myid:] - INFO  [main:FileTxnSnapLog@351] - Processing zxid 0x674c3: 0x674c3\r\n2025-02-06 17:12:40,929 [myid:] - ERROR [main:ReferenceCountedACLCache@92] - ERROR: ACL not available for long 7382\r\n2025-02-06 17:12:40,929 [myid:] - ERROR [main:ZooKeeperServerMain@91] - Unexpected exception, exiting abnormally\r\njava.lang.RuntimeException: Failed to fetch acls for 7382\r\n        at org.apache.zookeeper.server.ReferenceCountedACLCache.convertLong(ReferenceCountedACLCache.java:93)\r\n{noformat}\r\nSnapshot zxid is {*}0x674c0{*}, so ZK goes to txn logfile *0x5a1df* first and fast forward to txn zxid {*}0x674c1{*}, so actually processing the txn where the parent znode was created. Clearly the ACL id is different in the cache and the data tree: 6 <> 7382\r\n\r\nLook at the code where we process the txn:\r\n{code:java}\r\nsynchronized (parent) {\r\n    parentAcl = getACL(parent);    // Add the ACL to ACL cache first, to avoid the ACL not being\r\n    // created race condition during fuzzy snapshot sync.\r\n    //\r\n    // This is the simplest fix, which may add ACL reference count\r\n    // again if it's already counted in in the ACL map of fuzzy\r\n    // snapshot, which might also happen for deleteNode txn, but\r\n    // at least it won't cause the ACL not exist issue.\r\n    //\r\n    // Later we can audit and delete all non-referenced ACLs from\r\n    // ACL map when loading the snapshot/txns from disk, like what\r\n    // we did for the global sessions.\r\n    Long longval = aclCache.convertAcls(acl);   <---- we re-create the ACL in the ACL cache, but potentially with different id             \r\n    Set<String> children = parent.getChildren();\r\n    if (children.contains(childName)) {\r\n        throw new KeeperException.NodeExistsException();    <---- znode already exists in DataTree, so we skip\r\n    }\r\n...  {code}\r\nThe only thing that we need to do here is to get a reference to the existing znode and fix the ACL reference.\r\n{code:java}\r\nif (children.contains(childName)) {\r\n    DataNode child = nodes.get(path);\r\n    child.acl = longval;\r\n    throw new KeeperException.NodeExistsException();\r\n} {code}\r\nor maybe something more elegant.\r\n\r\nWe don't lose the ACL information.",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
              "name": "andor",
              "key": "andorm",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
              },
              "displayName": "Andor Molnar",
              "active": true,
              "timeZone": "Europe/Budapest"
            },
            "created": "2025-02-06T23:21:35.126+0000",
            "updated": "2025-02-06T23:21:57.157+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13587121/comment/17924952",
            "id": "17924952",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=cnauroth",
              "name": "cnauroth",
              "key": "cnauroth",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"
              },
              "displayName": "Chris Nauroth",
              "active": true,
              "timeZone": "America/Los_Angeles"
            },
            "body": "[~andor] , nice, I think that makes sense!",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=cnauroth",
              "name": "cnauroth",
              "key": "cnauroth",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"
              },
              "displayName": "Chris Nauroth",
              "active": true,
              "timeZone": "America/Los_Angeles"
            },
            "created": "2025-02-07T16:36:25.600+0000",
            "updated": "2025-02-07T16:36:25.600+0000"
          },
          {
            "self": "https://issues.apache.org/jira/rest/api/2/issue/13587121/comment/17926062",
            "id": "17926062",
            "author": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
              "name": "andor",
              "key": "andorm",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
              },
              "displayName": "Andor Molnar",
              "active": true,
              "timeZone": "Europe/Budapest"
            },
            "body": "Issue resolved by pull request 2222\n[https://github.com/apache/zookeeper/pull/2222]",
            "updateAuthor": {
              "self": "https://issues.apache.org/jira/rest/api/2/user?username=andor",
              "name": "andor",
              "key": "andorm",
              "avatarUrls": {
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935",
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"
              },
              "displayName": "Andor Molnar",
              "active": true,
              "timeZone": "Europe/Budapest"
            },
            "created": "2025-02-11T16:49:08.691+0000",
            "updated": "2025-02-11T16:49:08.691+0000"
          }
        ],
        "maxResults": 4,
        "total": 4,
        "startAt": 0
      },
      "assignee": {
        "self": "https://issues.apache.org/jira/rest/api/2/user?username=ztzg",
        "name": "ztzg",
        "key": "ztzg",
        "avatarUrls": {
          "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=ztzg&avatarId=39828",
          "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ztzg&avatarId=39828",
          "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ztzg&avatarId=39828",
          "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ztzg&avatarId=39828"
        },
        "displayName": "Damien Diederen",
        "active": true,
        "timeZone": "Europe/Berlin"
      },
      "priority": {
        "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
        "name": "Blocker",
        "id": "1"
      },
      "labels": [
        "pull-request-available"
      ],
      "status": {
        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
        "name": "Closed",
        "id": "6",
        "statusCategory": {
          "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      }
    }
  }
]